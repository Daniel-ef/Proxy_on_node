function c(t,e,n){(new Image).src=location.protocol+"//clck.yandex.ru/click/dtype=stred/pid="+e+"/cid="+n+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*"+(t.href?t.href:"")}function cp(t,e,n){var i="clck/lid="+t;"undefined"!=typeof g_sid&&(i+="/sid="+g_sid);try{Lego.c(i,e,n)}catch(o){}}function _$(t){return document.getElementById(t)}function cleverSubstring(t,e,n){var i="…";return t.length>e+n?t.substring(0,e-1)+i:t}function htmlFilter(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}!function(t){function e(e,i,o){var r=!1;if(s){var a=[];t.each(c,function(){o.hasOwnProperty(this)&&(r=!0)&&a.push({name:this,val:o[this]})}),r&&(t.each(o,function(t){a.push({name:t,val:this})}),o=a)}t.each(o,function(o,s){if(r&&(o=s.name,s=s.val),t.isFunction(s)&&(!n||s.toString().indexOf(".__base")>-1)){var a=e[o]||function(){};i[o]=function(){var t=this.__base;this.__base=a;var e=s.apply(this,arguments);return this.__base=t,e}}else i[o]=s})}var n=function(){}.toString().indexOf("_")>-1,i=function(){},o=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=!0,r={toString:""};for(var a in r)r.hasOwnProperty(a)&&(s=!1);var c=s?["toString","valueOf"]:null;t.inherit=function(){var n=arguments,s=t.isFunction(n[0]),r=s?n[0]:i,a=n[s?1:0]||{},c=n[s?2:1],u=a.__constructor||s&&r.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!s)return u.prototype=a,u.prototype.__self=u.prototype.constructor=u,t.extend(u,c);t.extend(u,r);var l=r.prototype,h=u.prototype=o(l);return h.__self=h.constructor=u,e(l,h,a),c&&e(r,u,c),u},t.inheritSelf=function(t,n,i){var o=t.prototype;return e(o,o,n),i&&e(t,t,i),t}}(jQuery),function(t){var e=0,n="__"+ +new Date,i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var o="uniqueID"in t?"uniqueID":n;return e||o in t?t[o]:t[o]=i()}}(jQuery),function(t){t.isEmptyObject||(t.isEmptyObject=function(t){for(var e in t)return!1;return!0})}(jQuery),function(t){t.extend({debounce:function(t,e,n,i){3==arguments.length&&"boolean"!=typeof n&&(i=n,n=!1);var o;return function(){var s=arguments;i=i||this,n&&!o&&t.apply(i,s),clearTimeout(o),o=setTimeout(function(){n||t.apply(i,s),o=null},e)}},throttle:function(t,e,n){var i,o,s;return function(){o=arguments,s=!0,n=n||this,i||function(){s?(t.apply(n,o),s=!1,i=setTimeout(arguments.callee,e)):i=null}()}}})}(jQuery),function(t){var e="__"+ +new Date+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,o,s,r,a){if("string"==typeof i){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,u=n(s,r),l=this[e]||(this[e]={}),h=i.split(" "),d=0;i=h[d++];)if(i=this.buildEventName(i),c=l[i]||(l[i]={ids:{},list:{}}),!(u in c.ids)){var f=c.list,p={fn:s,data:o,ctx:r,special:a};f.last?(f.last.next=p,p.prev=f.last):f.first=p,c.ids[u]=f.last=p}}else{var m=this;t.each(i,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,o,s){if("string"==typeof i||"undefined"==typeof i){var r=this[e];if(r)if(i){for(var a,c=i.split(" "),u=0;i=c[u++];)if(i=this.buildEventName(i),a=r[i])if(o){var l=n(o,s),h=a.ids;if(l in h){var d=a.list,f=h[l],p=f.prev,m=f.next;p?p.next=m:f===d.first&&(d.first=m),m?m.prev=p:f===d.last&&(d.last=p),delete h[l]}}else delete this[e][i]}else delete this[e]}else{var _=this;t.each(i,function(t,e){_.un(t,e,s)})}return this},trigger:function(n,i){var o,s=this,r=s[e];if("string"==typeof n?n=t.Event(s.buildEventName(o=n)):n.type=s.buildEventName(o=n.type),n.target||(n.target=s),r&&(r=r[n.type]))for(var a,c=r.list.first;c;)n.data=c.data,a=c.fn.call(c.ctx||s,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),c.special&&c.special.one&&s.un(o,c.fn,c.ctx),c=c.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(e,i,o){t.isFunction(e)?i[n(o,"*","*")]=e:t.each(e,function(e,s){t.isFunction(s)?i[n(o,e,"*")]=s:t.each(s,function(t,s){i[n(o,e,t)]=s})})}function o(t,e){return e?Array.isArray(e)?function(n){for(var i=0,o=e.length;o>i;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}var s=[],r={},a={};this.BEM=t.inherit(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var o=arguments.length,s=!1;1==o?(i="",n=t,t=e,s=!0):2==o&&("string"==typeof t?(i=n,n=t,t=e):(i="",s=!0));var r=this.getMod(t,n)===i;return s?!r:r},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache;return e in i?i[e]:i[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var n=t&&"string"!=typeof t,i=this,o=[].slice.call(arguments,n?1:0),s=i._extractMods(o,n?t:e);return n||(o.length?o.forEach(function(t){i._modCache[t]=s[t]}):i._modCache=s),s},setMod:function(n,i,o){"undefined"==typeof o&&(o=i,i=n,n=e);var s=this;if(!n||n[0]){var r=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[r])return s;var a,c=n?s._getElemMod(i,n,a=s.__self._extractElemNameFrom(n)):s.getMod(i);if(c===o)return s;this._processingMods[r]=!0;var u=!0,l=[i,o,c];n&&l.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(t){u=s._callModFn(a,t[0],t[1],l)!==!1&&u}),!n&&u&&(s._modCache[i]=o),u&&s._afterSetMod(i,o,c,n,a),delete this._processingMods[r]}return s},_afterSetMod:function(){},toggleMod:function(t,n,i,o,s){"string"==typeof t&&(s=o,o=i,i=n,n=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,n);return(r==i||r==o)&&this.setMod(t,n,"boolean"==typeof s?s?i:o:this.hasMod(t,n,i)?o:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,o,s){var r=n(t,i,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},{_name:"i-bem",blocks:r,decl:function(n,s,a){if("string"==typeof n?n={block:n}:n.name&&(n.block=n.name),n.baseBlock&&!r[n.baseBlock])throw'baseBlock "'+n.baseBlock+'" for "'+n.block+'" is undefined';s||(s={}),s.onSetMod&&(i(s.onSetMod,s),delete s.onSetMod),s.onElemSetMod&&(t.each(s.onElemSetMod,function(t,e){i(e,s,t)}),delete s.onElemSetMod);var c=r[n.baseBlock||n.block]||this;if(n.modName){var u=o(n.modName,n.modVal);t.each(s,function(n,i){t.isFunction(i)&&(s[n]=function(){var t;if(u(this))t=i;else{var o=c.prototype[n];o&&o!==s[n]&&(t=this.__base)}return t?t.apply(this,arguments):e})})}if(a&&"boolean"==typeof a.live){var l=a.live;a.live=function(){return l}}var h;return n.block==c._name?(h=t.inheritSelf(c,s,a))._processLive(!0):(h=r[n.block]=t.inherit(c,s,a))._name=n.block,h},_processLive:function(){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(t,e){1==s.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=s.length;if(t)for(var e,n=s.splice(0,t);e=n.shift();)e.fn.call(e.ctx||this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);i>n;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(a[n]&&(a[n].un(),delete a[n])):a[n]||(a[n]=new t.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e})}(),function(){var t=Array.prototype,e=Object.prototype.toString,n={indexOf:function(t,e){e=+(e||0);var n=this,i=n.length;if(i>0&&i>e)for(e=0>e?Math.ceil(e):Math.floor(e),-i>e&&(e=0),0>e&&(e+=i);i>e;){if(e in n&&n[e]===t)return e;++e}return-1},forEach:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))},map:function(t,e){for(var n=-1,i=this,o=i.length,s=new Array(o);++n<o;)n in i&&(s[n]=e?t.call(e,i[n],n,i):t(i[n],n,i));return s},filter:function(t,e){for(var n=-1,i=this,o=i.length,s=[];++n<o;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))&&s.push(i[n]);return s},reduce:function(t,e){var n,i=-1,o=this,s=o.length;if(arguments.length<2){for(;++i<s;)if(i in o){n=o[i];break}}else n=e;for(;++i<s;)i in o&&(n=t(n,o[i],i,o));return n},some:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!0;return!1},every:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&!(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!1;return!0}};for(var i in n)t[i]||(t[i]=n[i]);Array.isArray||(Array.isArray=function(t){return"[object Array]"===e.call(t)})}(),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),function(t,e,n){function i(t,e,n){n.push(r,t,r,e)}function o(t,e,n,o){o.push(t),n&&i(e,n,o)}function s(t,e,s,r,c){o(t,n,n,c),c.push(a,e),r&&i(s,r,c)}var r="_",a="__",c="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:c,MOD_DELIM:r,ELEM_DELIM:a,buildModPostfix:function(t,e,n){var o=n||[];return i(t,e,o),n?o:o.join("")},buildClass:function(t,e,i,r,a){var c=typeof i;if("string"==c?"string"!=typeof r&&"number"!=typeof r&&(a=r,r=i,i=e,e=n):"undefined"!=c?(a=i,i=n):e&&"string"!=typeof e&&(a=e,e=n),!(e||i||a))return t;var u=a||[];return e?s(t,e,i,r,u):o(t,i,r,u),a?u:u.join("")},buildClasses:function(t,i,r,a){i&&"string"!=typeof i&&(a=r,r=i,i=n);var c=a||[];return i?s(t,i,n,n,c):o(t,n,n,c),r&&e.each(r,function(e,n){n&&(c.push(" "),i?s(t,i,e,n,c):o(t,e,n,c))}),a?c:c.join("")}}}(BEM,jQuery),jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){i=decodeURIComponent(r.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,a="; expires="+c.toUTCString()}var u=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(o){try{i=t(e(n))}catch(o){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),function(t,e,n){function i(t,e,n){(t[e]||(t[e]=[])).unshift(n)}function o(t,e){return e.modName?function(n){(n._curBlock.mods||{})[e.modName]===e.modVal&&t(n)}:t}function s(t,n){var i,o=e.isArray(n);return e.isArray(t)?o?i=t.concat(n):(i=t).push(n):o?(i=n).unshift(t):i=[t,n],i}function r(t){return t.replace(p,function(t){return f[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,u={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},f={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},p=/["&<>]/g;t.HTML={decl:function(t,n){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=d[t.block]||(d[t.block]={});n.onBlock&&i(s,"_block",o(n.onBlock,t)),n.onElem&&(e.isFunction(n.onElem)?i(s,"_elem",o(n.onElem,t)):e.each(n.onElem,function(e,n){i(s,"_elem"+("*"===e?"":c+e),o(n,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,n,i,o){var s=this,r=s._params;return"undefined"==typeof n?r[t]:(!i&&t in r?o&&(r[t]=e.extend(n,r[t])):r[t]=n,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.attrs||{})[t];var o=i._params.attrs;return o?(n||!(t in o))&&(o[t]=e):(i._params.attrs={})[t]=e,i},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.mods||{})[t];var o=i._params.mods;return o?(n||!(t in o))&&(o[t]=e):(i._params.mods={})[t]=e,i},mix:function(t,e){var n=this,i=n._params;return"undefined"==typeof t?i.mix:(i.mix=!e&&"mix"in i?i.mix.concat(t):t,n)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,n=e._params;return t.content=n.content,n.content=t,e},beforeContent:function(t){var e=this,n=e._params;return n.content=s(t,n.content),e},afterContent:function(t){var e=this,n=e._params;return n.content=s(n.content,t),e},wrap:function(t){var e=this,n=e._params;return t.block||(t._curBlock=e._curBlock),t.content=n._wrapper?n._wrapper:n,n._wrapper=t,e},tParam:function(t,e){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof e)return i[t];var o=n._tParamsChanges||(n._tParamsChanges={});return t in o||(o[t]=i[t]),i[t]=e,n},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,n=t._buffer,i=t._params,o=typeof i;if("string"==o||"number"==o)n.push(i);else if(e.isArray(i))for(var s,r,a=0,c=i.length;c>a;)t._params=s=i[a++],r=typeof s,"string"==r||"number"==r?n.push(s):s&&(s._pos=a,s._siblingsCount=c,t._buildByDecl());else i&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,n=this,i=n._buffer,o=n._params,s=o.tag||"div",a=o.block||o.elem,c=a&&(o.block||n._curBlock.block),d=!1;o.js&&((t={})[l(c,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),i.push("<",s),(a||o.cls)&&(i.push(' class="'),a&&(h(c,o.elem,o.mods,i),o.mix&&e.each(o.mix,function(e,n){n&&(i.push(" "),h(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[l(n.block,n.elem)]=n.js===!0?{}:n.js,d||(d=!n.elem)))})),o.cls&&i.push(a?" ":"",o.cls),d&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),u[s]?i.push("/>"):(i.push(">"),"undefined"!=typeof o.content&&(n._params=o.content,n._buildAll()),i.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,n=t._curBlock,i=t._params;if(i._curBlock&&(t._curBlock=i._curBlock),i.block&&(t._curBlock=i),!i._wrapper){if(i.block||i.elem){var o=d[t._curBlock.block];if(o){var s;if(i.elem?(s=o["_elem"+c+i.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!i._isStopped););}}if(i._wrapper)return i._curBlock=t._curBlock,t._params=i._wrapper,t._buildAll()}var u=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=n,u){var l=t._tParams;e.each(u,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),function(t){if(!window.JSON){var e,n=Object.prototype.toString,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:e=function(s){if(null===s)return"null";if("undefined"==typeof s)return t;switch(n.call(s)){case"[object String]":return i.lastIndex=0,'"'+(i.test(s)?s.replace(i,function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):s)+'"';case"[object Number]":case"[object Boolean]":return""+s;case"[object Array]":for(var r,a="[",c=0,u=s.length;u>c;)r=e(s[c]),a+=(c++?",":"")+("undefined"==typeof r?"null":r);return a+"]";case"[object Object]":if("[object Function]"===n.call(s.toJSON))return e(s.toJSON());var r,a="{",c=0;for(var l in s)s.hasOwnProperty(l)&&(r=e(s[l]),"undefined"!=typeof r&&(a+=(c++?",":"")+'"'+l+'":'+r));return a+"}";default:return t}}}}}(),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(r,a){s(a,i,r,n);var c=p[a.uniqId];c?c.domElem.index(i)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):o(r,t,a)})}function o(t,i,o,r,c){"boolean"==typeof o&&(c=r,r=o,o=n);var u=i[0];o=s(o||a(u)[t],u,t);var l=o.uniqId;if(p[l])return p[l]._init();f[l]=f[l]?f[l].add(i):i;var h=u.parentNode;h&&11!==h.nodeType||e.unique(f[l]);var d=b[t]||x.decl(t,{},{live:!0});if(!(d._liveInitable=!!d._processLive())||r||o.live===!1){var m=new d(f[l],o,!!r);return delete f[l],c&&c.apply(m,Array.prototype.slice.call(arguments,4)),m}}function s(t,n,i,o){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(n),r=m[s]||(m[s]={});return r[i]||(r[i]=t),t}function r(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=c(t))}function c(t){var n=t.onclick||t.ondblclick;if(!n&&"body"==t.tagName.toLowerCase()){var i=e(t),o=i.attr("onclick")||i.attr("ondblclick");o&&(n=Function(o))}return n?n():{}}function u(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),f={},p={},m={},_={},g={},b=t.blocks,v=t.INTERNAL,y=v.NAME_PATTERN,k=v.MOD_DELIM,E=v.ELEM_DELIM,w=v.buildModPostfix,M=v.buildClass;e.fn.bem=function(t,e){return o(t,this,e,!0)};var x=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},p[o._uniqId=n.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,s,r){s||(s=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,c="string"==typeof s,u=c?s:s.block||s.blockName,l="."+(c?M(u):M(u,s.modName,s.modVal))+(r?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),r)return h[0]?o(u,h.eq(0),!0):null;var d=[],f={};return e.each(h,function(t,n){var i=o(u,e(n),!0);f[i._uniqId]||(f[i._uniqId]=!0,d.push(i))}),d},bindToDomElem:function(t,n,i){var o=this;return i?t.bind(o._buildEventName(n),function(t){return(t.data||(t.data={})).domElem=e(this),i.apply(o,arguments)}):e.each(n,function(e,n){o.bindToDomElem(t,e,n)}),o},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindToWin:function(t,e){var n,i,o=e;return"resize"===t&&(e=function(){var t=h.height(),e=h.width();(n!==t||i!==e)&&(n=t,i=e,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindTo:function(t,n,i){return!n||e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(d,t)},unbindFromWin:function(t){return this.unbindFromDomElem(h,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this,n=e._eventNameCache;if(t in n)return n[t];var i="."+e._uniqId;if(t.indexOf(".")<0)return n[t]=t+i;var o=".bem_"+e.__self._name;return n[t]=t.split(".").map(function(t,e){return 0==e?t+o:o+"_"+t}).join("")+i},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,n){var i=this,o=_[i.__self._buildCtxEventName(t.type)],s={};o&&i.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var u=o.ctxs[c];u&&(e.each(u,function(e,o){o.fn.call(o.ctx||i,t,n)}),a--),s[c]=!0}r=r.parentNode}})},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,n,i)}),o}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,o=(e||this.domElem)[0];return o&&(i=o.className.match(this.__self._buildModValRE(t,n||e))),i?i[2]:""},_extractMods:function(t,e){var n={},i=!t.length,o=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(i?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(k),i=t.substr(0,e-1).lastIndexOf(k);n[t.substr(i+1,e-i-1)]=t.substr(e+1),++o}),o<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,o,s){var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s),u=""===n;(o||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(c,u?"":"$1"+a+n):u||e(this).addClass(a+n)}),s&&this.dropElemCache(s,t,i).dropElemCache(s,t,n)},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t));var o=this.__self,s="."+e.split(" ").map(function(t){return M(o._name,t,n,i)}).join(",.");return r(t,s)},_elem:function(t,e,n){var i,o=t+w(e,n);return(i=this._elemCache[o])||(i=this._elemCache[o]=this.findElem(t,e,n),i.__bemElemName=t),i},elem:function(t,n,i){if(n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var o=e([]),s=this;return t.split(" ").forEach(function(t){o=o.add(s._elem(t,n,i))}),o},dropElemCache:function(t,e,n){if(t){var i=this,o=w(e,n);t.indexOf(" ")<0?delete i._elemCache[t+o]:t.split(" ").forEach(function(t){delete i._elemCache[t+o]})}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[M(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=p[e.uniqId];i?i._isDestructing||l(i,n):delete f[e.uniqId]}),u(n)}),t||n.domElem.remove(),delete p[n.un()._uniqId],delete n.domElem,delete n._elemCache,n.__base()}},{scope:null,doc:d,win:h,_processLive:function(t){var e=this,n=e._liveInitable;if("live"in e){var i="undefined"==typeof n;i^t&&(n=e.live()!==!1,e.live=function(){})}return n},init:function(t,n,o){(!t||e.isFunction(t))&&(o=n,n=t,t=d);var s=e.identify();return r(t,".i-bem").each(function(){i(e(this),s)}),n&&this.afterCurrentEvent(function(){n.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,o){"boolean"!=typeof t&&(o=i,i=t,t=n),r(i,".i-bem",o).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=p[e.uniqId];i?l(i,n):delete f[e.uniqId]}}),u(this)}),t||(o?i.empty():i.remove())},update:function(t,e,n,i){this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){this.init(e(n).appendTo(t))},prepend:function(t,n){this.init(e(n).prependTo(t))},before:function(t,n){this.init(e(n).insertBefore(t))},after:function(t,n){this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,o){var s=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){s._liveClassBind(t,e,i,o)});else{var r=g[n],a=e.identify(i);r||(r=g[n]={},d.bind(n,s.changeThis(s._liveClassTrigger,s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(i,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var o=g[n];if(o)if(i){if(o=o[t]){var s=e.identify(i);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var n=g[t.type];if(n){var i=t.target,o=[];for(var s in n)n.hasOwnProperty(s)&&o.push(s);do for(var r=" "+i.className+" ",a=0;s=o[a++];)if(r.indexOf(" "+s+" ")>-1){for(var c,u=0,l=n[s].fns,h=!1;c=l[u++];)c.fn.call(e(i),t)===!1&&(h=!0);if(h&&t.preventDefault(),h||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(s){var r=[i._name,((s.data||(s.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=o.apply(null,n?r.concat([t,s]):r);return a&&!n&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,o,s){(!i||e.isFunction(i))&&(o=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(M(r._name,e,t.modName,t.modVal),i,o,s)}),r):r._liveClassBind(M(r._name,t.elem,t.modName,t.modVal),i,o,s)},liveUnbindFrom:function(t,e,n){var i=this;return t.indexOf(" ")>1?(t.split(" ").forEach(function(t){i._liveClassUnbind(M(i._name,t),e,n)}),i):i._liveClassUnbind(M(i._name,t),e,n)},_liveInitOnBlockEvent:function(t,e,n,i){var o=this._name;return b[e].on(t,function(t){var e=arguments,s=t.block[i](o);n&&s.forEach(function(t){n.apply(t,e)})}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockInsideInit:function(t,e){return this.liveInitOnBlockInsideEvent("init",t,e)},on:function(t,e,n,i,o){return t.jquery?this._liveCtxBind(t,e,n,i,o):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,o){return this._liveCtxBind(t,e,n,i,o)},_liveCtxBind:function(t,i,o,s,r){var a=this;if("string"==typeof i)if(e.isFunction(o)&&(r=s,s=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var c=a._buildCtxEventName(i),u=_[c]||(_[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=u.ctxs[t];n||(n=u.ctxs[t]={},++u.counter),n[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,o)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,o){var s=this,r=_[n=s._buildCtxEventName(n)];return r&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=r.ctxs[n])&&(i&&delete t[e.identify(i)+(o?e.identify(o):"")],(!i||e.isEmptyObject(t))&&(r.counter--,delete r.ctxs[n]))}),r.counter||delete _[n]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:n},extractParams:c,_buildModClassPrefix:function(t,e){return M(this._name)+(e?E+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+k+t+k},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+y+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+E+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+M(this._name,t,e,n)},getBlockByUniqId:function(t){return p[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){for(var t=this.replace(/^\s\s*/,""),e=/\s/,n=t.length;e.test(t.charAt(--n)););return t.slice(0,n+1)})}(),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return!!t.getCookie("yandex_login")}}(window.Lego),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,$(function(){t.oframebust&&Lego.oframebust(t.oframebust)})}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"//pass.yandex.ru","social-host":"//social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t){return(this._params||{})[t]}}),function(t){function e(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,n,i){var o=e(i&&i.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),s=function(t,e,n,i){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+o+"/"+n+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(i?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},r=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");
n.setAttribute("src",s(t,location.href,"jclck")),e.insertBefore(n,e.firstChild)};if(n)if(n.className.match(/b-link_pseudo_yes/)||n.href&&n.href.match(/^mailto:/)||i&&i.noRedirect===!0)r();else if(n.href){var a=n.href;n.href=s(t,a,"redir"),setTimeout(function(){n.href=a},500)}else if(n.form)if(n.type.match(/submit|button|image/)){var a=n.form.action;n.form.action=s(t,a,"redir",!0),setTimeout(function(){n.form.action=a},500)}else r();else{if(!n.action)throw"counter.js: not link and not form!";n.action=s(t,n.action,"redir",!0)}else r()}}(window.Lego),function(t,e){t||(t=window.Lego={}),t.cp=function(n,i,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+n+"/cid="+i+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)}}(window.Lego),function(t){t||(t=window.Lego={}),t.ch=function(e,n,i){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,n,i)}}(window.Lego),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(-1==n)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(-1==i?e.substring(n):e.substring(n,i))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"//passport.yandex.ru","pass-host":"//pass.yandex.ru","passport-msg":n.id,"social-host":"//social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),t(function(){n.oframebust&&e.oframebust(n.oframebust)}),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},o=i.name||"",s=e.block[o];s&&!n.data(o)&&(s.call(n,i),n.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=!!t(document).ready(function(){e.blockInit()}))}(jQuery,window.Lego),function(t){t||(t=window.Lego={}),t.messages=t.messages||{},t.message=function(e,n){return"ru"==t.params.locale?n:t.messages[e]||n}}(window.Lego),$(function(){BEM.DOM.init()}),function(){"use strict";var t=function(){return!window.opera||parseFloat(window.opera.version())>12.1}();BEM.BROWSER={compatibility:{correctKeyEvents:t}};var e=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},n=e(navigator.userAgent);n.browser&&(BEM.BROWSER[n.browser]=!0,BEM.BROWSER.version=n.version),BEM.BROWSER.chrome?BEM.BROWSER.webkit=!0:BEM.BROWSER.webkit&&(BEM.BROWSER.safari=!0)}(),BEM.DOM.decl("b-keyboard-loader",{onSetMod:{js:function(){Lego.block["b-keyboard-loader"].call(this.domElem,this.params)}}}),function(t,e){e.block["b-keyboard-loader"]=function(n){function i(n){var i=n?"addClass":"toggleClass",o=c.find(".b-keyboard-popup"),s=e.block["b-keyboard"]._lastFocusedIn;if(o.length){if(c.find(".b-keyboard-popup__gap")[i]("i-hidden"),c.find(".b-keyboard-popup")[i]("i-hidden").hasClass("i-hidden")){if(u.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego"),s)if(s.createTextRange){var r=s.createTextRange();r.move("character",s.value.length),r.select()}else s.focus()}else u.trigger("keyboardOpened.lego");o.data("isHidden",!1)}}function o(){h||(e.cp(0,70873,BEM.blocks["i-global"].param("id")+"."+(n.autoLoad?"auto":"manual")),h=!0)}function s(t){return r()[t]}function r(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function a(e,n){var i=r(),o=[];i[e]=n,t.each(i,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var c=t(document.body),u=t(window),l=this;l.click(function(o){o.preventDefault();var s=t(this),r=(this.className.match(/b-keyboard-loader_lang_(\w+)/)||["",""])[1];if(c.find(".b-keyboard")[0])i();else{var a=e.block["b-keyboard-loader"].getStaticFiles();s.append('<i class="b-keyboard-loader__progress"/>'),t.xLazyLoader({name:"b-keyboard",js:a.js,css:a.css,success:function(){e.block["b-keyboard-popup"]({lang:r,"for":n["for"]}),c.append("<div class=\"b-keyboard i-bem\" onclick=\"return {'b-keyboard': { lang:'"+r+"'}};\"></div>"),BEM.DOM.init(t(".b-keyboard")),s.find(".b-keyboard-loader__progress").remove(),u.trigger("keyboardOpened.lego",{afterLoad:!0})}})}}),u.bind("keyboardOpen.lego",function(){l.click()}).bind("keyboardClose.lego",i),n["for"]&&u.bind("keyboardOpened.lego",function(e,i){!(i&&i.afterLoad&&n.autoLoad)&&t(n["for"]).focus()}),u.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var n=l.find(".b-keyboard-loader__flag");n[0]&&("tt"===e&&(e="ru"),n.attr("src",n.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),n.storeState=n.storeState!==!1,n.storeState&&u.bind("keyboardOpened.lego",function(){a("keyboard_state","open");var e=s("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){a("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){a("keyboard_lang",e)}),(n.autoLoad=n.autoLoad||n.storeState&&"open"==s("keyboard_state"))&&l.click();var h;u.bind("keyboardOpened.lego",function(){o(),t("input:focus").focus()})},e.block["b-keyboard-loader"].getStaticHost=function(){return BEM.blocks["i-global"].param("lego-static-host")},e.block["b-keyboard-loader"].getStaticFiles=function(){var t=e.block["b-keyboard-loader"].getStaticHost(),n=t+("/"===t.charAt(t.length-1)?"":"/")+"blocks-desktop/",i=BEM.BROWSER.msie&&(!document.documentMode||document.documentMode<9)?".ie":"";return{js:[n+"b-keyboard/_keyboard.js"],css:[n+"b-keyboard/_keyboard"+i+".css"]}}}(jQuery,window.Lego),function(t){function e(){function e(t,e){l[t](e,function(t){"error"==t?d.push(e):h.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function i(t){r.complete(t,h,d),r[t]("error"==t?d:h),clearTimeout(a),clearTimeout(c)}function o(){h.length==f.length?i("success"):h.length+d.length==f.length&&i("error")}function s(){d.push(this.src),o()}var r,a,c,u,l=this,h=[],d=[],f=[];this.init=function(n){if(n){if(r=t.extend({},t.xLazyLoader.defaults,n),u={js:r.js,css:r.css,img:r.img},t.each(u,function(t,e){"string"==typeof e&&(e=e.split(",")),f=f.concat(e)}),!f.length)return void i("error");r.timeout&&(a=setTimeout(function(){var e=h.concat(d);t.each(f,function(n,i){-1==t.inArray(i,e)&&d.push(i)}),i("error")},r.timeout)),t.each(u,function(n,i){t.isArray(i)?t.each(i,function(t,i){e(n,i)}):"string"==typeof i&&e(n,i)})}},this.js=function(e,i){var o=t('script[src*="'+e+'"]');if(o.length)return void(o.attr("pending")?o.bind("scriptload",i):i());var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),r.setAttribute("pending",1),r.onerror=s,t(r).bind("scriptload",function(){t(this).removeAttr("pending"),i(),setTimeout(function(){t(r).unbind("scriptload")},10)});var a=!1;r.onload=r.onreadystatechange=function(){a||this.readyState&&!/loaded|complete/.test(this.readyState)||(a=!0,r.onload=r.onreadystatechange=null,t(r).trigger("scriptload"))},n.appendChild(r)},this.css=function(e,i){if(t('link[href*="'+e+'"]').length)return void i();var o=document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),BEM.BROWSER.msie?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&i()}:BEM.BROWSER.opera?o.onload=i:!function(){o&&o.sheet?i():c=setTimeout(arguments.callee,20)}(),n.appendChild(o)},this.img=function(t,e){var n=new Image;n.onload=e,n.onerror=s,n.src=t},this.disable=function(e){t("#lazy-loaded-"+e,n).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,n).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,n).remove()}}t.xLazyLoader=function(t,n){"object"==typeof t&&(n=t,t="init"),(new e)[t](n)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var n=document.getElementsByTagName("head")[0]}(jQuery),Lego.block["b-keyboard-loader"].getStaticHost=function(){return BEM.blocks["i-global"].param("keyboard-host")},Lego.block["b-keyboard-loader"].getStaticFiles=function(){var t=Lego.block["b-keyboard-loader"].getStaticHost(),e=t+("/"===t.charAt(t.length-1)?"":"/")+"blocks/desktop/",n=BEM.BROWSER.msie&&(!document.documentMode||document.documentMode<9)?".ie":"";return{js:[e+"b-keyboard/_keyboard.js"],css:[e+"b-keyboard/_keyboard"+n+".css"]}},BEM.DOM.decl("b-keyboard-loader",{onSetMod:{js:function(){var t=this;this.__base.apply(this,arguments),$(window).on("keyboardOpened.lego",function(){t.params.statOpen&&cp(t.params.statOpen)}).on("keyboardClosed.lego",function(e){"lego"===e.namespace&&t.params.statClose&&cp(t.params.statClose)})}}}),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),function(t){BEM.DOM.decl("b-dropdowna",{onSetMod:{js:function(){this._getSwitcher().on("click",this._toggle,this)},disabled:function(t,e){this._getSwitcher().setMod(t,e),"yes"==e&&this.getPopup().hide()}},_getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside("b-"+(this.getMod(this.elem("switcher"),"type")||"link")))},_toggle:function(){this.getPopup().toggle(this.elem("switcher"))},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("b-popupa")).on("outside-click",function(e,n){this._getSwitcher().containsDomElem(t(n.domEvent.target))&&e.preventDefault()},this)},destruct:function(){var t=this._popup;t&&t.destruct(),this.__base.apply(this,arguments)}},{live:function(){this.liveInitOnEvent("switcher","leftclick",function(){})}})}(jQuery),BEM.HTML.decl("b-dropdowna",{onBlock:function(t){t.js(!0)}}),function(t){var e=["down-right","down","down-left","up","up-right","up-left","right-down","right","right-up","left-down","left","left-up"];BEM.DOM.decl("b-popupa",{onSetMod:{js:function(){this._owner=null,this._isShowed=!1,this._direction=this.getMod("direction")||"down",this._lastDirection=null,this._hasTail=!!this.elem("tail").length,this._hasTail||Object.keys(this.params).forEach(function(t){0===t.indexOf("tail")&&(this.params[t]=0)},this)}},show:function(t){return this._isShowed&&this._owner===t||(this._owner=t,this._getUnder().show({left:-1e4,top:-1e4}),this.pos(),this._getUnder().setMod("animate","yes")),this},hide:function(){return this._isShowed&&this._getUnder().hide(),this},toggle:function(t){return this.isShowed()?this.hide():this.show(t)},_pos:function(){var t=this._calcParams(this._owner);return this._hasTail&&this.elem("tail").css(t.tailOffsets),this.setMod("direction",t.direction)._getUnder().show(t.offsets),this},pos:function(){return this._isShowed?this._pos():this},isShowed:function(){return this._isShowed},setDirection:function(t){this._direction!=t&&(this._direction=t,this.isShowed()&&this.pos())},setContent:function(t,e,n){return BEM.DOM.update(this.elem("content"),t,e,n),this.isShowed()?this.pos():this},_isOwnerNode:function(){return!(!this._owner||!this._owner.jquery)},_calcDimensions:function(){var t=this._getUnder().domElem,e=this._getUnder()._getUnder(),n=this.__self.win,i=this._owner,o=this._isOwnerNode(),s=o?i.offset():i,r=o?i.outerWidth():0,a=o?i.outerHeight():0,c=n.scrollLeft(),u=n.scrollTop(),l=this.__self.getWindowSize(),h=parseInt(this.elem("content").css("border-top-width"),10);return{ownerWidth:r,ownerHeight:a,ownerLeft:s.left,ownerTop:s.top,ownerRight:s.left+r,ownerBottom:s.top+a,ownerHorizMiddle:s.left+r/2,ownerVertMiddle:s.top+a/2,posWidth:t.outerWidth(),posHeight:t.outerHeight(),underWidth:e.outerWidth(),underHeight:e.outerHeight(),borderWidth:isNaN(h)?0:h,windowLeft:c,windowRight:c+l.width,windowTop:u,windowBottom:u+l.height}},_calcParams:function(){var e=this._calcDimensions();if(this.hasMod("adjustable","no"))return this.calcDirectionParams(this._direction,e);var n={},i=this.params.directions,o=t.inArray(this._direction,i);o>-1||(o=0);var s,r,a=o;do{if(s=i[o],r=n[s]=this.calcDirectionParams(s,e),!r.factor)return this._lastDirection=s,r;++o==i.length&&(o=0)}while(o!==a);return n[this._lastDirection||i[0]]},calcDirectionParams:function(t,e){var n,i=this.params,o={top:0,left:0},s={marginLeft:0,marginTop:0},r=t.split("-")[0],a=this._hasTail&&e.ownerWidth<i.tailWidthVertical?(i.tailWidthVertical-e.ownerWidth)/2:0,c=this._hasTail&&e.ownerHeight<i.tailHeightHorizontal?(i.tailHeightHorizontal-e.ownerHeight)/2:0;switch(t){case"up":case"down":o.left=e.ownerHorizMiddle-e.posWidth/2,o.top="down"==t?e.ownerBottom+i.tailHeightVertical:e.ownerTop-e.posHeight-i.tailHeightVertical,s.marginLeft=e.posWidth/2-i.tailWidthVertical/2,s.marginTop="down"==t?0-i.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":o.left="down-right"==t||"up-right"==t?e.ownerLeft-a:e.ownerRight-e.posWidth+a,o.top="down"==r?e.ownerBottom+i.tailHeightVertical:e.ownerTop-e.posHeight-i.tailHeightVertical,s.marginLeft=e.ownerWidth>e.posWidth?e.posWidth/2-i.tailWidthVertical/2:e.ownerHorizMiddle-o.left-i.tailWidthVertical/2,s.marginTop="down"==r?e.borderWidth-i.tailHeightVertical:0-e.borderWidth;break;case"left-down":case"right-down":o.left="left-down"==t?e.ownerLeft-e.posWidth-i.tailWidthHorizontal:e.ownerRight+i.tailWidthHorizontal,o.top=e.ownerTop-c,s.marginLeft="left-down"==t?0-e.borderWidth:e.borderWidth-i.tailWidthHorizontal,s.marginTop=e.ownerHeight<e.posHeight?e.ownerVertMiddle-o.top-i.tailHeightHorizontal/2:e.posHeight/2-i.tailHeightHorizontal/2;break;case"left":case"right":o.left="left"==t?e.ownerLeft-e.posWidth-i.tailWidthHorizontal:e.ownerRight+i.tailWidthHorizontal,o.top=e.ownerVertMiddle-e.posHeight/2,s.marginLeft="left"==t?0-e.borderWidth:e.borderWidth-i.tailWidthHorizontal,s.marginTop=e.posHeight/2-i.tailHeightHorizontal/2;break;case"left-up":case"right-up":o.left="left-up"==t?e.ownerLeft-e.posWidth-i.tailWidthHorizontal:e.ownerRight+i.tailWidthHorizontal,o.top=e.ownerBottom-e.posHeight+c,s.marginLeft="left"==r?0-e.borderWidth:e.borderWidth-i.tailWidthHorizontal,s.marginTop=e.ownerHeight>e.posHeight?e.posHeight/2-i.tailHeightHorizontal/2:e.ownerVertMiddle-o.top-i.tailHeightHorizontal/2}return n=this.calcInWindowFactor(o,e),{direction:r,factor:n,offsets:o,tailOffsets:s}},calcInWindowFactor:function(t,e){var n=0;return e.windowTop>t.top&&(n+=e.windowTop-t.top),t.top+e.underHeight>e.windowBottom&&(n+=t.top+e.underHeight-e.windowBottom),e.windowLeft>t.left&&(n+=e.windowLeft-t.left),t.left+e.underWidth>e.windowRight&&(n+=t.left+e.underWidth-e.windowRight),n},getDefaultParams:function(){return{tailOffset:19,tailWidthHorizontal:9,tailWidthVertical:19,tailHeightHorizontal:19,tailHeightVertical:10,shadowSize:7,directions:e}},destruct:function(){var t=this._under;t?this._destructing||(this._destructing=!0,this.hide(),BEM.DOM.destruct(!1,t.domElem),this.__base(!0)):this.__base.apply(this,arguments)},_getUnder:function(){if(!this._under){var e=t(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:this.getMod("autoclosable")||"yes",fixed:this.hasMod("direction","fixed")&&"yes"},underMods:this.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(this._under=this.findBlockOn(e,"i-popup")).on({show:this._onUnderShowed,hide:this._onUnderHidden,"outside-click":this._onUnderOutsideClicked},this).elem("content").append(this.domElem)}return this._under},_onUnderShowed:function(){this._isShowed=!0,this.bindToDomElem(t(window),"resize",this.pos)._isOwnerNode()&&this.bindToDomElem(this._owner.parents().add(this.__self.win),"scroll",this.pos),this.trigger("show")},_onUnderHidden:function(){this._isShowed=!1,this.unbindFromDomElem(t(window),"resize")._isOwnerNode()&&this.unbindFromDomElem(this._owner.parents().add(this.__self.win),"scroll"),this.trigger("hide")},_onUnderOutsideClicked:function(){this.trigger.apply(this,arguments)}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}}),BEM.HTML.decl("b-popupa",{onBlock:function(e){var n=!1;t.each(e.param("content"),function(t,e){return!(n="close"==e.elem)}),e.mods({theme:"ffffff",direction:"down","has-close":n&&"yes"}).js(!0).afterContent({elem:"shadow"})},onElem:{content:function(t){t.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(t){t.tag("i")},shadow:function(t){t.tag("i")},tail:function(t){t.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})}(jQuery),BEM.DOM.decl("b-popupa",{isShown:function(){return this.isShowed()},_getUnder:function(){return this._under||(this.__base.apply(this,arguments),this.domElem.hasClass("suggest2")&&this._under.domElem.addClass("i-popup_suggest_yes")),this._under},_pos:function(){return this.__base.apply(this,arguments),this.__base.apply(this,arguments)},_onUnderShowed:function(){this.domElem.hasClass("suggest2")?(this._isShowed=!0,this._isOwnerNode()&&this.bindToDomElem(this._owner.parents().add(this.__self.win),"scroll",this.pos),this.trigger("show")):this.__base.apply(this,arguments)}}),function(t){function e(){return s.length?s.shift():o?o.clone():o=i()}function n(t){s.push(t)}function i(){var e,n=(r.safari||r.webkit)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1;if(n)return t("<div/>");try{e=location.hostname!==document.domain}catch(i){e=!0}return t("<iframe"+(r.msie&&r.version<9?' frameborder="0"':"")+(r.msie&&e?" src=\"javascript:void(function(){document.open();document.write('<script>document.domain=\\'"+document.domain+"\\'</script>');document.close();})()\"":"")+"/>")}var o,s=[],r=BEM.BROWSER;BEM.DOM.decl("i-popup",{onSetMod:{js:function(){r.msie&&parseInt(r.version)>=9&&(this.domElem[0].onresize=function(){this.className+=""})},visibility:{visible:function(){var t=this._getUnder(),e=t.parent();this.hasMod(t,"type","paranja")?e.is("body")||t.appendTo("body"):e[0]!==this.domElem[0]&&t.prependTo(this.domElem),this._inBody||(this._inBody=!!this.domElem.appendTo("body")),this.trigger("show")},"":function(){var t=this._getUnder();this.hasMod(t,"type","paranja")&&t.remove(),this._putUnder(),this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=e().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){n(this._under),delete this._under},show:function(t){return t&&this.domElem.css(t),this.setMod("visibility","visible")},hide:function(){return this.delMod("animate").delMod("visibility")}},{live:!0})}(jQuery),BEM.HTML.decl("i-popup",{onBlock:function(t){t.mod("autoclosable","yes").js(!0).wrapContent({elem:"content"}).afterContent({elem:"under",mods:t.param("underMods"),mix:t.param("underMix")}).param("zIndex")&&t.attr("style","z-index:"+(32700+t.param("zIndex")))}}),function(t){var e=BEM.BROWSER.compatibility.correctKeyEvents?"keydown":"keypress";BEM.DOM.decl({name:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.afterCurrentEvent(function(){if(this.hasMod("visibility","visible")){var n=this._under;this.bindToDoc("leftclick",function(e){this.containsDomElem(t(e.target))||this._onOutClick(e)}).bindToDoc(e,function(t){27==t.keyCode&&this.hide()}),n&&n.is("iframe")&&this.hasMod(n,"type","paranja")&&this.bindToDomElem(t([n[0].contentWindow,n[0].contentWindow.document]),"leftclick",this._onOutClick)}}),this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("leftclick "+e).__base.apply(this,arguments)}}},_onOutClick:function(e){var n=t.Event("outside-click");this.trigger(n,{domEvent:e}),n.isDefaultPrevented()||this.hide()}})}(jQuery),BEM.HTML.decl("b-dropdowna",{onElem:{switcher:function(t){t.tag("span")}}}),BEM.HTML.decl("b-link",{onBlock:function(t){t.tag("a").attr("href",t.param("url"));for(var e,n=["title","target"];e=n.pop();)t.param(e)&&t.attr(e,t.param(e))}}),BEM.DOM.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick",function(t){this._onClick(t)})}}),BEM.HTML.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{onBlock:function(t){t.tag(t.param("url")?"a":"span"),t.wrapContent({elem:"inner"}),t.js(!0)},onElem:{inner:function(t){t.tag("span")}}}),BEM.DOM.decl("b-menu",{onElemSetMod:{trigger:{state:function(t,e,n){this.toggleMod(this.findElem(t.closest(this.buildSelector("layout-vert-cell")),"item-content").eq(0),"visibility","visible","opened"==n).trigger("trigger",{domElem:t,state:n})}},item:{state:{current:function(t){var e=this,n=e.__self.getName(),i=e.elem("item","state","current").filter(function(){return $(this).closest(e.buildSelector()).bem(n)===e});e.findElem(t.parents(e.buildSelector("item-content")).prev(e.buildSelector("item")),"trigger").each(function(){e.setMod($(this),"state","opened")}),e.delMod(i,"state").trigger("current",{prev:i,current:t})}}}},onTriggerClick:function(t){t.preventDefault(),this.toggleMod(t.data.domElem,"state","opened")},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.hasMod(e,"state","disabled")||this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("trigger","leftclick",function(t){this.onTriggerClick(t)}).liveBindTo("item-selector","leftclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl("b-keyboard-popup",{onSetMod:{js:function(){Lego.block["b-keyboard-popup"].call(this.domElem,this.params)}}}),function(t,e){e.block["b-keyboard-popup"]=function(n){var i=t('<div class="b-keyboard-popup__gap"/><div class="b-keyboard-popup"><div class="b-keyboard-popup__bar"><span class="b-keyboard-popup__bar-link b-keyboard-popup__close"><img class="b-icon" src="//yandex.st/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif">'+BEM.I18N("b-keyboard-popup","close")+"</span></div><div class=\"b-keyboard i-bem\" onclick=\"return {name: 'b-keyboard',fake: false,lang: '"+n.lang+"'"+(n["for"]?",'for': '"+n["for"]+"'":"")+'};"/></div>').appendTo("body"),o=i.filter(".b-keyboard-popup"),s=(i.filter(".b-keyboard-popup__gap"),function(t){return"undefined"==typeof t?o.data("isHidden"):void o.data("isHidden",t)}),r=function(){s()||(i.addClass("i-hidden"),t(window).trigger("keyboardClosed.lego"),s(!0))};t(document).bind("popupsClose.lego",function(e,n){s()||n&&n.source&&t.contains(o[0],n.source)||r()}),i.find(".b-keyboard-popup__close").click(function(){r();var t=e.block["b-keyboard"]._lastFocusedIn;t&&t.focus()})}}(jQuery,window.Lego),BEM.DOM.decl("b-form-button",{onSetMod:{js:function(){var t=this.isDisabled();(this._href=this.domElem.attr("href"))&&t&&this.domElem.removeAttr("href"),this.elem("input").attr("disabled",t)},focused:{yes:function(){var t=this;return t.isDisabled()?!1:(t.bindTo("keydown",this._onKeyDown).elem("input").is(":focus")||t.elem("input").focus(),void(t._unloadInited||(t._unloadInited=$(window).bind("unload",function(){t.delMod("focused")}))))},"":function(){this.unbindFrom("keydown").elem("input").blur()}},disabled:function(t,e){var n="yes"==e;this._href&&(n?this.domElem.removeAttr("href"):this.domElem.attr("href",this._href)),n&&this.domElem.keyup(),this.afterCurrentEvent(function(){this.domElem&&this.elem("input").attr("disabled",n)})},pressed:function(t,e){this.isDisabled()||this.trigger("yes"==e?"press":"release")},hovered:{"":function(){this.delMod("pressed")}},"*":function(t){return this.isDisabled()&&"hovered pressed".indexOf(t)>-1?!1:void 0}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_onKeyDown:function(t){var e=t.keyCode;13!=e&&32!=e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32==e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(t){this._onClick(t)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(e){var n=t[e.type];this.setMod(n.name,n.val||"")}).liveBindTo("mousedown",function(e){var n=t[e.type];1==e.which&&this.setMod(n.name,n.val||"")})}}),BEM.HTML.decl("b-form-button",{onBlock:function(t){t.tag(t.param("url")?"a":"span").attrs({href:t.param("url"),target:t.param("target")}).mods({size:t.mod("size"),theme:t.mod("theme")}).content([{elem:"left",tag:"i"},{elem:"content",tag:"span",content:{elem:"text",tag:"span",content:t.content()}}],!0).afterContent(t.param("type")?{elem:"input",attrs:{value:t.param("value")||"",type:t.param("type"),name:t.param("name"),disabled:t.mod("disabled")&&"disabled"}}:{elem:"click"}).js(!0)},onElem:{input:function(t){t.tag("input")},click:function(t){t.tag("i")}}}),BEM.DOM.decl("b-search",{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside("b-form-input"),this._bindHeatDNS(),this.input.hasMod("suggest","yes")&&(this.findBlockInside("suggest2").on("select",function(e,n){n.item.params.cgi&&n.item.params.cgi.forEach(function(e){e instanceof Array&&e.length>1&&BEM.DOM.append(t.domElem,BEM.HTML.build({block:"b-search",elem:"hidden",tag:"input",attrs:{type:"hidden",name:e[0],value:e[1]}}))})}),this.findBlockInside("b-popupa").on("outside-click",function(e,n){t.input.containsDomElem($(n.domEvent.target))&&e.preventDefault()}))}},_bindHeatDNS:function(){function t(){e.parent().append('<img src="//yandex.'+Lego.params["lang-zone"]+'/favicon.ico" style="position:absolute;top:0;left:0;width:0;height:0;" onLoad="this.parentNode.removeChild(this);" />')}var e=this.input.domElem;e.one("keyup change",t)}}),BEM.DOM.decl("b-search__input",{onSetMod:{js:function(){Lego.block["b-search__input"].call(this.domElem,this.params)}}}),function(t,e){e.block["b-search__input"]=function(e){var n=this,i=t.extend({focus:!1,shortcut:!1},e);if(i.focus||n.data("lego:focused")){if(!n.data("lego:focused")){var o=document.activeElement;o&&"input textarea".indexOf(o.tagName.toLowerCase())>-1||setTimeout(function(){if(n.focus(),n[0].createTextRange){var t=n[0].createTextRange(),e=n.val().length;t.collapse(),t.moveStart("character",e),t.moveEnd("character",e),t.select()}n.data("lego:focused",!0)},0)}window.history.length&&!t.trim(n.val())&&n.bind("keydown",function(e){return 8!=e.keyCode||t.trim(n.val())?void n.unbind("keydown",arguments.callee):window.history.back()}),n.blur(function(){n.data("lego:focused",!1)}).focus(function(){n.data("lego:focused",!0)})}i.shortcut&&t(document).keydown(function(e){e.ctrlKey&&!t(e.target).is("input, textarea")&&38==e.keyCode&&n.focus().select()})}}(jQuery,window.Lego),function(){var t,e,n=function(){for(var e,n=0;e=t[n++];)e.val(e.elem("input").val())},i=function(t){try{return t.activeElement}catch(e){}};BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){var o=this,s=o.elem("input"),r=i(o.__self.doc[0]),a=o.params.autoFocus&&!(r&&$(r).is("input, textarea"));o._val=s.val(),o._input0=s[0],(r===o._input0||a)&&(o._autoFocus=!0,o.setMod("focused","yes")._focused=!0,delete o._autoFocus),e||(t=[],e=o.channel("sys").on({tick:n,idle:function(){e.un("tick",n)},wakeup:function(){e.on("tick",n)}})),o._instanceIndex=t.push(o.bindTo(s,{focus:o._onFocus,blur:o._onBlur}))-1,o.params.shortcut&&o.bindToDoc("keydown",function(t){t.ctrlKey&&38==t.keyCode&&!$(t.target).is("input, textarea")&&o.setMod("focused","yes")})},disabled:function(t,e){this.elem("input").attr("disabled","yes"==e)},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var n="yes"==e;n?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(n?"focus":"blur")})}},onElemSetMod:{message:{visibility:function(t,e,n){var i=this,o=i.getMod(t,"type");if(o){var s=!0;n||i.elem("message","type",o).each(function(){this!=t[0]&&i.hasMod($(this),"visibility","visible")&&(s=!1)}),s&&i.toggleMod("message-"+o,"yes","","visible"===n)}}}},val:function(t,e){if("undefined"==typeof t)return this._val;if(this._val!=t){var n=this.elem("input");n.val()!=t&&n.val(t),this._val=t,this.trigger("change",e)}return this},getSelectionEnd:function(){var t=this.elem("input")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()==t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?i:-o.moveEnd("character",-i)}}return e},name:function(){return this.elem("input").attr("name")},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){var t=this;return i(document)===t._input0?(t._focused=!1,t):t._preventBlur?(setTimeout(function(){t._focus()},0),t):(t._focused=!1,t.delMod("focused"))},_focus:function(){var t=this.elem("input")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},_blur:function(){this.elem("input").blur(),this._focused=!1},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),t.splice(this._instanceIndex,1);for(var e,n=this._instanceIndex;e=t[n++];)--e._instanceIndex}}),BEM.HTML.decl("b-form-input",{onBlock:function(t){var e=t.param("id")||t.generateId();t.tag("span").tParam("id",e).tParam("has-clear","yes"===t.mod("has-clear")).tParam("type",t.mod("type")||"input").afterContent({elem:"box",tag:"span",content:{elem:"input",attrs:{value:t.param("value"),name:t.param("name"),id:e}}}).js(!0)},onElem:{input:function(t){t.tag(t.tParam("type"))},label:function(t){t.tag("label").attr("for",t.tParam("id"))},box:function(t){t.tParam("has-clear")&&t.afterContent({elem:"clear",tag:"span"})},hint:function(t){t.tag("label").attr("for",t.tParam("id"))}}})}(),function(){var t,e=0,n=!1,i=0,o=BEM.channel("sys"),s=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){i=0,n&&(n=!1,o.trigger("wakeup"))}),this._tick()},_tick:function(){var r=this;o.trigger("tick",{counter:e++}),!n&&(i+=s)>3e3&&(n=!0,o.trigger("idle")),t=setTimeout(function(){r._tick()},s)}}).start()}(),BEM.DOM.decl({name:"b-form-input",modName:"type",modVal:"autofocus"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this;$(window).bind("keyboardOpened.lego",function(){t.setMod("focused","yes")._focused=!0})}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(t,e,n,i){$.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i))},_get:function(e,n,i,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,r.data[s])},this):this._do(e,n,i,o)},_do:function(){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});
o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(n,e);o.data[s]=i,o.keys.push(s)},dropCache:function(){delete t[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:i.data?$.extend({},i.data,t):t},a=o._wrapCallback(function(n,s,r){o._onSuccess(o._buildCacheKey(t,i),t,n[0],i),o._allowCallback(s,r)&&e.apply(i.callbackCtx,n)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-->0?setTimeout(function(){o._do.apply(o,s)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(i.paramsToSettings||[]),function(t,e){r[e]=i[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber==t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),BEM.DOM.decl({name:"b-form-input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var t=BEM.BROWSER.compatibility.correctKeyEvents?"keydown":"keypress";this.__base(),this.buildAhead(),this._input=this.elem("input")[0],this._intent=!1,this._text=this.val(),this._preventAhead=!1,this._lastBackspace=0,this._filler="",this._hint="",this.on("change",this._onTextChange).bindTo("mousedown",function(t){if(!this._preventAhead&&t.target===this._input){var e=t.pageX-this.domElem.offset().left-parseInt(this._ahead.css("padding-left"),10),n=this.elem("ahead-filler").width(),i=n+this.elem("ahead-hintholder").width();if(e>n&&i>e){this.trigger("ahead-click");var o=this;setTimeout(function(){o._fill({usage:"mouse"})},0)}}}),this.bindTo("input",t,this._onKeyDown)}},_onKeyDown:function(t){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),t.keyCode){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:!this._isPopupShown||t.ctrlKey||t.altKey||(t.preventDefault(),this._fill({usage:"tab"}));break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&t.preventDefault();break;case 38:case 40:this._clearAhead()}},setAhead:function(t,e,n){return this._preventAhead?!1:n.items&&t===n.items[0]||n.val!==this.val()?this._clearAhead():(this.elem("ahead-hintholder").text(e),void(this._intent=this._showAhead(t,t+e)))},unsetAhead:function(){this._clearAhead(),this._intent=!1},_onTextChange:function(){var t=this._text.length-(this._text=this.val()).length;t>0&&this.shiftAhead(t),this._intent&&!this._intent.match("^"+BEM.blocks["i-common__string"].escapeRegExp(this.val()))&&this._clearAhead()},onPopupShow:function(){this._isPopupShown=!0},onPopupHide:function(){this._isPopupShown=!1,this._preventAhead=!0,this._clearAhead()},_fill:function(t){var e=$.extend(t,{chars:this._intent.length-this._text.length});if("string"==typeof this._intent&&e.chars>0){try{var n=document.createEvent("TextEvent");n.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._text.length,this._input.dispatchEvent(n)}catch(i){if(this.val(this._intent),this._input.createTextRange){var o=this._input.createTextRange();o.moveEnd("character",this._text.length),o.collapse(!1),o.select()}}this.trigger("ahead-fill",e)}return e.chars>0},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},buildAhead:function(){return this._ahead=$(BEM.HTML.build({block:"b-form-input",elem:"ahead"})),BEM.DOM.init(this._ahead.insertBefore(this.elem("input"))),this},_setAhead:function(t,e){return this.elem("ahead-filler").text((this._filler=t)||""),this.elem("ahead-hint").val(!this._preventAhead&&(this._hint=e)||""),e},_showAhead:function(t,e){return"undefined"==typeof t&&this._clearAhead(),this._setAhead(t,e)},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(t){this.elem("ahead-filler").text((this._filler=this._filler.slice(0,-t))||"")}}),BEM.HTML.decl("b-form-input",{onElem:{ahead:function(t){t.mix([{block:"b-form-input",elem:"input"}]).content([{elem:"ahead-filler"},{elem:"ahead-hint"},{elem:"ahead-hintholder"}])},"ahead-filler":function(t){t.tag("span")},"ahead-hint":function(t){t.mix([{block:"b-form-input",elem:"input"}]).tag("input").attrs({disabled:!0})},"ahead-hintholder":function(t){t.tag("span")}}}),BEM.decl({name:"b-form-input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="…";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var n,i=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",c=~t.indexOf(a),u=function(){for(var e,n=/\&#\d+;/gi;e=n.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(c)return t;for(;~t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!c&&u(),s.forEach(function(e){n=o>e[0]?o:e[0],i.push({tag:"span",elem:"span",content:l(t.slice(o,n))}),i.push({tag:"em",elem:"em",content:l(t.slice(n,o=e[1]))})},this),i.push({tag:"span",elem:"span",content:l(t.slice(o))}),i}}),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(){}},{live:function(){this.liveBindTo("mouseover mouseout mousedown mouseup",function(t){this.trigger(t.type)})}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),n=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",t.param("pers")?"yes":!1).content(BEM.blocks["i-common__string"].highlight(n,t.param("hl"))).js(!0)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"hl"},{onBlock:function(t){t.content($.map(t.param("data").slice(1),function(t){return $.isArray(t)?{tag:"span",elem:"highlight",content:t[0]}:t}))}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"fact"},{onBlock:function(t){var e=t.param("data").slice(1);t.content([{tag:"span",elem:"text",content:BEM.blocks["i-common__string"].highlight(e[0],t.param("hl"))},{tag:"span",elem:"fact",content:[" — ",BEM.blocks["i-common__string"].escapeHTML(e[1])]}])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"nav",modVal:"yes"},{enter:function(){return!1},select:function(t){return t&&$('<form style="display:none" action="'+this.val()+'" target="_blank"/>').appendTo("body").submit().remove(),{needEvent:!0}}},{getUrl:function(t){return(t.match(/^\w[\w-]*:\/\//g)?"":"http://")+t}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onSetMod:{js:function(){this.setMod("nav","yes")}},enter:function(){return this.__base.apply(this,arguments)},select:function(){return this.__base.apply(this,arguments)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onBlock:function(t){var e=t.param("data"),n=4==t.param("suggestVersion"),i=e[4]||e[3],o=(i.match(/^\w[\w-]*:\/\//g)?"":"http://")+i;t.js({val:o}).content({elem:"link",url:o,title:BEM.blocks["i-common__string"].escapeHTML(n?e[3]:e[2]),description:BEM.blocks["i-common__string"].highlight(n?e[2]:e[1],t.param("hl"))})},onElem:{link:function(t){t.tag("a").attrs({href:t.param("url"),target:"_blank"}).content([{elem:"link-url",tag:"span",content:t.param("title")},{elem:"link-info",tag:"span",content:["&nbsp;&mdash; "].concat(t.param("description"))}])}}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nah"},{onBlock:function(t){t.content(t.param("data")[1])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"href"},{url:function(){return this.findBlockInside("b-link").domElem.attr("href")},enter:function(){return!1},select:function(t){return t&&(location.href=this.url()),!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"href"},{onBlock:function(t){var e=t.param("data").slice(1);t.content({block:"b-link",content:e[0],url:e[1]})}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"weather"},{onBlock:function(t){var e=t.param("data").slice(1),n=BEM.blocks["i-common__string"].escapeHTML;t.content([{tag:"span",elem:"text",content:n(e[0])},{tag:"i",elem:"icon",mods:{weather:e[2].replace("-","minus-").replace("+","plus-").replace(/_/g,"-")}},{tag:"span",elem:"value",content:n(e[1].replace("-","&ndash;"))}])}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"traffic"},{onBlock:function(t){var e=t.param("data").slice(1),n=BEM.blocks["i-common__string"].escapeHTML;t.content([{tag:"span",elem:"text",content:n(e[0])},{tag:"i",elem:"icon",mods:{traffic:e[2]}},{tag:"span",elem:"value",content:n(e[1])}])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{onBlock:function(t){t.mod("enterable","no").content($.map(t.param("data").slice(1),function(t){return $.isArray(t)?{tag:"span",elem:"foot",content:t[0]}:t}))}}),BEM.HTML.decl("b-autocomplete-item",{onElem:{nav:function(t){var e=BEM.blocks["b-autocomplete-item"].getUrl;t.tag("a").attrs({href:e(t.param("url")),target:"_blank"}).content(t.content)}}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"icon"},{onBlock:function(t){var e=t.param("data").slice(1),n=e[0]||"",i=e[1]||{},o=BEM.blocks["i-common__string"].escapeHTML,s=BEM.blocks["b-autocomplete-item"].getUrl;if(i.icon){var r={};Array.isArray(i.icon[0])?i.icon.forEach(function(t){r[t[0]]=t[1]}):r[i.icon[0]]=i.icon[1];var a=r.svg?"background-image:none,url("+r.svg+")":"",c=r.png?"background-image:url("+r.png+");":"",u=[{tag:"span",elem:"text",content:o(n)},{tag:"i",elem:"icon",attrs:{style:c+a}},{tag:"span",elem:"value",content:i.fact&&o(i.fact.replace("-","&ndash;"))}];i.url?t.mod("nav","yes").js({val:s(i.url)}).content({block:"b-autocomplete-item",elem:"nav",url:i.url,content:u}):t.content(u)}}}),function(t){var e=t.documentElement,n="className";e[n]+=" i-ua_js_yes "+("CSS1Compat"!==t.compatMode?"i-ua_css_quirks":"i-ua_css_standart")}(document),BEM.DOM.decl("personal",{onSetMod:{js:function(){var t=this,e=t.params,n=e.stat,i=e.retpath,o=e.authUrl,s=function(t){return'<a class="personal__mail" href="https://mail.yandex.ru" '+t.mailstat+">Почта</a>&nbsp;"+(t.count?"("+t.count+")":"")+'&nbsp;&nbsp;<a class="user personal__name" href="https://passport.yandex.ru/passport?mode=passport" '+t.userstat+"><span>"+t.username.charAt(0)+"</span>"+t.username.slice(1)+'</a>&nbsp;&nbsp;&nbsp;<a class="exit personal__exit" href="https://passport.yandex.ru/passport?mode=logout&amp;yu='+t.yu+"&amp;retpath="+t.retpath+'" '+t.exitstat+">Выход</a>"};window.userInfo=function(e){if(e.Mail&&e.AuthInfo&&e.AuthInfo.logged&&e.yu){var o={username:cleverSubstring(htmlFilter(e.AuthInfo.display_name),20,3),count:e.Mail.count,yu:e.yu,userstat:n?" onmousedown=\"cp('wwwyaru.login.username.clck', this)\"":" ",mailstat:n?" onmousedown=\"cp('wwwyaru.login.mail.clck', this)\"":" ",exitstat:n?" onmousedown=\"cp('wwwyaru.login.exit.clck', this)\"":" ",retpath:i};t.domElem.html(s(o)),n&&(cp("wwwyaru.login.username.show"),cp("wwwyaru.login.mail.show"),cp("wwwyaru.login.exit.show"))}else n&&cp("wwwyaru.logout.show");n&&t.domElem.addClass("personal_stat")},$.ajax({url:o,dataType:"jsonp",jsonp:"cb",jsonpCallback:"userInfo"})}}}),BEM.decl("i-statface",{onSetMod:{js:function(){this._data={},this._needSend=!1,this.hasMod("send","manual")||$(window).unload(this.changeThis(this.send))}},set:function(t,e){this._needSend=!0;var n=this._data;return"object"==typeof t?$.each(t,function(t,e){n[t]=e}):n[t]=e,this},reset:function(){var t=this;return arguments[0]?$.each(arguments,function(e,n){delete t._data[n]}):this._data={},$.isEmptyObject(this._data)&&(this._needSend=!1),this},serialize:function(){var t=this;return $.map(t.params.keys,function(e){return t._data[e]}).join(".")+(t.params.customKeys?$.map(t.params.customKeys,function(e){var n=t._data[e];return"/"+e+"="+(void 0==n?"":n)}).join(""):"")},send:function(t){if(this._needSend){var e=this.params,n=["//",e.host,"/",e.path,"/dtype=stred","/pid=",e.pid,"/cid=",e.cid,"/path=",this.serialize(),"/*data=",encodeURIComponent("url="+encodeURIComponent(e.url))].join("");"click"==e.path?document.createElement("IMG").src=n:$.ajax({type:"GET",url:n,data:null,complete:t||$.noop,dataType:"script",timeout:500}),this._needSend=!1}return this},getDefaultParams:function(){return{host:"clck.yandex.ru",path:"jclck",url:location.href}}}),window.ya=window.ya||{},ya.history=window.history&&history.pushState?function(){return{navigate:function(t){t=t||{},t.url&&(t.title||(t.title=""),t.data||(t.data=""),t.replace?history.replaceState(t.data,t.title,t.url):history.pushState(t.data,t.title,t.url))},onchange:function(t){$(window).on("popstate",function(e){t.call(this,e.originalEvent)})}}}():null,BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this._lastSubmitTime=0,this._clear()}}},getDefaultParams:function(){return{updateOnEnterByKeyboard:!0,onFocus:"request"}},init:function(){var t=this;t.params.form.on("submit",function(){this._lastSubmitTime=(new Date).getTime(),t._popup.hide()},this),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems},this),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t.bindEvents()},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(){return BEM.create({block:"suggest2-view",mods:{theme:this.getMod("theme")||"normal"}})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.bindEvents():void 0},getCounter:function(){return this._counter},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur},t),t._popup.on({preshow:function(){this.trigger("preshow")},show:function(){this.trigger("show")},hide:function(t,e){this.trigger("hide",e)}},this),t.params.button&&t.params.button.bindTo("mousedown",function(){t._input.realVal(t._input.val()),t._popup.hide()}),t},setItems:function(t,e){var n=this;return n._isFormSubmitDurinQuery()||!e.data.items.length?(n._popup.hide(),n._clear()):n._input.val()!==e.val?n._clear():(n._text=e.val,n._pos=e.pos,n._meta=e.data.meta||{},n._popup.show(n._view.html(e.data.items,n._meta)).width(n.getPopupWidth()),n._items=n.findBlocksInside("suggest2-item"),n._clearItems().trigger("update",{val:n._text,pos:n._pos,items:n._items}),n)},getItems:function(){return this._items||[]},getPopupWidth:function(){},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime&&this._model.isTimeInRequestInterval(this._lastSubmitTime)?(this._lastSubmitTime=0,!0):!1},_onChange:function(t,e){this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),e)},_onFocus:function(){this._isBlur&&this.params.onFocus&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._onChange())},_onBlur:function(){this._isBlur?(this._clear(),this._popup.hide()):this._isMouseDown&&this._input.get().setMod("focused","yes")},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var n=this,i=n._getItemIndex(t);return n._text=n._input.realVal(t.onSelect(e).val()),n._isBlur=!0,n._items=[],n.trigger("select",{val:n._text,pos:n._pos,item:t,meta:n._meta,itemIndex:i,byKeyboard:e}),i},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e){t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,n=t.which;!this._popup.isShown()||n!==e.up&&n!==e.down||(t.preventDefault(),this._enterByKeyboard(n))},_onKeyUp:function(t){var e=this.__self.keyboard;(t.which===e.left||t.which===e.right)&&(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition()))},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,n=this._items.length,i=this._enterItemIndex+e;return-1===i||i===n?(this._enterItemIndex=i,this._unselectItems(this._items[i]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>i?i=n-1:i>=n&&(i=0),void this._onEnterItem(this._items[i],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40}}),BEM.decl("suggest2",{bindEvents:function(){function t(){e._popup&&e._popup.isShown()&&e._popup.hide()}var e=this;e.__base.apply(e,arguments),e._input.bindEvents({click:function(){!e._popup.isShown()&&e._tabChange&&(e._tabChange=!1,e._onChange())}}),BEM.blocks["suggest2-item"].on(e.domElem,{mousedown:function(){e.bindToDoc("mouseup.suggest2",function(){e._isBlur=!0,e._isMouseDown=!1,e.unbindFromDoc("mouseup.suggest2")})}});var n=!0;$(window).on("focus",function(){var i;try{i=document.activeElement}catch(o){}n||(n=!0,i&&e._input.getControl()&&e._input.getControl().is(i)&&(e._tabChange=!0),t())}).on("blur",function(){n=!1,t()})},_onChange:function(){return this._tabChange=!1,this.__base.apply(this,arguments)},_onFocus:function(){this._tabChange||this.__base.apply(this,arguments)}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){return this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},conditions:[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}],request:function(t,e,n){if(this._isNeedRequest(n)){var i={val:t,requestTime:(new Date).getTime()};return this.trigger("request",{val:t,pos:e}),this.getProvider().get(t,e,function(t,e,n){i.responseTime=(new Date).getTime(),this._requests.push(i),this._onResponse(t,e,n)}.bind(this)),this}},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},_isNeedRequest:function(t){return t?!this.conditions.some(function(e){return Object.keys(e).every(function(n){return e[n]===t[n]})}):!0},_onResponse:function(t,e,n){this.trigger("response",{val:t,pos:e,data:n})}}),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},get:function(t,e,n){$.ajax(this._extendParamsData({part:t,pos:e})).done(function(i){n.call(this,t,e,{orig:i[0],items:i[1],meta:i[2]})}).error(function(){n.call(this,t,e,{items:[]})})},_extendParamsData:function(t){return this.params.data=$.extend(this.params.data||{},t),this.params}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",mods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),n=this.__self._getType(t,e),i="html"===n?{}:{type:n};return this._getItemByType(t,e,n,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:i,js:{},props:{},content:[]})},_getItemByType:function(t,e,n,i){var o=i.text,s=i.mods,r=i.js,a=i.props,c=i.content;if(e.pers&&(s.personal="yes"),"text"===n)c.push(o);else if("fact"===n)c.push(o,{elem:"bullet"},{elem:"fact",content:t[2]});else if("weather"===n)c.push(o,{elem:"icon",mods:{weather:t[3].replace("-","minus-").replace("+","plus-").replace(/_/g,"-")}},{elem:"fact",content:t[2]});else if("traffic"===n)c.push(o,{elem:"icon",mods:{traffic:t[3]}},{elem:"fact",content:t[2]});else if("nav"===n)s.interact="link",a.url=this.__self._resolveUrl(t[4]),c.push({elem:"text",content:t[3]},{elem:"fact",content:t[2]});else if("icon"===n){var u={};e.icon.forEach(function(t,e,n){Array.isArray(t)?u[t[0]]=t[1]:0===e&&(u[t]=n[e+1])}),c.push(o,$.extend({elem:"icon",mods:{type:"favicon"}},u)),e.fact&&c.push({elem:"fact",content:e.fact})}else"html"===n&&c.push(e.body);return("icon"===n||"html"===n)&&e.url&&(s.interact="link",a.url=this.__self._resolveUrl(e.url)),$.extend({block:"suggest2-item",mods:s,js:r,content:c},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var n=Array.isArray(t)?t[0]||"text":"text";return"icon"!==n||e.icon?n:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var n,i=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),o=[],s=0;return i.length?(i.forEach(function(e){n=s>e[0]?s:e[0],o.push(t.slice(s,n)),o.push({elem:"highlight",content:t.slice(n,s=e[1])})},this),o.push(t.slice(s)),o.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this.bindSuggestEvents()}}},show:function(t){return t&&this._popup.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._popup.show(this.params.owner),this.trigger("show"),this)},hide:function(t){return this._popup&&(this._popup.hide(),this.trigger("hide",t||{})),this},setContent:function(t){return this._popup.setContent(t),this},isShown:function(){return this._popup?this._popup.isShown():!1},getOwnerPos:function(){return this._popup.getOwnerPos()||{}},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.width():(this._popup.domElem.width(t),this)},destruct:function(){return this._popup?this._popup.destruct():void 0},bindSuggestEvents:function(){return this.params.suggest.on({select:function(t,e){this.hide(e)},update:function(t,e){e.items.length||this.hide({response:"empty"})}},this),this}}),BEM.decl("suggest2-popup",{setMaxWidth:function(t){return this._popup.domElem.css("max-width",t),this},pos:function(){return this._popup.pos(),this}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,n){t.trigger("change",n)},clear:$.throttle(function(e,n){t.trigger("clear",n)},300)},t),t.bindSuggestEvents()}}},get:function(){return this._input},getControl:function(){return this._input.elem("control")},val:function(){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],n=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),t.text.length):e.selectionStart||0===e.selectionStart?e.selectionStart:n},disableBrowserAutocomplete:function(){var t=this._input.hasMod("focused");t&&this._input.delMod("focused"),this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"}),t&&this._input.setMod("focused","yes")},bindEvents:function(t,e){return Object.keys(t).forEach(function(n){this._eventsFilter(n).on(n,t[n].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({select:this._changeValueByEvent,out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:this._changeValueByEvent,enter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&this._changeValueByEvent(t,e)}},this),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){this.val(e&&e.val||this.realVal(),$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents({keydown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}},this)}}}}),BEM.decl("suggest2-input",{getControl:function(){return this._input.elem("input")},left:function(){return this.getControl().offset().left}}),BEM.DOM.decl("suggest2-item",{val:function(){var t=this.elem("text");return(t.length?t:this.domElem).text()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.val(),byKeyboard:t})},onLeave:function(){return this.delMod("selected")},onSelect:function(t){return this.triggerEvent("select",{val:this.val(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)})}}),function(){"use strict";var t=15,e=396;BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"yaru"},{init:function(){this.__base.apply(this,arguments),this.bindToDomElem($(window),"resize",this._updateMaxWidth),this._updateMaxWidth()},_updateMaxWidth:function(){var n=$(window).width(),i=this._input.left(),o=Math.max(e,n-i-t);this._popup.setMaxWidth(o).pos()}})}(),BEM.DOM.decl({block:"suggest2",modName:"ahead",modVal:"yes"},{init:function(){var t=this.__base.apply(this,arguments),e=this;return e._model.on("response",function(t,n){var i=n.data,o=i.items&&i.items[0],s=e._input.val(),r="object"==typeof o?o[1]:o,a="string"==typeof r&&r.match("^"+BEM.blocks["i-common__string"].escapeRegExp(s.toLowerCase())+"(.*)$");i.val=n.val,e.params.aheadFromServer?e._input.get().setAhead(s,i.meta&&i.meta["continue"]||"",i):a&&s.length>=e.params.showOverChars?e._input.get().setAhead(s,e.params.showFullPhrase?a[1]:a[1].split(" ")[0],{val:n.val}):e._input.get().unsetAhead()}),e._input.on("change",function(){e._input.get().unsetAhead()}),e._input.get().onPopupShow&&e._popup.on("show",function(){e._input.get().onPopupShow()}),e._popup.on("hide",function(){e._input.get().onPopupHide()}),t},getDefaultParams:function(){return $.extend(this.__base(),{aheadFromServer:!1,showOverChars:3,showFullPhrase:!1})}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},getOwner:function(){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t})},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,n=e.params;return n.input=t.input,n.button=t.button,n.form=this,n["suggest2-popup"]=BEM.create("suggest2-popup",{suggest:e,popup:e.findBlockOn(this.params.popupName),owner:this.getOwner(t)||n.input}),n["suggest2-input"]=BEM.create("suggest2-input",{suggest:e,input:n.input,updateOnEnterByKeyboard:n.updateOnEnterByKeyboard}),t.counter&&(t.counter.params.suggest=e,t.counter.params.form=this,n.counter=t.counter),this.bindFormEvents(t),t},this)},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click",function(t){e.trigger("button-click",t)}),e.bindTo("submit",function(t,n){e.onSubmit(t,n)}),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(n,i){var o=$(i),s=t.findBlockInside(o,"suggest2"),r={input:t.findElem(o,"input"),button:t.findElem(o,"button")};e.push({node:o,suggest:s,counter:t.findBlockOn("suggest2-counter"),input:t.findBlockOn(r.input,t.params.inputName),button:t.findBlockOn(r.button,t.params.buttonName),popup:s.findBlockOn(t.params.popupName)})}),e}}),BEM.decl("suggest2-form",{getOwner:function(t){return t.suggest.params.input.domElem}}),BEM.DOM.decl("suggest2-counter",{onSetMod:{js:{inited:function(){this.clear()}}},getDefaultParams:function(){return{submitBySelect:!1,preventSubmit:!0,host:"//yandex.ru",path:"clck/jclck",dataUrl:"http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){var t=this;return t._params={user_input:"",text:""},t._times=[],t._path={service:t.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},t._ratio={len:0,queryLen:0,actionsCount:0},t._firstChange=0,t._lastChange=0,t._sinceChange={first:0,last:0},t._selectedText="",t._session=0,t._meta={},t},submit:function(t){var e=this,n=e.params.suggest.params["suggest2-input"];e._params.text=n.val(),e._params.pos=n.getCaretPosition(),e._selectedText&&e._selectedText!==e._params.text&&(e._path.state="edit"),e.sendAjax(e.getUrl(),$.extend({submitForm:!0},t)),this.trigger("submit",this._getSubmitEventData()).clear()},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._times,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this.params.timeout,cache:!0}).always(function(){this.params.preventSubmit&&e.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1})}.bind(this)),this
},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,n){return e.concat(t._getParams(n))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession()]},bindEvents:function(){var t,e=this,n=e.params,i=n.suggest;return n.form.on("button-click",function(){"keyboard"!==e._path.submit&&(e._path.submit="button_by_mouse")}),n.form.on("submit",function(t,i){i.data.block!==e.__self.getName()&&i.data.prevent!==!1&&(n.preventSubmit&&i.preventDefault(),e.submit())}),i.getModel().on({request:function(){t=new Date},response:function(n,i){e._path.personal=e._hasPersonal(i.data.items)?"nah_not_used":"nah_not_shown",e._meta=i.data.meta||{},e._addTime(new Date-t),e._setMetaProps(i)}}),i.params["suggest2-input"].on({change:function(t,n){n&&"clear"!==n.source||(e._params.user_input=t.block.val(),e[e._firstChange?"_lastChange":"_firstChange"]=new Date),e._ratio.actionsCount++},enter:function(){e._path.submit="keyboard"}}),i.params["suggest2-popup"].on({show:function(){e._path.state="not_used"},hide:function(t,n){"empty"===n.response&&(e._path.state="not_shown")}}),BEM.blocks["suggest2-item"].on(i.domElem,{enter:function(t,n){n.byKeyboard&&e.params.suggest.params.updateOnEnterByKeyboard&&(e._selectedText=n.val,e._path.state="suggest")}}),i.on({select:function(t,i){e._path.state=i.byKeyboard?"keyboard":"mouse",e._path.index=i.itemIndex+1,e._selectedText=i.val,i.item.hasMod("personal")&&(e._path.personal="nah_used"),n.submitBySelect&&(e._path.submit=i.byKeyboard?"keyboard":"click_by_mouse",e._params.pos=i.pos,e._params.text=e._selectedText,e.submit({submitForm:!i.item.hasMod("interact","link")}))}},e),e},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,n){return""===t[n]?e:(e.push(n+"="+encodeURIComponent(t[n]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){return{since_first_change:this._getSinceTime("first"),since_last_change:this._getSinceTime("last")}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addTime:function(t){return this._times.push(t),this._params.times=this._times.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}}),function(){"use strict";BEM.DOM.decl("suggest2-counter",{submit:function(t){var e=this,n=e.params.suggest.params["suggest2-input"],i=Lego.params.statRoot;e._params.text=n.val(),e._params.pos=n.getCaretPosition(),e._selectedText&&e._selectedText!==e._params.text&&(e._path.state="edit"),i&&"button_by_mouse"===e._path.submit&&cp(i+".searchbutton"),e.sendAjax(e.getUrl(),$.extend({submitForm:!0},t)),this.trigger("submit",this._getSubmitEventData()).clear()}})}(),BEM.decl("suggest2-url",{},{parse:function(t){var e,n=document.createElement("a");return n.href=t,e=n.search.substr(1),{protocol:n.protocol,hostname:n.hostname,port:n.port,pathname:n.pathname,query:e,params:this.queryParse(e),hash:n.hash}}}),BEM.decl({block:"suggest2-url",modName:"part",modVal:"query"},{},{queryParse:function(t){return t?t.split("&").reduce(function(t,e){if(!e)return t;var n,i,o=e.indexOf("=");return o>=0?(n=e.substr(0,o),i=e.substr(o+1)):(n=e,i=""),n=this.decodeURIComponent(n),i=this.decodeURIComponent(i),Object.prototype.hasOwnProperty.call(t,n)?Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i,t}.bind(this),{}):{}},queryStringify:function(t){return Object.keys(t).reduce(function(e,n){var i=t[n];return Array.isArray(i)?i.forEach(function(t){this._addParam(e,n,t)}.bind(this)):this._addParam(e,n,i),e}.bind(this),[]).join("&")},_addParam:function(t,e,n){t.push(encodeURIComponent(e)+"="+(null==n?"":encodeURIComponent(n)))}}),BEM.decl({block:"suggest2-url",modName:"part",modVal:"uri"},{},{decodeURI:function(t){return this._decode(decodeURI,t)},decodeURIComponent:function(t){return this._decode(decodeURIComponent,t)},_convert:function(t){return t.replace(/%.{2}/g,function(t){return this._map[t]}.bind(this))},_decode:function(t,e){var n="";try{n=t(e)}catch(i){n=t(this._convert(e))}return n},_map:{"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{onSelect:function(t){return t&&this.submit(this.elem("link").attr("href")),this.__base.apply(this,arguments)},submit:function(t){var e=BEM.blocks["suggest2-url"].prototype.__self.parse(t).params,n=Object.keys(e).reduce(function(t,n){return t.push(BEMHTML.apply({tag:"input",attrs:{type:"hidden",name:n,value:e[n]}})),t},[]),i=BEMHTML.apply({tag:"form",attrs:{style:"display:none",action:t,target:"_blank"},content:n});$(i).appendTo(BEM.DOM.scope).submit().remove()}}),function(t,e){function n(){f&&p&&console.log.apply(console,arguments)}function i(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?u+t.elem:"")+(t.modName?c+t.modName+c+t.modVal:"")}function o(t){var e={};return t.split(u).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(c).forEach(function(t,n){e[i[n]]=t})}),e}function s(t){return t?d.push(t):!1}function r(){return d.length&&d.pop()}function a(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var c="_",u="__",l="ru",h={},d=[],f=!1,p="undefined"!=typeof console&&"function"==typeof console.log;a.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&s(this._keyset),this._keyset=i(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=o(this._keyset),n="i-tanker"===e.block?"tanker":this._prj,i=e.elem||this._keyset,s=this._key;n=i18n[n]||(i18n[n]={}),i=n[i]||(n[i]={}),i[s]="function"==typeof t?t:function(){return t};var r=h[this._lang]||(h[this._lang]={}),a=r[this._keyset]||(r[this._keyset]={});a[s]=t},val:function(t,e){var i=h[this._lang]&&h[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!i)return n("[I18N_NO_KEYSET] %s",o),"";i=i[this._key];var s=typeof i;return"undefined"===s?(n("[I18N_NO_VALUE] %s",o),""):"string"===s?i:(e||(e=this),i.call(e,t))},_cache:function(){return h}},e.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,o,s=this._proto;return s.lang(this._lang).key(t),i=s.val.call(s,n,e),o=r(),o&&s.keyset(o,!1),i},e.decl=function(t,e,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(t);for(i in e)e.hasOwnProperty(i)&&o.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){f=!!t},e.lang(l),e}(new a)}(this,"undefined"==typeof BEM?{}:BEM),BEM.I18N.decl("b-form-input",{search:"Поиск","search-label":"поиск",vid:"Видео"},{lang:"ru"}),BEM.I18N.decl("b-keyboard-loader",{keyboard:"Клавиатура"},{lang:"ru"}),BEM.I18N.decl("b-keyboard-popup",{close:"закрыть"},{lang:"ru"}),BEM.I18N.decl("b-search",{"advanced-search":"расширенный поиск","button-value":"Найти","for-example":"Например",label:"поиск"},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appsearch:"Приложения",auto:"Авто",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",collection:"Коллекция",company:"Компания",contest:"Contest",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",ege:"ЕГЭ",expert:"Эксперт",feedback:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",metrika:"Метрика",metro:"Метро",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Перевод",probki:"Пробки",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toster:"Тосты",translate:"Перевод",tune:"Настройки",tv:"Телепрограмма",uslugi:"Услуги",video:"Видео","video-com":"Видео",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"Факты",group:"Группа подсказок",nah:"Вы искали",nav:"Сайт",text:"Поиск",traffic:"Пробки",weather:"Погода"},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":"Быстрый ответ"},{lang:"ru"}),BEM.I18N.lang("ru");var BEMHTML=function(){var t,e=function(e){function n(){var t=this,e=this._mode;if("content"===e){var e=this.block;if("suggest2-item"===e)return"fact"===this.elem&&!(this.mods&&"nav"===this.mods.type)==!1?"&nbsp;&mdash;&nbsp;"+this.ctx.content:i.call(this);if("i-ua"===e){if(!(782906025!==this.__$anflg)==!1){if(!!this.elem==!1){var o,r,v=(o=this.__$anflg,this.__$anflg=782906025,r=n.call(t),this.__$anflg=o,r);return v+=[";(function(d,e,c,r,n,w,v,f){","e=d.documentElement;",'c="className";','r="replace";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}return s.call(this)}return s.call(this)}return a.call(this)}if("attrs"===e){if("suggest2-item"===this.block){var e=this.elem;return"link"===e?{href:this.ctx.url,target:"_blank"}:"icon"===e?!this.ctx.png==!1&&!this.ctx.svg==!1?{style:'background-image:url("'+this.ctx.png+'");background-image:none,url("'+this.ctx.svg+'")'}:l.call(this):h.call(this)}return h.call(this)}if("bem"===e){var e=this.block;return"suggest2-item"===e?"highlight"===this.elem?!1:d.call(this):"i-ua"===e&&!!this.elem==!1?!1:d.call(this)}if("js"===e){var e=this.block;return("suggest2-item"===e||"suggest2"===e)&&!!this.elem==!1?!0:f.call(this)}if("tag"===e){var e=this.block;if("suggest2-item"===e){var e=this.elem;return"bullet"===e||"a11y"===e?"span":"link"===e?"a":"icon"===e?"span":"highlight"===e?"b":"fact"===e||"text"===e?"span":!!this.elem==!1?"li":u.call(this)}if("suggest2"===e){var e=this.elem;return"content"===e?!(this.mods&&"normal"===this.mods.theme)==!1?"ul":u.call(this):"items"===e?"ul":u.call(this)}return"i-ua"===e&&!!this.elem==!1?"script":u.call(this)}if("js-params"===e)return"b-page"===this.block&&!!this.elem==!1?_.call(this):b.call(this);if("public-params"===e)return"i-global"===this.block&&!this.elem==!1?{id:1,lang:1,tld:1,"content-region":1,"user-region":1,login:1,displayName:1,index:1,yandexuid:1,"passport-host":1,"pass-host":1,"passport-msg":1,"static-host":1,"lego-static-host":1,"social-host":1,clck:1,"click-host":1,"export-host":1,"i-host":1,"social-retpath":1,"lego-path":1,sid:1,retpath:1,uid:1}[this.elem]||!1:b.call(this);if("env"===e)return"i-global"===this.block&&!!this.elem==!1?{}:b.call(this);if(""===e)return!!this["i-global"]==!1?g.call(this):b.call(this);if("jsAttr"===e)return void 0;if("mix"===e)return"suggest2-item"===this.block&&"text"===this.elem&&!(this.mods&&"link"===this.mods.interact)==!1?{mods:{type:"url"}}:c.call(this);if("cls"===e)return void 0;if("default"===e){var e=this.block;if("i-bem"===e)return"i18n"===this.elem?p.call(this):b.call(this);if("i-global"===e){var e=this.elem;return"lego-static-host"===e?"//yandex.st/lego/2.10-126":"export-host"===e?"//export.yandex.ru":"social-host"===e?"//social.yandex.ru":"pass-host"===e?"//pass.yandex.ru":"passport-host"===e?"https://passport.yandex.ru":"click-host"===e?"//clck.yandex.ru":"content-region"===e||"tld"===e||"lang"===e?"ru":!this.elem==!1?"":!!this.elem==!1?m.call(this):b.call(this)}return b.call(this)}return b.call(this)}function i(){return!(this.mods&&"link"===this.mods.interact)==!1&&!!this.elem==!1?{elem:"link",url:this.ctx.url,content:this.ctx.content}:o.call(this)}function o(){var t=this.elem;return"bullet"===t?this.ctx.content||"■":"a11y"===t?BEM.I18N("suggest2-item","quick-answer")+": ":"fact"===t?!(this.mods&&"fact"===this.mods.type)==!1?[{elem:"a11y"},this.xmlEscape(this.ctx.content)]:a.call(this):"highlight"===t?this.xmlEscape(this.ctx.content):"text"===t?Array.isArray(this.ctx.content)?this.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},this):this.xmlEscape(this.ctx.content):a.call(this)}function s(){var t=this;if(!(442084682!==this.__$anflg)==!1){if(!!this.elem==!1){var e,i,o=(e=this.__$anflg,this.__$anflg=442084682,i=n.call(t),this.__$anflg=e,i);return o+=[";(function(d,e,c,r,n,w,v,f){","e=d.documentElement;",'c="className";','r="replace";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}return r.call(this)}return r.call(this)}function r(){return!!this.elem==!1?[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join(""):a.call(this)}function a(){return this.ctx.content}function c(){return void 0}function u(){return void 0}function l(){return!this.ctx.svg==!1?{style:'background-image:url("'+this.ctx.svg+'")'}:!this.ctx.png==!1?{style:'background-image:url("'+this.ctx.png+'")'}:h.call(this)}function h(){return void 0}function d(){return void 0}function f(){return void 0}function p(){var t,e,i,o,s=this;if(!this.ctx)return"";var r=this.ctx,a=r.keyset,c=r.key,u=r.params||{};if(!a&&!c)return"";if(r.content){var l;u.content=(l=[],t=this._buf,this._buf=l,e=this._mode,this._mode="",i=this.ctx,this.ctx=r.content,o=n.call(s),this._buf=t,this._mode=e,this.ctx=i,l.join(""))}this._buf.push(BEM.I18N(a,c,u))}function m(){var t,e,n,i=this.ctx.params||{},o=this["i-global"],s=i.tld&&i.tld!==o.tld;s&&(t=i.tld,e="tr"===t?"yandex.com.tr":"yandex."+t,n=-1!=["ua","by","kz"].indexOf(t)?"yandex.ru":e,o["content-region"]=t,o["click-host"]="//clck."+n,o["passport-host"]="https://passport."+n,o["pass-host"]="//pass."+e,o["social-host"]="//social."+e,o["export-host"]="//export."+e);for(var r in i)o[r]=i[r]}function _(){var t,e,i,o,s,r=this,a=this["i-global"],c={},u={block:"i-global",js:c};for(s in a)a.hasOwnProperty(s)&&(t=this._mode,this._mode="public-params",e=this.block,this.block="i-global",i=this.elem,this.elem=s,o=n.call(r),this._mode=t,this.block=e,this.elem=i,o)&&(c[s]=a[s]);return u}function g(){for(var t,e,i,o,s,r,a,c,u=this,l={},h=["lang","tld","content-region","click-host","passport-host","pass-host","social-host","export-host","login","lego-static-host"];c=h.shift();)l[c]=(t=this._mode,this._mode="default",e=this.block,this.block="i-global",i=this.elem,this.elem=c,o=n.call(u),this._mode=t,this.block=e,this.elem=i,o);this["i-global"]=this._.extend(l,(s=this._mode,this._mode="env",r=this.block,this.block="i-global",a=n.call(u),this._mode=s,this.block=r,a)),n.call(u)}function b(){return!this.ctx==!1&&!this.ctx.link==!1&&!!this._.isSimple(this.ctx)==!1?v.call(this):y.call(this)}function v(){function e(){if("no-follow"===this.ctx.link)return void 0;var t=this._links[this.ctx.link];return i=this.ctx,this.ctx=t,o=n.call(s),this.ctx=i,o}var i,o,s=this;if(!t||!this._cacheLog)return e.call(this);var r=this._buf.slice(this._cachePos).join("");this._cachePos=this._buf.length,this._cacheLog.push(r,{log:this._localLog.slice(),link:this.ctx.link});var a=e.call(this);return this._cachePos=this._buf.length,a}function y(){return!t==!1&&!this.ctx==!1&&!this.ctx.cache==!1?k.call(this):E.call(this)}function k(){function e(t,e,n){if(0===e.length)return void 0;if(Array.isArray(n)){for(var i=t,o=0;o<n.length-1;o++)i=i[n[o]];n=i[n[o]]}for(var s,r=t,o=0;o<e.length-1;o++)r=r[e[o]];return s=r[e[o]],r[e[o]]=n,s}var i,o=this;if(i=t.get(this.ctx.cache)){var s=this._links;this.ctx.links&&(this._links=this.ctx.links);for(var r=0;r<i.log.length;r++)if("string"!=typeof i.log[r]){var a,c=i.log[r];a=c.log.map(function(t){return{key:t[0],value:e(this,t[0],t[1])}},this).reverse();var u=this.ctx,l=u.cache;u.cache=null;var h=this._cacheLog;this._cacheLog=null;var d=this.ctx,f=d.link;d.link=c.link,n.call(o),u.cache=l,this._cacheLog=h,d.link=f,a.forEach(function(t){e(this,t.key,t.value)},this)}else this._buf.push(i.log[r]);return this._links=s,i.res}var p,m=[],_=this.ctx,g=_.cache;_.cache=null;var b=this._cachePos;this._cachePos=this._buf.length;var v=this._cacheLog;this._cacheLog=m;var y=this._localLog;this._localLog=[],p=n.call(o);var k=this._buf.slice(this._cachePos).join("");return k&&m.push(k),_.cache=g,this._cachePos=b,this._cacheLog=v,this._localLog=y,t.set(this.ctx.cache,{log:m,res:p}),p}function E(){var t=this._mode;if("default"===t)return w.call(this);if(""===t){if(!this._.isSimple(this.ctx)==!1){this._listLength--;var e=this.ctx;return void((e&&e!==!0||0===e)&&this._buf.push(e))}return!!this.ctx==!1?void this._listLength--:!this._.isArray(this.ctx)==!1?M.call(this):x.call(this)}return B.call(this)}function w(){function t(t,e){return(t||"")+"__"+(e||"")}var e,i,o,s,r,a,c,u,l,h,d,f,p,m,_,g,b,v,y,k,E,w=this,M=this,x=M.BEM,B=this.ctx,D=this._buf;if(i=this._mode,this._mode="tag",d=n.call(w),this._mode=i,E=d,"undefined"!=typeof E||(E=B.tag),"undefined"!=typeof E||(E="div"),E){var C,S;this.block&&B.js!==!1&&(o=this._mode,this._mode="js",s=n.call(w),this._mode=o,S=s,S=S?this._.extend(B.js,S===!0?{}:S):B.js===!0?{}:B.js,S&&((C={})[x.INTERNAL.buildClass(this.block,B.elem)]=S)),D.push("<",E);var T=(r=this._mode,this._mode="bem",a=n.call(w),this._mode=r,a);"undefined"!=typeof T||(T="undefined"!=typeof B.bem?B.bem:B.block||B.elem);var I=(c=this._mode,this._mode="cls",u=n.call(w),this._mode=c,u);I||(I=B.cls);var j=B.block&&C;if(T||I){if(D.push(' class="'),T){x.INTERNAL.buildClasses(this.block,B.elem,B.elemMods||B.mods,D);var O=(l=this._mode,this._mode="mix",h=n.call(w),this._mode=l,h);if(B.mix&&(O=O?O.concat(B.mix):B.mix),O){var A={};A[t(this.block,this.elem)]=!0,this._.isArray(O)||(O=[O]);for(var N=0;N<O.length;N++){var L=O[N];if(L){var F=L.block||L.elem,P=L.block||L._block||M.block,R=L.elem||L._elem||M.elem;if(F&&D.push(" "),x.INTERNAL[F?"buildClasses":"buildModsClasses"](P,L.elem||L._elem||(L.block?void 0:M.elem),L.elemMods||L.mods,D),L.js&&((C||(C={}))[x.INTERNAL.buildClass(P,L.elem)]=L.js===!0?{}:L.js,j||(j=P&&!L.elem)),F&&!A[t(P,R)]){A[t(P,R)]=!0;var H=(e=this.block,this.block=P,f=this.elem,this.elem=R,p=this._mode,this._mode="mix",m=n.call(w),this.block=e,this.elem=f,this._mode=p,m);if(H)for(var q=0;q<H.length;q++){var V=H[q];(V.block||V.elem)&&A[t(V.block,V.elem)]||(V._block=P,V._elem=R,O.splice(N+1,0,V))}}}}}}I&&D.push(T?" ":"",I),j&&D.push(" i-bem"),D.push('"')}if(C){var U=(_=this._mode,this._mode="jsAttr",g=n.call(w),this._mode=_,g);D.push(" ",U||"onclick",'="return ',this._.attrEscape(JSON.stringify(C)),'"')}var $=(b=this._mode,this._mode="attrs",v=n.call(w),this._mode=b,v);if($=this._.extend($,B.attrs)){var W;for(W in $)void 0!==$[W]&&D.push(" ",W,'="',this._.attrEscape($[W]),'"')}}if(this._.isShortTag(E))D.push("/>");else{E&&D.push(">");var z=(y=this._mode,this._mode="content",k=n.call(w),this._mode=y,k);if(z||0===z){var T=this.block||this.elem,K=this._notNewList;this._notNewList=!1;var Q=this.position;this.position=T?1:this.position;var G=this._listLength;this._listLength=T?1:this._listLength;var J=this.ctx;this.ctx=z;var Z=this._mode;this._mode="",n.call(w),this._notNewList=K,this.position=Q,this._listLength=G,this.ctx=J,this._mode=Z}E&&D.push("</",E,">")}}function M(){var t=this,e=this.ctx,i=e.length,o=0,s=this.position,r=this._notNewList;for(r?this._listLength+=i-1:(this.position=0,this._listLength=i),this._notNewList=!0;i>o;){var a=e[o++],c=this.ctx;this.ctx=null==a?"":a,n.call(t),this.ctx=c}r||(this.position=s)}function x(){var t=this,e=this.ctx.block,i=this.ctx.elem,o=this._currBlock||this.block;this.ctx||(this.ctx={});var s=this._mode;this._mode="default";var r=this._links;this._links=this.ctx.links||this._links;var a=this.block;this.block=e||(i?o:void 0);var c=this._currBlock;this._currBlock=e||i?void 0:o;var u=this.elem;this.elem=this.ctx.elem;var l=this.mods;this.mods=(e?this.ctx.mods:this.mods)||{};var h=this.elemMods;this.elemMods=this.ctx.elemMods||{},this.block||this.elem?this.position=(this.position||0)+1:this._listLength--,n.call(t),this._mode=s,this._links=r,this.block=a,this._currBlock=c,this.elem=u,this.mods=l,this.elemMods=h}function B(){throw new Error}return!function(){!function(t,e){if(e.I18N)return void 0;t.BEM=e;var n=e.I18N=function(t,e){return e};n.keyset=function(){return n},n.key=function(t){return t},n.lang=function(){return void 0}}(this,"undefined"==typeof BEM?{}:BEM)}(),!function(){function t(t,e){this.ctx=null===typeof t?"":t,this.apply=e,this._buf=[],this._=this,this._start=!0,this._mode="",this._listLength=0,this._notNewList=!1,this.position=0,this.block=void 0,this.elem=void 0,this.mods=void 0,this.elemMods=void 0}var i={},o=Object.prototype.toString,s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};!function(t,e){function n(t,e,n){n.push(s,t,s,e)}function i(t,e,i,o){o.push(t),i&&n(e,i,o)}function o(t,o,s,a,c){i(t,e,e,c),c.push(r,o),a&&n(s,a,c)}var s="_",r="__",a="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:a,MOD_DELIM:s,ELEM_DELIM:r,buildModPostfix:function(t,e,i){var o=i||[];return n(t,e,o),i?o:o.join("")},buildClass:function(t,n,s,r,a){var c=typeof s;if("string"==c?"string"!=typeof r&&(a=r,r=s,s=n,n=e):"undefined"!=c?(a=s,s=e):n&&"string"!=typeof n&&(a=n,n=e),!(n||s||a))return t;var u=a||[];return n?o(t,n,s,r,u):i(t,s,r,u),a?u:u.join("")},buildModsClasses:function(t,e,n,s){var r=s||[];if(n){var a;for(a in n)if(n.hasOwnProperty(a)){var c=n[a];null!=c&&(c=n[a]+"",c&&(r.push(" "),e?o(t,e,a,c,r):i(t,a,c,r)))}}return s?r:r.join("")},buildClasses:function(t,n,s,r){var a=r||[];return n?o(t,n,e,e,a):i(t,e,e,a),this.buildModsClasses(t,n,s,r),r?a:a.join("")}}}(i);var r=function(){var t={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},e=function(e){return t[e]||e};return function(t){return t=new RegExp(t,"g"),function(n){return(""+n).replace(t,e)}}}();t.prototype.isArray=function(t){return"[object Array]"===o.call(t)},t.prototype.isSimple=function(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e},t.prototype.isShortTag=function(t){return s.hasOwnProperty(t)},t.prototype.extend=function(t,e){if(!t||!e)return t||e;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},t.prototype.identify=function(){var t=0,e=i.__id=+new Date,n="__"+e,o=function(){return"uniq"+e+ ++t};return function(t,e){return t?e||t[n]?t[n]:t[n]=o():o()}}(),t.prototype.xmlEscape=r("[&<>]"),t.prototype.attrEscape=r('["&<>]'),t.prototype.BEM=i,t.prototype.isFirst=function(){return 1===this.position},t.prototype.isLast=function(){return this.position===this._listLength},t.prototype.generateId=function(){return this.identify(this.ctx)},e.apply=t.apply=function(){var e=new t(this,n);return e.apply(),e._buf.join("")}}(),e}("undefined"==typeof exports?{}:exports);return function(n){return n||(n={}),t=n.cache,e.apply.call([this])}}();"undefined"==typeof exports||(exports.BEMHTML=BEMHTML);