function cp(t,e,i){var n="clck/lid="+t;Lego.params.statRoot&&(n+="/sid="+Lego.params.msid);try{if(home&&home.getData&&home.getData("mordaFromCache.data"))return window.workerMessage("counter",{path:n}),!0;Lego.c(n,e,i)}catch(o){}}function cpr(t,e,i){try{Lego.cred(t,e,i)}catch(n){}}function cpt(t,e){t+=(document.getElementById("form").text.value?".full":".empty")+"/u="+(new Date).getTime(),cp(t,e)}function c0(t){try{Lego.c(t)}catch(e){}}function csh(t,e){try{cp(t,e)}catch(i){}}function csh_ifmsid(t,e){Lego.params.statRoot&&csh(t,e)}function cpa(t){return t&&"undefined"!=typeof Lego.params.msid?"onmousedown=\"Lego.cp('132','71946','"+t+"',this)\"":""}function statRedirect(t,e){location.href=e&&Lego.params.statRoot?location.protocol+"//clck.yandex.ru/redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t))):t}function getcss(t){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head").item(0).appendChild(e)}function tabs(t,e,i,n){var o="b-tabs",s="b-tabs__selected",r="b-tabs__notselected",a="b-tabs__names",c="b-tabs__items",u="i-hidden";if($(e).parent().is("."+s))return csh_ifmsid(i+".link",e),!0;var l=$(e).closest("."+o);if($("ul."+a+" > li",l).removeClass(s).addClass(r),$(e).closest("li").removeClass(r).addClass(s),$("div."+c+" > div",l).addClass(u),$("#"+t).removeClass(u),csh_ifmsid(i+".select"),e.blur(),n){var h=$(".b-tabs__frame");h.length||(h=$('<iframe class="b-tabs__frame" style="display:none"></iframe>'),$(document.body).append(h)),h.attr("src",n)}return!1}function CAWBrowser(){for(var t=[],e=6;15>e;e++)t[e]=!1;var i=navigator.userAgent;this.msie=i&&parseFloat(navigator.appVersion)>=4&&i.indexOf("Opera")<0&&i.indexOf("MSIE 4")<0&&i.indexOf("MSIE")>=0,this.win=i&&(i.indexOf("Windows 95")>=0||i.indexOf("Windows NT")>=0||i.indexOf("Windows 98")>=0),this.mac=navigator.platform&&-1!==navigator.platform.indexOf("Mac"),this.opera7=-1!==i.indexOf("Opera")&&window.opera&&document.readyState?1:0,this.gecko=-1!==i.toLowerCase().indexOf("gecko")&&-1===i.indexOf("safari");var n=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(n)for(e=6;15>e;e++)t[e]=n,t[e]=parseInt(t[e].description.substring(t[e].description.indexOf(".")-2),10)>=e;else if(this.msie&&this.win&&!this.mac)for(e=6;15>e;e++)try{t[e]=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e)}catch(o){}for(this.other=!((this.gecko||this.msie)&&this.win&&!this.mac),this.flash=0,e=6;15>e;e++)t[e]&&(this.flash=e)}function MordaRT(){this.listRE={}}function workerMessage(t,e){var i=home&&home.getData&&home.getData("worker-message.data");return i?(window.chrome&&window.chrome.runtime&&window.chrome.runtime.sendMessage(i.extensionId,{to:"big_"+i.locale+"."+i.mordaZone,data:{type:"frommorda",message:t,params:e}}),!0):!1}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof global?global:this,function(t){var e=function(){};if(e.version="1.0.11",e.isDebug=!1,e.isArray=function(t){return t instanceof Array},e.isArrayLike=function(t){return e.isObject(t)&&!e.isArray(t)&&"length"in t},e.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},e.isFunction=function(){return Array.prototype.every.call(arguments,function(t){return t instanceof Function})},e.isObject=function(t){return"object"==typeof t},e.isString=function(){return Array.prototype.every.call(arguments,function(t){return"string"==typeof t})},e.stringf=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/%s/g,function(){return e.shift()||""})},"undefined"==typeof JSON)throw new Error("JSON is not supported");e.JSON=JSON,e.console={slog:function(){this.log(e.stringf.apply(this,arguments))},log:function(e){"undefined"!=typeof debug?debug(e):t.console&&t.console.log&&t.console.log(e)},error:function(t){throw new Error(t)},dir:function(t){this.log(e.JSON.stringify(t))}},e.log=e.console.log,e.error=e.console.error;var i=/^https?:\/\/\S+/i;e.isURL=function(t){return"string"!=typeof t&&e.error("isURL expects string parameter instead "+typeof t),i.test(t)};var n=Array.prototype.filter?function(t,e){return t.filter(e)}:function(t,i){var n=[];return e.each(t,function(t,e){i(t,e,this)&&n.push(t)}),n};e.filter=function(t,i){return e.isArray(t)||e.error("first argument is expected to be an array instead of "+typeof t),e.isFunction(i)||e.error("second argument is expected to be a function instead of "+typeof i),n(t,i)},e.forEach=function(t,e,i){var n,o;for(i=i||t,n=0,o=t.length;o>n;n++)e.call(i,t[n],n,t);return this},e.indexOf=function(t,e,i){if(i=i||0,!(t instanceof Array))throw new Error("Function expects array as first argument");if("indexOf"in Array.prototype)return t.indexOf(e,i);for(var n=0,o=t.length;o>n;n++)if(t[n]===e&&n>=i)return n;return-1},e.map=function(t,i){var n=[];return e.isArray(t)&&i instanceof Function&&(n=t.map(i)),n},function(){var t=Array.prototype.some?function(t,e){return t.some(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e(t[i],i,t))return!0;return!1};e.some=function(i,n){return e.isArray(i)||e.error("first argument is expected to be an array instead of "+typeof i),e.isFunction(n)||e.error("second argument is expected to be a function instead of "+typeof n),t(i,n)}}();var o={};e.each=o.each=function(t,i,n){if(e.isArray(t))e.forEach.apply(this,arguments);else{var o;n=n||t;for(o in t)t.hasOwnProperty(o)&&i.call(n,t[o],o,t)}return this},e.beget=function(t,i){var n,o={},s=typeof t,r=typeof i;if("object"!==s&&e.error("Only object allowed to be prototype and tried to work with "+s),"undefined"!==r&&"object"!==r&&e.error("Only object allowed to be list of properties instead "+r),"function"==typeof Object.create)n={},e.each(i,function(t,e){n[e]={writable:!0,enumerable:!0,value:t}}),o=Object.create(t,n);else{var a=function(){};t&&"object"==typeof t&&(a.prototype=t),n=new a,"undefined"!=typeof i&&e.each(i,function(t,e){n[e]=t}),o=n}return o},e.getRandom=function(t){return parseInt(Math.random()*(t||1e3))},e.getElementId=function(t){e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t);var i=t.getAttribute("id");return i||(i="_"+e.getRandom(1e16),t.setAttribute("id",i)),i};var s=function(t){for(var e=document.all,i=[],n=0,o=e.length;o>n;++n)"string"==typeof e[n].getAttribute(t)&&i.push(e[n]);return i};e.getElementsByAttr=function(e){var i=[],n=arguments[1]||t.document||null;if("getAttribute"in n&&n.getAttribute(e)&&i.push(n),n&&n.querySelectorAll)try{i=i.concat(Array.prototype.slice.call(n.querySelectorAll("["+e+"]")))}catch(o){}return i.length||(i=i.concat(s(e))),i};var r=(new RegExp).compile(/^\s+|\s+$/g);e.trim=function(t){var i=typeof t;return"string"!==i&&e.error("Argument must be string but"+i+" passed"),t.trim instanceof Function?t.trim():t.replace(r,"")},e.stripSpaces=function(t){return t.split(" ").join("")},e.getJPathValue=function(t,e){for(var i=t,n=e.split("."),o=0;i[n[o]];)i=i[n[o++]];return i},e.getObject=function(t){return t.beget=function(t){return e.beget(this,t)},e.beget(t)},e.create=function(t){var e=function(){};return e.prototype=t,new e},e.constructURL=function(t,e){var i,n="",o=[],s=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),r=s&&s[3]?s[3]:"";if(s&&s[2])for(var a=s[2].split("&"),c=a.length;c--;)o.push(a[c]);for(i in e)e.hasOwnProperty(i)&&o.push(i+"="+e[i]);return n=s?s[1]+"?"+o.join("&")+r:t+"?"+o.join("&")+r},e.data=function(t,i){return e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t),t.getAttribute("data-"+i)},e.ComponentBase={data:function(t){var i=this.element;return i?e.data(i,t):void 0},setId:function(t){return this.id=t,this},baseInit:function(t,i){var n=this;this.element=i,e.each(e.dataset(i),function(t,e){n[e]=t})}},e.Component=function(){var t=[],i=[],n={},o="data-xapp";return{extend:function(o){var s,r=t.length;if(e.isObject(o))s=e.beget(e.ComponentBase,o);else if(e.isString(o)&&e.isFunction(arguments[1]))s=e.beget(e.ComponentBase,{id:o,init:arguments[1]});else{if(!e.isString(o)||!e.isArray(arguments[1]))throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })');var a=arguments[1];s=e.beget(e.ComponentBase,{id:o,init:function(){var t=e.filter(a,function(t){return e.isString(t)});t=e.map(t,function(t){if(!i[t])throw new Error("Service "+t+" hasnt defined");return i[t]()});var n=e.filter(a,function(t){return e.isFunction(t)});if(n.length>1)throw new Error("Too much declaration functions");n[0].apply(this,t)}})}return s.id||e.error("extend method expects id field in description object"),t.push(s),n[s.id]=r,t[r]},factory:function(t,e){i[t]=e},initByHTML:function(t){var i=t||document,n=this,s=e.getElementsByAttr(o,i);return e.forEach(s,function(t){var i=e.data(t,"xapp");e.forEach(i.split(" "),function(i){n.initById(i,e.getElementId(t),t)})}),this},initById:function(e,i,o){var s=e in n?t[n[e]]:null;s&&("undefined"!=typeof i&&s.setId(i),s.baseInit(i,o),s.init(i))}}}(),e.dataset=function(t){var i={};return e.isElement(t)&&(t.dataset?i=t.dataset:e.forEach(t.attributes,function(t){0===t.name.indexOf("data-")&&(i[t.name.substr(5)]=t.value)})),i},e.generateId=function(){return String(Math.random()).substr(2)},e.ns=function(t,e,i){return t[e]||(t[e]={}),"undefined"!=typeof i&&i.call(t[e]),this},e.extend=function(t,e){var i=function(){};t.superclass=i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e)},e.Interface=function(t,i){var n=this;2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected exactly 2"),this.methods=[],this.name=t,e.forEach(i,function(t){"string"!=typeof t&&e.error("Interface constructor expects method names to be passed in as a string"),n.methods.push(t)})},e.Interface.ensureImplements=function(t,i){return 2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected at least 2"),e.forEach(i,function(i){i.constructor!==e.Interface&&e.error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface."),e.forEach(i.methods,function(n){t[n]&&"function"==typeof t[n]||e.error("Function Interface.ensureImplements: object does not implement the "+i.name+" interface. Method "+n+" was not found.")})}),!0},e.View=function(t){this.templates=t&&t.templates?e.beget(t.templates):{}},e.isString=function(){return Array.prototype.every.call(arguments,function(t){return"string"==typeof t})},e.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(t){this.re.parse=t},getCustomRender:function(){var t="undefined"!==arguments[0]?arguments[0].split(this.re.rule):null;return t&&2===t.length?this.parseRules[t[0]]&&this.parseRules[t[0]].call(this,t[1]):void 0},parseRules:{l10n:function(t){return function(i){return e.isDebug&&!i.l10n(t)&&e.console.error("There is no translation for "+t),i.l10n?i.l10n(t):t}},jpath:function(t){return function(i){return e.getJPathValue(i,t)||""}},view:function(t){var e=this;return function(i){return e.get(t,i)}}},ruleFunction:function(t,i,n){var o=this;return this.getCustomRender(t)||function(s){var r=s&&s[t]||s&&s.views&&s.views.get(t,s)||"";return r||(r=n[t]?o.getContent(n[t],s):i?i[t]:""),e.isDebug&&!r&&e.console.log("Undefined variable "+t),r||""}},getContent:function(t,i){var n="";return n=e.isArray(t)?e.map(t,function(t){return"string"==typeof t?t:t(i)}).join(""):e.isFunction(t)?t(i):t.toString()},get:function(t,e){var i=this,n=e&&e.views?e.views.templates[t]:this.templates[t];return i.getContent(n,e)}},e.View.prototype.let=function(t,i,n){var o=this.templates[t]=[],s=this,r=0;return e.isFunction(i)?o.push(i):(i.replace(this.re.parse,function(t,e,a){o.push(i.substr(r,a-r),s.ruleFunction(e,n,s.templates)),r=a+t.length}),r<i.length&&o.push(i.substr(r))),this},e.views=new e.View,e.toArray=function(t){return Array.prototype.slice.call(t)};var a={},c={};return e.amd={define:function(t,e,i){return i=i||!0,a[t]=e,i&&(c[t]=!0),this},require:function(){var t=e.toArray(arguments).slice(0,arguments.length-1),i=arguments[arguments.length-1];return t=e.map(t,function(t){if(!a[t])throw new Error("Unmet dependency:"+t);return c[t]?(a[t]=e.isFunction(a[t])?a[t]():a[t],a[t]):a[t]()}),i.apply(this,t),this}},e.debounce=function(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||t.apply(o,s)},a=i&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t.apply(o,s)}},"function"==typeof define&&define.amd&&define("franky",[],function(){return e}),t.x=t.franky=e,e}),x.Component.extend({id:"widgets",init:function(){var t=ya.widgetsParams,e=t.pageType,i={wauth:t.auth,layoutFixed:!t.editMode,addUrl:"/adddata/",patternId:t.patternid,yu:t.yu,domain:t.domain,locale:t.locale};e&&(i[e+"_prototype"]=e),t.region&&(i.region=t.region),t.geoid&&(i.geoid=Number(t.geoid)),Widget.Init(i),wg.init(),wg.wa=i.wauth,t.settings&&(wg.psettings=t.settings),wg.hpattern=1,wg.editmode=t.editMode?1:0,wg.logged=t.Logged,wg.InMoscowRegion=t.InMoscowRegion,wg.isUkraine=t.NaUkraine,wg.statLogRoot=t.statLogRoot,wg.layoutType=t.layoutType,wg.hidePromo=t.hidePromo,wg.psettings.columnsCount||(wg.psettings.columnsCount=5),e&&(wg._prototype=e)}}),$(function(){x.Component.initByHTML()}),x.ns(this,"ya"),x.ns(this,"home"),ya.passRequest=function(t){if(t){var e=$("<iframe />");e.css({position:"absolute",height:"0",width:"0",left:"0",top:"0",visibility:"hidden"}),e.attr("src",t),e.appendTo(document.body)}},home.delayManager=function(){var t={},e={},i=function(i,n){t[i]||(t[i]=[]),e[i]?n():t[i].push(n)},n=function(e){if(t[e])for(var i=t[e].length,n=0;i>n;n++)t[e].shift().call()};return{add:function(t,e){i(t,e)},runQueue:function(t){e[t]=!0,n(t)}}}(),home.debounce=function(t,e,i){var n,o,s,r,a;return function(){s=this,o=arguments,r=new Date;var c=function(){var u=new Date-r;e>u?n=setTimeout(c,e-u):(n=null,i||(a=t.apply(s,o)))},u=i&&!n;return n||(n=setTimeout(c,e)),u&&(a=t.apply(s,o)),a}},function(t){function e(e,n,o){var r=!1;if(s){var a=[];t.each(c,function(){o.hasOwnProperty(this)&&(r=!0)&&a.push({name:this,val:o[this]})}),r&&(t.each(o,function(t){a.push({name:t,val:this})}),o=a)}t.each(o,function(o,s){if(r&&(o=s.name,s=s.val),t.isFunction(s)&&(!i||s.toString().indexOf(".__base")>-1)){var a=e[o]||function(){};n[o]=function(){var t=this.__base;this.__base=a;var e=s.apply(this,arguments);return this.__base=t,e}}else n[o]=s})}var i=function(){}.toString().indexOf("_")>-1,n=function(){},o=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=!0,r={toString:""};for(var a in r)r.hasOwnProperty(a)&&(s=!1);var c=s?["toString","valueOf"]:null;t.inherit=function(){var i=arguments,s=t.isFunction(i[0]),r=s?i[0]:n,a=i[s?1:0]||{},c=i[s?2:1],u=a.__constructor||s&&r.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!s)return u.prototype=a,u.prototype.__self=u.prototype.constructor=u,t.extend(u,c);t.extend(u,r);var l=r.prototype,h=u.prototype=o(l);return h.__self=h.constructor=u,e(l,h,a),c&&e(r,u,c),u},t.inheritSelf=function(t,i,n){var o=t.prototype;return e(o,o,i),n&&e(t,t,n),t}}(jQuery),function(t){var e=0,i="__"+ +new Date,n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var o="uniqueID"in t?"uniqueID":i;return e||o in t?t[o]:t[o]=n()}}(jQuery),function(t){t.isEmptyObject||(t.isEmptyObject=function(t){for(var e in t)return!1;return!0})}(jQuery),function(t){t.extend({debounce:function(t,e,i,n){3==arguments.length&&"boolean"!=typeof i&&(n=i,i=!1);var o;return function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){i||t.apply(n,s),o=null},e)}},throttle:function(t,e,i){var n,o,s;return function(){o=arguments,s=!0,i=i||this,n||function(){s?(t.apply(i,o),s=!1,n=setTimeout(arguments.callee,e)):n=null}()}}})}(jQuery),function(t){var e="__"+ +new Date+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,o,s,r,a){if("string"==typeof n){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,u=i(s,r),l=this[e]||(this[e]={}),h=n.split(" "),d=0;n=h[d++];)if(n=this.buildEventName(n),c=l[n]||(l[n]={ids:{},list:{}}),!(u in c.ids)){var f=c.list,p={fn:s,data:o,ctx:r,special:a};f.last?(f.last.next=p,p.prev=f.last):f.first=p,c.ids[u]=f.last=p}}else{var m=this;t.each(n,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||"undefined"==typeof n){var r=this[e];if(r)if(n){for(var a,c=n.split(" "),u=0;n=c[u++];)if(n=this.buildEventName(n),a=r[n])if(o){var l=i(o,s),h=a.ids;if(l in h){var d=a.list,f=h[l],p=f.prev,m=f.next;p?p.next=m:f===d.first&&(d.first=m),m?m.prev=p:f===d.last&&(d.last=p),delete h[l]}}else delete this[e][n]}else delete this[e]}else{var _=this;t.each(n,function(t,e){_.un(t,e,s)})}return this},trigger:function(i,n){var o,s=this,r=s[e];if("string"==typeof i?i=t.Event(s.buildEventName(o=i)):i.type=s.buildEventName(o=i.type),i.target||(i.target=s),r&&(r=r[i.type]))for(var a,c=r.list.first;c;)i.data=c.data,a=c.fn.call(c.ctx||s,i,n),"undefined"!=typeof a&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())),c.special&&c.special.one&&s.un(o,c.fn,c.ctx),c=c.next;return this}};t.observable=t.inherit(n,n)}(jQuery),function(t,e){function i(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function n(e,n,o){t.isFunction(e)?n[i(o,"*","*")]=e:t.each(e,function(e,s){t.isFunction(s)?n[i(o,e,"*")]=s:t.each(s,function(t,s){n[i(o,e,t)]=s})})}function o(t,e){return e?Array.isArray(e)?function(i){for(var n=0,o=e.length;o>n;)if(i.hasMod(t,e[n++]))return!0;return!1}:function(i){return i.hasMod(t,e)}:function(e){return e.hasMod(t)}}var s=[],r={},a={};this.BEM=t.inherit(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,i!==!1?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,i,n){var o=arguments.length,s=!1;1==o?(n="",i=t,t=e,s=!0):2==o&&("string"==typeof t?(n=i,i=t,t=e):(n="",s=!0));var r=this.getMod(t,i)===n;return s?!r:r},getMod:function(t,e){var i=typeof t;if("string"===i||"undefined"===i){e=t||e;var n=this._modCache;return e in n?n[e]:n[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var i=t&&"string"!=typeof t,n=this,o=[].slice.call(arguments,i?1:0),s=n._extractMods(o,i?t:e);return i||(o.length?o.forEach(function(t){n._modCache[t]=s[t]}):n._modCache=s),s},setMod:function(i,n,o){"undefined"==typeof o&&(o=n,n=i,i=e);var s=this;if(!i||i[0]){var r=(i&&i[0]?t.identify(i[0]):"")+"_"+n;if(this._processingMods[r])return s;var a,c=i?s._getElemMod(n,i,a=s.__self._extractElemNameFrom(i)):s.getMod(n);if(c===o)return s;this._processingMods[r]=!0;var u=!0,l=[n,o,c];i&&l.unshift(i),[["*","*"],[n,"*"],[n,o]].forEach(function(t){u=s._callModFn(a,t[0],t[1],l)!==!1&&u}),!i&&u&&(s._modCache[n]=o),u&&s._afterSetMod(n,o,c,i,a),delete this._processingMods[r]}return s},_afterSetMod:function(){},toggleMod:function(t,i,n,o,s){"string"==typeof t&&(s=o,o=n,n=i,i=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,i);return(r==n||r==o)&&this.setMod(t,i,"boolean"==typeof s?s?n:o:this.hasMod(t,i,n)?o:n),this},delMod:function(t,i){return i||(i=t,t=e),this.setMod(t,i,"")},_callModFn:function(t,n,o,s){var r=i(t,n,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},{_name:"i-bem",blocks:r,decl:function(i,s,a){if("string"==typeof i?i={block:i}:i.name&&(i.block=i.name),i.baseBlock&&!r[i.baseBlock])throw'baseBlock "'+i.baseBlock+'" for "'+i.block+'" is undefined';s||(s={}),s.onSetMod&&(n(s.onSetMod,s),delete s.onSetMod),s.onElemSetMod&&(t.each(s.onElemSetMod,function(t,e){n(e,s,t)}),delete s.onElemSetMod);var c=r[i.baseBlock||i.block]||this;if(i.modName){var u=o(i.modName,i.modVal);t.each(s,function(i,n){t.isFunction(n)&&(s[i]=function(){var t;if(u(this))t=n;else{var o=c.prototype[i];o&&o!==s[i]&&(t=this.__base)}return t?t.apply(this,arguments):e})})}if(a&&"boolean"==typeof a.live){var l=a.live;a.live=function(){return l}}var h;return i.block==c._name?(h=t.inheritSelf(c,s,a))._processLive(!0):(h=r[i.block]=t.inherit(c,s,a))._name=i.block,h},_processLive:function(){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(t,e){1==s.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=s.length;if(t)for(var e,i=s.splice(0,t);e=i.shift();)e.fn.call(e.ctx||this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);n>i;)delete t[arguments[i++]];return this},channel:function(i,n){return"boolean"==typeof i&&(n=i,i=e),i||(i="default"),n?void(a[i]&&(a[i].un(),delete a[i])):a[i]||(a[i]=new t.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e})}(),function(){var t=Array.prototype,e=Object.prototype.toString,i={indexOf:function(t,e){e=+(e||0);var i=this,n=i.length;if(n>0&&n>e)for(e=0>e?Math.ceil(e):Math.floor(e),-n>e&&(e=0),0>e&&(e+=n);n>e;){if(e in i&&i[e]===t)return e;++e}return-1},forEach:function(t,e){for(var i=-1,n=this,o=n.length;++i<o;)i in n&&(e?t.call(e,n[i],i,n):t(n[i],i,n))},map:function(t,e){for(var i=-1,n=this,o=n.length,s=new Array(o);++i<o;)i in n&&(s[i]=e?t.call(e,n[i],i,n):t(n[i],i,n));return s},filter:function(t,e){for(var i=-1,n=this,o=n.length,s=[];++i<o;)i in n&&(e?t.call(e,n[i],i,n):t(n[i],i,n))&&s.push(n[i]);return s},reduce:function(t,e){var i,n=-1,o=this,s=o.length;if(arguments.length<2){for(;++n<s;)if(n in o){i=o[n];break}}else i=e;for(;++n<s;)n in o&&(i=t(i,o[n],n,o));return i},some:function(t,e){for(var i=-1,n=this,o=n.length;++i<o;)if(i in n&&(e?t.call(e,n[i],i,n):t(n[i],i,n)))return!0;return!1},every:function(t,e){for(var i=-1,n=this,o=n.length;++i<o;)if(i in n&&!(e?t.call(e,n[i],i,n):t(n[i],i,n)))return!1;return!0}};for(var n in i)t[n]||(t[n]=i[n]);Array.isArray||(Array.isArray=function(t){return"[object Array]"===e.call(t)})}(),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}})}(),function(t,e,i){function n(t,e,i){i.push(r,t,r,e)}function o(t,e,i,o){o.push(t),i&&n(e,i,o)}function s(t,e,s,r,c){o(t,i,i,c),c.push(a,e),r&&n(s,r,c)}var r="_",a="__",c="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:c,MOD_DELIM:r,ELEM_DELIM:a,buildModPostfix:function(t,e,i){var o=i||[];return n(t,e,o),i?o:o.join("")},buildClass:function(t,e,n,r,a){var c=typeof n;if("string"==c?"string"!=typeof r&&(a=r,r=n,n=e,e=i):"undefined"!=c?(a=n,n=i):e&&"string"!=typeof e&&(a=e,e=i),!(e||n||a))return t;var u=a||[];return e?s(t,e,n,r,u):o(t,n,r,u),a?u:u.join("")},buildClasses:function(t,n,r,a){n&&"string"!=typeof n&&(a=r,r=n,n=i);var c=a||[];return n?s(t,n,i,i,c):o(t,i,i,c),r&&e.each(r,function(e,i){i&&(c.push(" "),n?s(t,n,e,i,c):o(t,e,i,c))}),a?c:c.join("")}}}(BEM,jQuery),jQuery.cookie=function(t,e,i){if("undefined"==typeof e){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var c;"number"==typeof i.expires?(c=new Date,c.setTime(c.getTime()+24*i.expires*60*60*1e3)):c=i.expires,a="; expires="+c.toUTCString()}var u=i.path?"; path="+i.path:"",l=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,l,h].join("")},function(t){function e(t){return t=t.replace(/%.{2}/g,function(t){return n[t]})}function i(t,i){var n="";try{n=t(i)}catch(o){n=t(e(i))}return n}var n={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return i(decodeURI,t)},decodeURIComponent:function(t){return i(decodeURIComponent,t)}})}(jQuery),function(t,e,i){function n(t,e,i){(t[e]||(t[e]=[])).unshift(i)}function o(t,e){return e.modName?function(i){(i._curBlock.mods||{})[e.modName]===e.modVal&&t(i)}:t}function s(t,i){var n,o=e.isArray(i);return e.isArray(t)?o?n=t.concat(i):(n=t).push(i):o?(n=i).unshift(t):n=[t,i],n}function r(t){return t.replace(p,function(t){return f[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,u={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},f={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},p=/["&<>]/g;t.HTML={decl:function(t,i){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=d[t.block]||(d[t.block]={});i.onBlock&&n(s,"_block",o(i.onBlock,t)),i.onElem&&(e.isFunction(i.onElem)?n(s,"_elem",o(i.onElem,t)):e.each(i.onElem,function(e,i){n(s,"_elem"+("*"===e?"":c+e),o(i,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=i},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,i,n,o){var s=this,r=s._params;return"undefined"==typeof i?r[t]:(!n&&t in r?o&&(r[t]=e.extend(i,r[t])):r[t]=i,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.attrs||{})[t];var o=n._params.attrs;return o?(i||!(t in o))&&(o[t]=e):(n._params.attrs={})[t]=e,n},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.mods||{})[t];var o=n._params.mods;return o?(i||!(t in o))&&(o[t]=e):(n._params.mods={})[t]=e,n},mix:function(t,e){var i=this,n=i._params;return"undefined"==typeof t?n.mix:(n.mix=!e&&"mix"in n?n.mix.concat(t):t,i)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,i=e._params;return t.content=i.content,i.content=t,e},beforeContent:function(t){var e=this,i=e._params;return i.content=s(t,i.content),e},afterContent:function(t){var e=this,i=e._params;return i.content=s(i.content,t),e},wrap:function(t){var e=this,i=e._params;return t.block||(t._curBlock=e._curBlock),t.content=i._wrapper?i._wrapper:i,i._wrapper=t,e},tParam:function(t,e){var i=this,n=i._tParams||(i._tParams={});if("undefined"==typeof e)return n[t];var o=i._tParamsChanges||(i._tParamsChanges={});return t in o||(o[t]=n[t]),n[t]=e,i},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,i=t._buffer,n=t._params,o=typeof n;if("string"==o||"number"==o)i.push(n);else if(e.isArray(n))for(var s,r,a=0,c=n.length;c>a;)t._params=s=n[a++],r=typeof s,"string"==r||"number"==r?i.push(s):s&&(s._pos=a,s._siblingsCount=c,t._buildByDecl());else n&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,i=this,n=i._buffer,o=i._params,s=o.tag||"div",a=o.block||o.elem,c=a&&(o.block||i._curBlock.block),d=!1;o.js&&((t={})[l(c,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),n.push("<",s),(a||o.cls)&&(n.push(' class="'),a&&(h(c,o.elem,o.mods,n),o.mix&&e.each(o.mix,function(e,i){i&&(n.push(" "),h(i.block,i.elem,i.mods,n),i.js&&((t||(t={}))[l(i.block,i.elem)]=i.js===!0?{}:i.js,d||(d=!i.elem)))})),o.cls&&n.push(a?" ":"",o.cls),d&&n.push(" i-bem"),n.push('"')),t&&n.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&n.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),u[s]?n.push("/>"):(n.push(">"),"undefined"!=typeof o.content&&(i._params=o.content,i._buildAll()),n.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,i=t._curBlock,n=t._params;if(n._curBlock&&(t._curBlock=n._curBlock),n.block&&(t._curBlock=n),!n._wrapper){if(n.block||n.elem){var o=d[t._curBlock.block];if(o){var s;if(n.elem?(s=o["_elem"+c+n.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!n._isStopped););}}if(n._wrapper)return n._curBlock=t._curBlock,t._params=n._wrapper,t._buildAll()}var u=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=i,u){var l=t._tParams;e.each(u,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),function(t){if(!window.JSON){var e,i=Object.prototype.toString,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:e=function(s){if(null===s)return"null";if("undefined"==typeof s)return t;switch(i.call(s)){case"[object String]":return n.lastIndex=0,'"'+(n.test(s)?s.replace(n,function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):s)+'"';case"[object Number]":case"[object Boolean]":return""+s;case"[object Array]":for(var r,a="[",c=0,u=s.length;u>c;)r=e(s[c]),a+=(c++?",":"")+("undefined"==typeof r?"null":r);
return a+"]";case"[object Object]":if("[object Function]"===i.call(s.toJSON))return e(s.toJSON());var r,a="{",c=0;for(var l in s)s.hasOwnProperty(l)&&(r=e(s[l]),"undefined"!=typeof r&&(a+=(c++?",":"")+'"'+l+'":'+r));return a+"}";default:return t}}}}}(),function(t,e,i){function n(t,i){var n=t[0];e.each(a(n),function(r,a){s(a,n,r,i);var c=m[a.uniqId];c?c.domElem.index(n)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):o(r,t,a)})}function o(t,n,o,r,c){"boolean"==typeof o&&(c=r,r=o,o=i);var u=n[0];o=s(o||a(u)[t],u,t);var l=o.uniqId;if(m[l])return m[l]._init();p[l]=p[l]?p[l].add(n):n;var h=u.parentNode;h&&11!==h.nodeType||e.unique(p[l]);var d=v[t]||C.decl(t,{},{live:!0});if(!(d._liveInitable=!!d._processLive())||r||o.live===!1){var f=new d(p[l],o,!!r);return delete p[l],c&&c.apply(f,Array.prototype.slice.call(arguments,4)),f}}function s(t,i,n,o){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(i),r=_[s]||(_[s]={});return r[n]||(r[n]=t),t}function r(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function a(t){var i=e.identify(t);return _[i]||(_[i]=c(t))}function c(t){var i=t.onclick||t.ondblclick;if(!i&&"body"==t.tagName.toLowerCase()){var n=e(t),o=n.attr("onclick")||n.attr("ondblclick");o&&(i=Function(o))}return i?i():{}}function u(t){delete _[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),f=e("body"),p={},m={},_={},g={},b={},v=t.blocks,y=t.INTERNAL,w=y.NAME_PATTERN,k=y.MOD_DELIM,M=y.ELEM_DELIM,E=y.buildModPostfix,x=y.buildClass;e.fn.bem=function(t,e){return o(t,this,e,!0)};var C=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},m[o._uniqId=i.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,s,r){s||(s=n,n=i);var a=n?"string"==typeof n?this.findElem(n):n:this.domElem,c="string"==typeof s,u=c?s:s.block||s.blockName,l="."+(c?x(u):x(u,s.modName,s.modVal))+(r?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),r)return h[0]?o(u,h.eq(0),!0):null;var d=[],f={};return e.each(h,function(t,i){var n=o(u,e(i),!0);f[n._uniqId]||(f[n._uniqId]=!0,d.push(n))}),d},bindToDomElem:function(t,i,n){var o=this;return n?t.bind(o._buildEventName(i),function(t){return(t.data||(t.data={})).domElem=e(this),n.apply(o,arguments)}):e.each(i,function(e,i){o.bindToDomElem(t,e,i)}),o},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindToWin:function(t,e){var i,n,o=e;return"resize"===t&&(e=function(){var t=h.height(),e=h.width();(i!==t||n!==e)&&(i=t,n=e,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindTo:function(t,i,n){return!i||e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(d,t)},unbindFromWin:function(t){return this.unbindFromDomElem(h,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this,i=e._eventNameCache;if(t in i)return i[t];var n="."+e._uniqId;if(t.indexOf(".")<0)return i[t]=t+n;var o=".bem_"+e.__self._name;return i[t]=t.split(".").map(function(t,e){return 0==e?t+o:o+"_"+t}).join("")+n},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,i){var n=this,o=g[n.__self._buildCtxEventName(t.type)],s={};o&&n.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var u=o.ctxs[c];u&&(e.each(u,function(e,o){o.fn.call(o.ctx||n,t,i)}),a--),s[c]=!0}r=r.parentNode}})},setMod:function(t,i,n){if(t&&"undefined"!=typeof n&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,i,n)}),o}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,o=(e||this.domElem)[0];return o&&(n=o.className.match(this.__self._buildModValRE(t,i||e))),n?n[2]:""},_extractMods:function(t,e){var i={},n=!t.length,o=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(n?w:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(k),n=t.substr(0,e-1).lastIndexOf(k);i[t.substr(n+1,e-n-1)]=t.substr(e+1),++o}),o<t.length&&t.forEach(function(t){t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,o,s){var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s),u=""===i;(o||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(c,u?"":"$1"+a+i):u||e(this).addClass(a+i)}),s&&this.dropElemCache(s,t,n).dropElemCache(s,t,i)},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t));var o=this.__self,s="."+e.split(" ").map(function(t){return x(o._name,t,i,n)}).join(",.");return r(t,s)},_elem:function(t,e,i){var n,o=t+E(e,i);return(n=this._elemCache[o])||(n=this._elemCache[o]=this.findElem(t,e,i),n.__bemElemName=t),n},elem:function(t,i,n){if(i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var o=e([]),s=this;return t.split(" ").forEach(function(t){o=o.add(s._elem(t,i,n))}),o},dropElemCache:function(t,e,i){if(t){var n=this,o=E(e,i);t.indexOf(" ")<0?delete n._elemCache[t+o]:t.split(" ").forEach(function(t){delete n._elemCache[t+o]})}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[x(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this,n=i.__self;i._isDestructing=!0,i._needSpecialUnbind&&n.doc.add(n.win).unbind("."+i._uniqId),i.dropElemCache().domElem.each(function(t,i){var n=a(i);e.each(n,function(t,e){var o=m[e.uniqId];o?o._isDestructing||(l(o,i),delete n[t]):delete p[e.uniqId]}),e.isEmptyObject(n)&&u(i)}),t||i.domElem.remove(),delete m[i.un()._uniqId],delete i.domElem,delete i._elemCache,i.__base()}},{scope:f,doc:d,win:h,_processLive:function(t){var e=this,i=e._liveInitable;if("live"in e){var n="undefined"==typeof i;n^t&&(i=e.live()!==!1,e.live=function(){})}return i},init:function(t,i,o){(!t||e.isFunction(t))&&(o=i,i=t,t=d);var s=e.identify();return r(t,".i-bem").each(function(){n(e(this),s)}),i&&this.afterCurrentEvent(function(){i.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,o){"boolean"!=typeof t&&(o=n,n=t,t=i),r(n,".i-bem",o).each(function(t,i){var n=a(this);e.each(n,function(t,e){if(e.uniqId){var o=m[e.uniqId];o?(l(o,i),delete n[t]):delete p[e.uniqId]}}),e.isEmptyObject(n)&&u(this)}),t||(o?n.empty():n.remove())},update:function(t,e,i,n){this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){this.init(e(i).appendTo(t))},prepend:function(t,i){this.init(e(i).prependTo(t))},before:function(t,i){this.init(e(i).insertBefore(t))},after:function(t,i){this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,o){var s=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){s._liveClassBind(t,e,n,o)});else{var r=b[i],a=e.identify(n);r||(r=b[i]={},d.bind(i,s.changeThis(s._liveClassTrigger,s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(n,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var o=b[i];if(o)if(n){if(o=o[t]){var s=e.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var i=b[t.type];if(i){var n=t.target,o=[];for(var s in i)i.hasOwnProperty(s)&&o.push(s);do for(var r=" "+n.className+" ",a=0;s=o[a++];)if(r.indexOf(" "+s+" ")>-1){for(var c,u=0,l=i[s].fns,h=!1;c=l[u++];)c.fn.call(e(n),t)===!1&&(h=!0);if(h&&t.preventDefault(),h||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(s){var r=[n._name,((s.data||(s.data={})).domElem=e(this)).closest(n.buildSelector()),!0],a=o.apply(null,i?r.concat([t,s]):r);return a&&!i&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,o,s){(!n||e.isFunction(n))&&(o=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(x(r._name,e,t.modName,t.modVal),n,o,s)}),r):r._liveClassBind(x(r._name,t.elem,t.modName,t.modVal),n,o,s)},liveUnbindFrom:function(t,e,i){var n=this;return t.indexOf(" ")>1?(t.split(" ").forEach(function(t){n._liveClassUnbind(x(n._name,t),e,i)}),n):n._liveClassUnbind(x(n._name,t),e,i)},_liveInitOnBlockEvent:function(t,e,i,n){var o=this._name;return v[e].on(t,function(t){var e=arguments,s=t.block[n](o);i&&s.forEach(function(t){i.apply(t,e)})}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockInsideInit:function(t,e){return this.liveInitOnBlockInsideEvent("init",t,e)},on:function(t,e,i,n,o){return t.jquery?this._liveCtxBind(t,e,i,n,o):this.__base(t,e,i,n)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,o){return this._liveCtxBind(t,e,i,n,o)},_liveCtxBind:function(t,n,o,s,r){var a=this;if("string"==typeof n)if(e.isFunction(o)&&(r=s,s=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var c=a._buildCtxEventName(n),u=g[c]||(g[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=u.ctxs[t];i||(i=u.ctxs[t]={},++u.counter),i[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,o)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,o){var s=this,r=g[i=s._buildCtxEventName(i)];return r&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=r.ctxs[i])&&(n&&delete t[e.identify(n)+(o?e.identify(o):"")],(!n||e.isEmptyObject(t))&&(r.counter--,delete r.ctxs[i]))}),r.counter||delete g[i]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:i},extractParams:c,_buildModClassPrefix:function(t,e){return x(this._name)+(e?M+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+k+t+k},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+w+")(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+M+"("+w+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+x(this._name,t,e,i)},getBlockByUniqId:function(t){return m[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){for(var t=this.replace(/^\s\s*/,""),e=/\s/,i=t.length;e.test(t.charAt(--i)););return t.slice(0,i+1)})}(),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return!!t.getCookie("yandex_login")}}(window.Lego),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,$(function(){t.oframebust&&Lego.oframebust(t.oframebust)})}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"//pass.yandex.ru","social-host":"//social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t){return(this._params||{})[t]}}),function(t){function e(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,i,n){var o=e(n&&n.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),s=function(t,e,i,n){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+o+"/"+i+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(n?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},r=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",s(t,location.href,"jclck")),e.insertBefore(i,e.firstChild)};if(i)if(i.className.match(/b-link_pseudo_yes/)||i.href&&i.href.match(/^mailto:/)||n&&n.noRedirect===!0)r();else if(i.href){var a=i.href;i.href=s(t,a,"redir"),setTimeout(function(){i.href=a},500)}else if(i.form)if(i.type.match(/submit|button|image/)){var a=i.form.action;i.form.action=s(t,a,"redir",!0),setTimeout(function(){i.form.action=a},500)}else r();else{if(!i.action)throw"counter.js: not link and not form!";i.action=s(t,i.action,"redir",!0)}else r()}}(window.Lego),function(t,e){t||(t=window.Lego={}),t.cp=function(i,n,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+i+"/cid="+n+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)}}(window.Lego),function(t){t||(t=window.Lego={}),t.ch=function(e,i,n){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,i,n)}}(window.Lego),function(t){t.cred=function(t,e,i){var n,o=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",t),e.insertBefore(i,e.firstChild)};if(e)if(e.className.match(/b-link_pseudo_yes/)||e.href&&e.href.match(/^mailto:/)||i&&i.noRedirect===!0)o();else if(e.href)n=e.href,e.href=t,setTimeout(function(){e.href=n},500);else if(e.form)e.type.match(/submit|button|image/)?(n=e.form.action,e.form.action=t,setTimeout(function(){e.form.action=n},500)):o();else{if(!e.action)throw"counter.js: not link and not form!";e.action=t}else o()}}(window.Lego),window.csh_ifgsid=csh_ifmsid,function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1==i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1==n?e.substring(i):e.substring(i,n))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(i){return(i=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"//passport.yandex.ru","pass-host":"//pass.yandex.ru","passport-msg":i.id,"social-host":"//social.yandex.ru","lego-path":"/lego","show-counters-percent":100},i,e.params))["show-counters"]=Math.round(100*Math.random())<=i["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},i),t(function(){i.oframebust&&e.oframebust(i.oframebust)}),i}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(i,n){i=i||document,n=n||".g-js",t(i).find(n).each(function(){var i=t(this),n=this.onclick?this.onclick():{},o=n.name||"",s=e.block[o];s&&!i.data(o)&&(s.call(i,n),i.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=!!t(document).ready(function(){e.blockInit()}))}(jQuery,window.Lego),function(){"use strict";BEM.decl("i-ua",{},{});try{BEM.blocks["i-ua"].svg=document.documentElement.className.indexOf("i-ua_inlinesvg_yes")>-1}catch(t){}}(),function(t,e,i,n,o,s){var r;e=t.documentElement,i="className",n="replace","CSS1Compat"!==t.compatMode&&(e[i]=e[i][n]("i-ua_css_standart","i-ua_css_quirks")),r=navigator.appVersion.match(/OS\s(\d)/),r=r&&r[1]&&parseInt(r[1],10),/iphone|ipad|ipod/i.test(navigator.appVersion)&&r>=7?((o=t.documentElement)&&(s=o.classList),s.add("ios-simplified")):/android/i.test(navigator.appVersion)&&((o=t.documentElement)&&(s=o.classList),s.add("android"))}(document),function(t){t||(t=window.Lego={}),t.messages=t.messages||{},t.message=function(e,i){return"ru"==t.params.locale?i:t.messages[e]||i}}(window.Lego),function(t){var e,i;try{e=t.localStorage,i="ya_ls_test",e.setItem(i,"1"),"1"!==e.getItem(i)?e=null:e.removeItem(i)}catch(n){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,i){return a(function(){return e.setItem(t,i)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),function(t){"use strict";for(var e=["ms","moz","webkit","o"],i=0;i<e.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[e[i]+"RequestAnimationFrame"];if(void 0===t.requestAnimationFrame){var n,o=[],s=+new Date,r=0,a=function(){var t=o;o=[],r=+new Date,n=0;for(var e=0,i=t.length;i>e;e++)t[e](r-s)};t.requestAnimationFrame=function(e){if(o.push(e),!n){var i=+new Date,s=Math.max(0,16-(i-r));n=t.setTimeout(a,s)}return n},t.requestAnimationFrame.fallback=!0}}(this),function(t){var e,i;try{e=t.localStorage,i="ya_ls_test",e.setItem(i,"1"),"1"!==e.getItem(i)?e=null:e.removeItem(i)}catch(n){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,i){return a(function(){return e.setItem(t,i)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),BEM.HTML.decl("b-link",{onBlock:function(t){t.tag("a").attr("href",t.param("url"));for(var e,i=["title","target"];e=i.pop();)t.param(e)&&t.attr(e,t.param(e))}}),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.handle.apply(this,arguments),e.type="click")}}}(jQuery),BEM.DOM.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick",function(t){this._onClick(t)})}}),BEM.HTML.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{onBlock:function(t){t.tag(t.param("url")?"a":"span"),t.wrapContent({elem:"inner"}),t.js(!0)},onElem:{inner:function(t){t.tag("span")}}}),function(){var t,e={isAuthenticated:!1,isFeedbackReceived:!1,isRequestSent:!1},i=function(){};BEM.decl("i-mda-auth",{},{authenticate:function(n){if(t=Lego.params["mda-auth-url"]||"",""===t)return!1;var o=Lego.params["mda-auth-delay"]||10;i=n||function(){},setTimeout(function(){var i=document.createElement("iframe");i.style.visibility="hidden",i.style.position="absolute",i.setAttribute("src",t),i.style.top=i.style.left=i.style.width=i.style.height=0,document.getElementsByTagName("body")[0].appendChild(i),e.isRequestSent=!0},o)},isRequestSent:function(){return e.isRequestSent},isFeedbackReceived:function(){return e.isFeedbackReceived},isAuthenticated:function(){return e.isAuthenticated},getUrl:function(){return t},registerFeedback:function(t){var n="success"===t;e.isFeedbackReceived=!0,e.isAuthenticated=n,i(n)}})}(),function(t){var e;e="ontouchstart"in window?{type:"touch",down:"touchstart",move:"touchmove",up:"touchend",cancel:"touchcancel"}:{type:"mouse",down:"mousedown",move:"mousemove",up:"mouseup",cancel:"mouseleave"};var i=function(t){var i=t.originalEvent;return"touch"===e.type?(i=t.originalEvent,i.touches&&i.touches[0]?{x:i.touches[0].pageX,y:i.touches[0].pageY}:i.changedTouches&&i.changedTouches[0]?{x:i.changedTouches&&i.changedTouches[0].pageX,y:i.changedTouches&&i.changedTouches[0].pageY}:{x:0,y:0}):{x:t.clientX,y:t.clientY}};t.event.special.pointerdown={setup:function(){t(this).bind(e.down+".pointerEvents",function(n){"mouse"===e.type&&(this._pointerIsDown=!0),n.pointer=i(n),n.type="pointerdown",t.event.handle.apply(this,arguments)})},teardown:function(){t(this).unbind(e.down+".pointerEvents")}},t.event.special.pointerup={setup:function(){t(this).bind(e.up+".pointerEvents",function(n){"mouse"===e.type&&delete this._pointerIsDown,n.pointer=i(n),n.type="pointerup",t.event.handle.apply(this,arguments)})},teardown:function(){t(this).unbind(e.up+".pointerEvents")}},t.event.special.tap={setup:function(){if("mouse"!==e.type&&!/Android/.test(navigator.userAgent)){var i={};t(this).bind({"pointerdown.tapEvent":function(t){i.target=this,i.x1=t.pointer.x,i.y1=t.pointer.y},"pointermove.tapEvent":function(t){i.x2=t.pointer.x,i.y2=t.pointer.y},"pointerup.tapEvent":function(e){i.x2=e.pointer.x,i.y2=e.pointer.y,Math.abs(i.x2-i.x1)<5&&Math.abs(i.y2-i.y1)<5&&(9!==i.target.nodeType&&(t(document).one("click.preventClick",function(t){return t.preventDefault(),!1}),t("body").css("pointer-events","none"),setTimeout(function(){t(document).unbind(".preventClick"),t("body").css("pointer-events","auto")},750)),e.type="tap",t.event.handle.apply(this,arguments)),i={}},"pointercancel.tapEvent":function(){i={}}})}},teardown:function(){t(this).unbind(".tapEvent")}}}(jQuery),function(t){var e=t.browser.opera&&t.browser.version<12.1?"keypress":"keydown",i=Object.prototype.hasOwnProperty;BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t}}},onSetMod:{js:function(){this._cache={},this._body=t("body"),this._inContainer=null,this._isParentFixed=!1,this._owner=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var e=this.getDefaultParams(),i=this.params,n=this._repackDirParams(e.directions),o=this._repackDirParams(i.directions);i.tail&&(this.params.tail=this._mergeParams(e.tail,i.tail,{offset:this._offsetParamsHook})),this._order=o.keys.map(function(t){var e=o.directions[t],i=n.directions[t];return i||(i=n.directions[e.to]),this._directions[t]=this._mergeParams(i,e,{offset:this._offsetParamsHook,tail:this._tailParamsHook}),t},this)},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(e){var i;if(e instanceof BEM)i=e.domElem;else if(e instanceof t)i=e;else if(!e)return;if(i){this._owner&&i[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=i;var n=this.findBlockOutside(i,"popup");n&&this.setParent(n)}else this._userPosition=e;return this.setMod("visibility","outside").repaint()},hide:function(){if(this._isHiding)return this;if(this._isShown&&(this._isHiding=!0,this._childs.forEach(function(t){t.hide()}),this.hasMod("animate","yes"))){var t=this;return this.beforeHide(function(){t.delMod("visibility")}),this}return this.delMod("visibility")},toggle:function(t){return this._isShown&&!this._isHiding?this.hide():this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild(this),this},addChild:function(t){var e,i=this._childs.length;for(e=0;i>e;e++)if(this._childs[e]._uniqId==t._uniqId)return;this._childs.push(t),t.on("hide",function(){this.removeChild(t)},this)},removeChild:function(t){var e,i=this._childs.length;for(e=0;i>e;e++)if(this._childs[e]._uniqId==t._uniqId){this._childs.splice(e,1);break}},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this.bindToDoc(e,function(e){27===e.keyCode&&(t(this.__self.doc[0].activeElement).blur(),this.hide())}),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive();var i=t.browser;if(i.msie&&parseInt(i.version,10)>=9){var n=[this.domElem,this.elem("content")],o=n.map(function(t){return parseInt(t.css("z-index"),10)||""});this.domElem[0].onresize=function(){n.forEach(function(t,e){t.css("z-index",o[e]+1)}),setTimeout(function(){n.forEach(function(t,e){t.css("z-index",o[e])})},0)}}this.trigger("show")},_onHidden:function(){this.unbindFromDoc(e),this._detachUnder(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._cache={},this._isShown=!1,this._isHiding=!1;var i=t.browser;i.msie&&parseInt(i.version,10)>=9&&(this.domElem[0].onresize=null),this.trigger("hide")},_mergeParams:function(t,e,n){var o={};return n||(n={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),Object.keys(e).forEach(function(s){var r=i.call(n,s)?n[s].call(this,t[s],e[s]):e[s];o[s]=!r||"object"!=typeof r||Array.isArray(r)?r:t[s]?this._mergeParams(t[s],r,n):r},this),o},_offsetParamsHook:function(t,e){return"number"==typeof e?{top:e,bottom:e,left:e,right:e}:e},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),e},_repackDirParams:function(e){var i={},n=[];return("string"==typeof e||t.isPlainObject(e))&&(e=[e]),n=e.map(function(t){if("string"==typeof t){var e=t.split("-");t={to:e[0],tail:{}},e[1]&&(t.axis=e[1]),e[2]&&(t.tail.axis=e[2])}var n=t.to;return i[n]||(i[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,i[n]=t,n},this),{directions:i,keys:n}},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;i>t;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],100==s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){var e=this.getOwnerPos(),n=this.getOwnerSize(),o=this.getPopupSize(),s=t.axis,r=this.params.position||{},a={};switch(t.to){case"bottom":a={top:i.call(r,"top")?r.top:e.top+n.height,left:i.call(r,"left")?r.left:this._calcLeft(s)};break;case"top":a={top:i.call(r,"top")?r.top:e.top-o.height,left:i.call(r,"left")?r.left:this._calcLeft(s)};break;case"left":a={top:i.call(r,"top")?r.top:this._calcTop(s),left:i.call(r,"left")?r.left:e.left-o.width};break;case"right":a={top:i.call(r,"top")?r.top:this._calcTop(s),left:i.call(r,"left")?r.left:e.left+n.width}}return a},_calcTop:function(t){var e=0,i=this.getPopupSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"==t?e+=n.top:"middle"==t?e+=n.top+o.height/2-i.height/2:"bottom"==t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPopupSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"==t?e+=n.left:"center"==t?e+=n.left+o.width/2-i.width/2:"right"==t&&(e+=n.left+o.width-i.width),e},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;return i[n]?i[n]:o?(e={left:0,top:0},o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom),i[n]=e):!1},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(){var t=this._container=this._parent?this._parent.domElem:this._body;this._inContainer?t.children(":last")[0]===this.domElem[0]||this.domElem.appendTo(t):this._inContainer=!!this.domElem.appendTo(t)},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){i!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach(function(e){this._sum(t[e],i)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(i){t[i]=(t[i]||0)+e[i]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;if(this._owner&&(t=this._getPosOf(this._owner),this.hasMod("position","fixed"))){var e=this.__self.win;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this.__self.getWindowSize(),o=this.getPopupSize(),s=this._positions[t.key],r=this.__self.win,a=this._parent?this._parent.domElem.offset():{top:0,left:0},c=s.top+(this._isParentFixed?a.top:-r.scrollTop()),u=s.left+(this._isParentFixed?a.left:-r.scrollLeft()),l=u+o.width-n.width,h=c+o.height-n.height,d={height:o.height,width:o.width},f=100;return h>0&&(d.height-=h),0>c&&(d.height+=c),0>u&&(d.width+=u),l>0&&(d.width-=l),d.height<0||d.width<0?f=0:(i=Math.abs(d.height*d.width),e=o.height*o.width,e!=i&&(f=i/e*100)),f},destruct:function(){var t=arguments;return this._childs.forEach(function(e){e.destruct.apply(e,t)}),this.__base.apply(this,t)}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}})}(jQuery),BEM.DOM.decl("popup",{isHiding:function(){return this._isHiding}}),BEM.DOM.decl({block:"popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{autoclosable:{"":function(){this._disableAutoclosable()
}}},_enableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"leftclick tap",function(t){t.stopPropagation(),this.hide()})),this.bindToDoc("leftclick tap",function(t){if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide()}})},_disableAutoclosable:function(){this.hasMod(this._under,"type","paranja")&&this.unbindFrom(this._under,"leftclick tap"),this.unbindFromDoc("leftclick tap")},_isRelatedNode:function(t){if(this.containsDomElem(t)||this._owner&&this.containsDomElem.call({domElem:this._owner},t))return!0;var e,i=this._childs.length;for(e=0;i>e;e++)if(this.containsDomElem.call({domElem:this._childs[e].domElem},t))return!0;return!1}}),BEM.DOM.decl("popup",{_enableAutoclosable:function(){this.__base.apply(this,arguments),this.bindToDoc("mousedown",function(t){if(1===t.which&&!this._isRelatedNode($(t.target))&&"yes"!==this.params.disableoutside){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||(this._skipReturnFocus=!0,this.hide())}})},_disableAutoclosable:function(){this.__base.apply(this,arguments),this.unbindFromDoc("mousedown")}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}},visibility:{visible:function(){this.__base(),this.hasMod("adaptive","yes")&&this._enableAdaptive()},"":function(){this.__base(),this._disableAdaptive()}}},_enableAdaptive:function(){this.bindToWin("resize",this.onResize)._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this.__self.win),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this.__self.win),this.getScrollEvents().join(" "))},onResize:function(){this._cache={},this._isHiding||this.repaint()},onScroll:function(){this._cache={},this._isHiding||this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n=(this.getPopupSize(),this.params.tail,{opacity:1,top:i.top,left:i.left}),o={opacity:0,top:i.top,left:i.left};"bottom"==e?o.top+=10:"top"==e?o.top-=10:"left"==e?o.left-=10:"right"==e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,150)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=(this.getPopupSize(),this.params.tail,{top:n.top,left:n.left,opacity:0});return"bottom"==i?o.top+=10:"top"==i?o.top-=10:"left"==i?o.left-=10:"right"==i&&(o.left+=10),this.domElem.stop(!0,!0).animate(o,150,t)}}),function(){var t=[];BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base.call(this);var t=this.findElem("under");this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}},isDivEnough:function(){return!1},_createUnder:function(){return $('<iframe frameBorder="0"/>')},_getUnder:function(){if(this._under)return this._under;var e=t.pop();return e&&(this._underInPool=!1),this._under=e||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem):t.prependTo(this.domElem)},_detachUnder:function(){var e=this._under;t.push(e.detach()),this._under=null,this._underInPool=!0},destruct:function(){return this._underInPool&&t.pop(),this.__base.apply(this,arguments)}})}(),BEM.DOM.decl("popup",{_createUnder:function(){var t,e=$(".i-ua_browser_yandexbrowser").length||$(".i-ua_browser_chromemobile").length||/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(e)return $("<div></div>");try{t=location.hostname!==document.domain}catch(i){t=!0}return $("<iframe"+($.browser.msie&&$.browser.version<9?' frameborder="0"':"")+($.browser.msie&&t?" src=\"javascript:void(function(){document.open();document.write('&lt;script&gt;document.domain=\\'"+document.domain+"\\'&lt;/script&gt;');document.close();})()\"":"")+"/>")}}),x.amd.define("statlog",function(){var t=null,e="//clck.yandex.ru/counter/",i="dtype=%s/session_id=%s/events=%s/*",n={type:"show",root:"testRoot",statDataAttr:"statlog",dataNoRedirKey:"statlog-noredir",doc:null,sendAtWill:!0,dataReadyKey:"statlog-ready",clickEvent:"mousedown",skipVisibleCheck:!1,statEnabled:!1,clickCounter:function(t,e){e=e||null,window.cp(o()+"."+t,e)}},o=function(){return"undefined"!=typeof Lego&&Lego.params&&Lego.params.statRoot?Lego.params.statRoot:n.root},s=function(e){var i=[];return t&&(i=JSON.stringify([{event:e.type,"parent-path":o(),blocks:t.children}])),i},r=function(){return"undefined"!=typeof Lego&&Lego.params?Lego.params.statEnabled:n.statEnabled},a=function(){$(n.doc||document).on(n.clickEvent,"*[data-"+n.statDataAttr+"]",function(t){if(r()){var e=$(this).data(n.statDataAttr),i=$(this).data(n.dataNoRedirKey);e&&(n.clickCounter(e,i?null:this),i&&(t.preventDefault(),t.stopPropagation()))}})};return a(),{params:n,getSingleRequest:function(t){return x.stringf(e+i,t.project,t.showId,JSON.stringify([{event:t.event,"parent-path":t.path.substr(0,t.path.lastIndexOf(".")),blocks:[{ctag:t.path.substr(t.path.lastIndexOf(".")+1)}]}]))},singleLog:function(t){var e=this.getSingleRequest({project:"clck",showId:this.getShowID(),event:"show",path:o()+"."+t}),i=new Image;i.src=e},bulkLog:function(e){var i=t?t:t={},o=this;return x.forEach(e.split("."),function(t){var e=function(e){return e.ctag===t};i.children||(i.children=[]);var n=x.filter(i.children,e);n.length||i.children.push({ctag:t}),i=x.filter(i.children,e)[0]}),n.sendAtWill&&o.send(),this},log:function(t){var e=$.support.cors?this.bulkLog:this.singleLog;return"undefined"!=typeof t&&r()?e.call(this,t):void 0},logByDocument:function(t){var e=x.beget(n,t),i=this,o="data-"+e.statDataAttr,s=o.substr(5),r="*["+o+"]",a=e.doc?$(e.doc).find(r):$(r);$(a).each(function(){if($(this).is(":visible")||e.skipVisibleCheck){if(!o.match(/^data-/))throw new Error("data attribute expected as statAttr");var t=$(this).data(s);$(this).data(e.dataReadyKey)||(i.log(t),$(this).data(e.dataReadyKey,t))}})},dumpDATA:s,getShowID:function(){var t="";return"undefined"!=typeof Lego&&Lego.params&&Lego.params.msid&&(t=Lego.params.msid),t},send:x.debounce(function(){t&&$.ajax({type:"POST",url:e,data:x.stringf("/"+i,"clck",this.getShowID(),s(n)),success:function(){t=null}})},1e3)}}),function(){"use strict";x.amd.require("statlog",function(t){x.Component.extend({id:"statlogger",init:function(){var e=function(){t.logByDocument({type:"click",root:"undefined"!=typeof Lego&&Lego.params&&Lego.params.statRoot?Lego.params.statRoot:"/testMordaRoot"})};Lego.params["show-counters"]&&(e(),$(window).on("resize",function(){e()}))}})})}(home),x.amd.require("statlog",function(t){BEM.DOM.decl("b-sethome",{onSetMod:{js:function(){var e=this,i=this.__self,n=$(".b-line_bar");if(e.on=i._hasStorage(),!e.on)return e.elem("close").addClass("i-hidden"),e.domElem.removeClass("i-hidden"),void n.removeClass("lifting");if(!i._hasBlock()){var o=e.findElem("close");if(o){var s=o.data(t.params.statDataAttr);t.log(s),o.data(t.params.dataReadyKey,s)}e.bindTo("close","leftclick",function(){e.domElem.addClass("i-hidden"),n.addClass("lifting"),i._blockSetHome(),$(".b-line_bar").removeClass("has_sethome"),$(window).trigger("b-line_bar-update")}),e.domElem.removeClass("i-hidden"),n.removeClass("lifting")}}}},{_hasStorage:function(){return!home.disabledLS},_blockSetHome:function(){home.localStorage.setItem("shforbidden",1)},_hasBlock:function(){return!!home.localStorage.getItem("shforbidden")}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"common"},{onSetMod:{js:function(){this.__base(),!this.on||this.__self._hasBlock()}}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"ff"},{onSetMod:{js:function(){function t(){i.popup.hide(),$(document).unbind("focus",t),i.dragIcon.unbind("mousedown",e)}function e(){setTimeout(function(){$(document).focus(t)},500)}if(this.__base(),this.on&&!this.__self._hasBlock()){var i=this;i.dropdown=i.findBlockInside("dropdown"),i.popup=i.findBlockInside({block:"popup",modName:"sethome",modVal:"fx"}),i.dragIcon=$(".b-sethome__drag-icon"),i.popup.on({show:function(){i.dragIcon.bind("mousedown",e)},hide:function(){$(document).unbind("focus",t),i.dragIcon.unbind("mousedown",e)}}),i.bindTo("toggle-popup","leftclick",function(){i.popup.isShown()||i.popup.show(i.dropdown.elem("switcher"))})}}}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"ie"},{onSetMod:{js:function(){if(this.__base(),this.on&&!this.__self._hasBlock()){var t=this;t.homeUrl=location.protocol+"//"+location.hostname+"/",t._getHomePage(),t.bindTo("link","leftclick",function(){t._setHomePage()})}}},_setHomePage:function(){try{return document.body.style.behavior="url(#default#homepage)",document.body.setHomePage(this.homeUrl),this._getHomePage(),!1}catch(t){}},_getHomePage:function(){var t=document.body,e=Lego.params["lang-zone"]||"ru";return t.style.behavior="url(#default#homepage)",t.isHomePage("http://yandex."+e+"/")||t.isHomePage("http://www.yandex."+e+"/")||t.isHomePage(this.homeUrl)?(this.setMod("show","bar"),!0):void 0}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"chrome"},{onSetMod:{js:function(){var e=this,i="chrome_ext";e.__base(),e.on&&!e.__self._hasBlock()&&(e.params["chrome-exp"]&&(i+="_exp"),e.bindTo("link","leftclick",function(){return window.chrome.webstore.install(e.domElem.data("inlinelink"),function(){e.domElem.addClass("i-hidden"),t.log("head.sethome."+i+".yes")},function(){t.log("head.sethome."+i+".no")}),!1}))}}})}),$(function(){BEM.DOM.init()}),BEM.DOM.decl("dropdown",{onSetMod:{js:function(){var t=this,e=this.params,i=this._popup=this.findBlockOn(this.elem(e.popupElem),"popup").on("show",function(){t.setMod("action","open").trigger("show")}).on("hide",function(){t.setMod("action","closed").trigger("hide")});e.popupMethods.map(function(e){t[e]=i[e].bind(i)});var n=this.params.switcherBlock,o=this.elem("switcher");n&&this.findBlockOn(o,n).on("click",function(){i.toggle(o)})}},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}},destruct:function(){this._popup.destruct.apply(this._popup,arguments),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("switcher","leftclick",function(){this.params.switcherBlock||this._popup.toggle(this.elem("switcher"))})}}),BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base(),this._tailPos={}}},_calcTailPos:function(t){var e=t.to,i=this._positions[t.key],n=t.tail.axis,o={};return"top"==e||"bottom"==e?o.left=this._calcTailLeft(n,i):("left"==e||"right"==e)&&(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,c=o.top-e.top,u=e.top+r.height-(o.top+n.height);return c>0&&(i+=c,a-=c),u>0&&(a-=u),"middle"==t?(a-=s,i+=a/2):"bottom"==t&&(a-=s,i+=a),0>i&&(i=0),i},_calcTailLeft:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,c=r.width,u=e.left+r.width-(o.left+n.width);return a>0&&(i+=a,c-=a),u>0&&(c-=u),"center"==t?(c-=s,i+=c/2):"right"==t&&(c-=s,i+=c),i},_calcOffsetByTail:function(t){var e=this.params.tail,i=e.height,n={};switch(t.to){case"top":n={top:-i};break;case"bottom":n={top:i};break;case"right":n={left:i};break;case"left":n={left:-i}}return n},_calcTailOffset:function(t){var e={},i=t.to,n=t.tail,o=n.offset,s=n.axis;return o?("top"==i||"bottom"==i?(e.left=0,"left"==s?e.left+=o.left:"center"==s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"==s&&(e.left-=o.right)):("left"==i||"right"==i)&&(e.top=0,"top"==s?e.top+=o.top:"middle"==s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"==s&&(e.top-=o.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),function(t,e){var i,n={},o=BEM.decl("i-loader",{},{load:function(t,s,r,a,c){"string"!=typeof s&&(c=a,a=r,r=s,s=t),void 0===c&&void 0!==a&&"function"!=typeof a&&(c=a,a=void 0);var u=n[t];if(u)return void(u.successFns?(u.successFns.push(r),a&&u.errorFns.push(a)):this.afterCurrentEvent(function(){r()}));var l=document,h=l.createElement("script"),d=function(){o._error(t)},f=s.split("."),p=f.splice(-2,2);c&&p.unshift("string"==typeof c?c:BEM.blocks["i-global"].param("lang")),e.browser.msie&&e.browser.version<=8&&p.splice(-1,0,"ie"),h.type="text/javascript",h.charset="utf-8",h.src=f.concat(p).join("."),h.onerror=d,this.afterCurrentEvent(function(){(i||(i=e("head")[0])).insertBefore(h,i.firstChild)}),n[t]={successFns:[r],errorFns:a?[a]:[],timer:setTimeout(d,2e4)}},loaded:function(e){var i=n[e.id];if(clearTimeout(i.timer),e.js&&e.js(),e.css&&o._appendCss(e.css),e.hcss){var s=[],r=t._ycssjs;e.hcss.forEach(function(t){if(r){if(t[0]in r)return;r(t[0])}s.push(t[1])}),s.length&&o._appendCss(s.join(""))}if(e.hcss2){var a,c=e.hcss2,u=document,l=u.createElement("div"),h=u.body,d="ycssjs_",s=[];l.style.position="absolute",h.insertBefore(l,h.lastChild.nextSibling),a=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,Object.keys(c).forEach(function(t){l.className=d+t,"-"===a.top.charAt(0)||s.push(c[t])}),a=null,h.removeChild(l),s.length&&o._appendCss(s.join(""))}for(var f,p=i.successFns;f=p.shift();)f();delete i.successFns},_error:function(t){var e,i=n[t],o=i.errorFns;for(clearTimeout(i.timer);e=o.shift();)e();delete n[t]},_appendCss:function(t){var e=document.createElement("style");e.type="text/css",i.insertBefore(e,i.firstChild),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}})}(this,jQuery),function(t,e){t.DOM.decl("b-head-stripe",{onSetMod:{js:function(){var t=this.params.theme;this.hasMod("theme")?this._show():this._loadTheme(t,this._show)}},_install:function(t){t.preventDefault();var e=this.params.download_url;e&&(window.location=e)},_close:function(t){t.preventDefault(),t.stopPropagation();var e=this.params.close_url;e&&((new Image).src=e),this.domElem.animate({"margin-top":"-20px"},500),this.setMod("state","closed")},_loadTheme:function(i,n){if(i){var o="b-head-stripe_theme_"+i,s=e.param("lego-static-host")+"/blocks-desktop/b-head-stripe/_theme/b-head-stripe_theme_"+i+".bembundle.js";t.blocks["i-loader"].load(o,s,n)}},_show:function(){this._generateCounter().delMod("state")},_generateCounter:function(){var t=this.params.counter;return t&&((new Image).src=t),this}},{live:function(){return this.liveBindTo("close","leftclick",function(t){this._close(t)}),this.liveBindTo("leftclick",function(t){this._install(t)}),!1}})}(BEM,BEM.blocks["i-global"],jQuery),BEM.DOM.decl("b-head-stripe",{onSetMod:{js:function(){"use strict";this.__base.apply(this,arguments)}},_install:function(t){"use strict";var e,i;t.preventDefault(),t.target.href?(e=this.params.set_cntr,i=t.target.href):(e=this.params.stripe_cntr,i=this.params.stripe_url),e&&cp(e),setTimeout(function(){i?window.location=i:this.__base.apply(this,arguments)},200)},_close:function(t){"use strict";this.__base.apply(this,arguments),$(window).trigger("popupredraw.lego");var e=$(".popup_visibility_visible:not(.b-topbar__popup)");e.length&&e.bem("popup").hide(),t.preventDefault(),t.stopPropagation()},_changeTheme:function(){},_generateCounter:function(){"use strict";var t=this.__base,e=arguments,i=this;return home.delayManager.add("timeBanner.notshown",function(){t.apply(i,e)}),this}}),BEM.HTML.decl("b-icon",{onBlock:function(t){var e,i={src:"//yandex.st/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},n=t.params(),o=["alt","width","height"];for(n.url&&(i.src=n.url);e=o.shift();)n[e]&&(i[e]=n[e]);t.tag("img").attrs(i)}}),$(function(){function t(t){this.callback=t,this.items=0,this.results={}}if("undefined"!=typeof diskUploaderParams){t.prototype.add=function(t,e){var i=this;return this.items++,function(){var n=e.apply(e,arguments);i.check(t,n)}},t.prototype.check=function(t,e){this.results[t]=e,this.items--,0===this.items&&this.callback.call(this,this.results)},t.prototype.done=function(){this.callback.call(this,this.results)};var e=function(){this.sk=diskUploaderParams.sk,this.files=[],this.statusesTimers={},this.areaShown=!1,this.wrapTimer=null,this.uploadQueue=[],this.maxSize=314572800,this.disabled=!1,this.forceDialogItemTemplate=ya.template('<div class="b-disk-uploader__force_item"><label class="b-disk-uploader__force_label" for="[% id %]"><input type="checkbox" id="[% id %]" class="b-disk-uploader__force_box">[% text %]</label></div>');var t=ya.template('<a href="[% href %]" class="b-link b-disk-uploader__go">[% text %]</a>');this.goLink=t({href:diskUploaderParams.uploadLinkUrl,text:diskUploaderParams.uploadLinkText})};e.prototype.push=function(t){this.files.push({file:t,status:0})},e.prototype.store=function(){for(var e,i=new t(function(t){var e,i,o=[],s=0;for(i in t)t.hasOwnProperty(i)&&(e=t[i],2===e.status&&o.push(e),s+=e.file.size);if(o.length)n.showForceDialog(o);else{var r=ya.uid(),a=0;n.uploadQueue.push(r);for(i in t)t.hasOwnProperty(i)&&(t[i].queueId=r,a++);n.uploadFiles()}}),n=this,o=0,s=this.files.length;s>o;o++)e=this.files[o],(0===e.status||3===e.status)&&(e.id||(e.id=ya.uid()),this.storeFile(e,i.add(e.id,this.storeFileHandler)));n.hideArea()},e.prototype.storeFile=function(t,e){if(3===t.status)return void e(t);$.ajax({url:"https://mail.yandex."+diskUploaderParams.zone+"/api/disk_handler?handle=store&upload_from_main=1&sk="+this.sk+"&path=/disk/"+t.file.name+(t.force?"&force=1":""),method:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(i){i.oid&&i.upload_url?(t.status=3,t.oid=i.oid,t.upload_url=i.upload_url):47===i.code&&(t.status=2),e(t)},failure:function(){t.status=-1,e(t)}}),t.status=1},e.prototype.storeFileHandler=function(t){return t},e.prototype.uploadFiles=function(){for(var t,e=0,i=0,n=this.files.length;n>i;i++)t=this.files[i],3===t.status&&(this.uploadFile(t),this.checkTimer(t,1e3,!1),e++);1===e?csh_ifmsid(diskUploaderParams.statUploadOne):e>1&&csh_ifmsid(diskUploaderParams.statUploadMany),this.updateStatuses()},e.prototype.uploadFile=function(t){var e=new FormData,i=this;e.append("file",t.file),t.xhr=$.ajax({url:t.upload_url,data:e,cache:!1,contentType:!1,processData:!1,type:"POST",error:function(){t.status>0&&(t.status=-1,i.updateStatuses())}}),t.status=4},e.prototype.showInfoDialog=function(t){this.disabled=!0,this.infoPopupTitle.text(diskUploaderParams[t?"incorrectFiles":"incorrectFilesPart"]),this.infoPopup.show()},e.prototype.showForceDialog=function(t){for(var e,i="",n=0,o=t.length;o>n;n++)e=t[n],i+=this.forceDialogItemTemplate({id:e.id,text:e.file.name});$(document).trigger("popupsClose.lego");var s=$(".popup_visibility_visible:not(.b-topbar__popup)"),r=$(".i-popup_visibility_visible");s.length&&s.bem("popup").hide(),r.length&&r.bem("i-popup").hide(),this.disabled=!0,this.forcePopupContent.html(i),this.forcePopup.show(),1===o&&($(".b-disk-uploader__force_box").attr("checked","checked").hide(),$(".b-disk-uploader__force_label").css("margin-left",0)),this.fixParanja()},e.prototype.collectForceFiles=function(){var t=this;$(".b-disk-uploader__force_box",this.forcePopupContent).each(function(){var e=t.gitFileInfo(this.id);e&&2===e.status&&(this.checked?(e.status=0,e.force=!0):e.status=-2)}),this.store(),this.forcePopup.hide()},e.prototype.gitFileInfo=function(t){for(var e=0,i=this.files.length;i>e;e++)if(this.files[e].id===t)return this.files[e];return null},e.prototype.checkTimer=function(t,e,i){var n=this;this.statusesTimers[t.id]=setTimeout(function(){i?n.checkFocus(t):n.checkStatus(t)},e)},e.prototype.focusEvents=function(){this.windowFocused=!0;var t=this;$.browser.msie?($(document).bind("focusout",function(){t.windowFocused=!1}),$(document).bind("focusin",function(){t.windowFocused=!0})):($(window).focus(function(){t.windowFocused=!0}),$(window).blur(function(){t.windowFocused=!1}))},e.prototype.checkFocus=function(t){var e=this;if(this.windowFocused)this.checkStatus(t);else{var i=function(){$.browser.msie?$(document).unbind("focusin",i):$(window).unbind("focus",i);var n=Math.round(4e3*Math.random());setTimeout(function(){e.checkStatus(t)},n)};$.browser.msie?$(document).bind("focusin",i):$(window).bind("focus",i)}},e.prototype.checkStatus=function(t){var e=this;$.ajax({url:"https://mail.yandex."+diskUploaderParams.zone+"/api/disk_handler?handle=status&sk="+this.sk+"&oid="+t.oid,method:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(i){t.mpfs=i,t.status>0&&("WAITING"===t.mpfs.status||"EXECUTING"===t.mpfs.status?e.checkTimer(t,2e3,!0):"DONE"===t.mpfs.status?(t.status=5,t.mpfs.progress=100):t.status=-1,e.updateStatuses())},failure:function(){t.status=-1,e.updateStatuses()}})},e.prototype.updateStatuses=function(){for(var t,e,i,n=0,o=0,s=[],r=0,a=0,c=0,u="",l=0,h=this.uploadQueue.length;h>l;l++){e=this.getFilesByQueue(this.uploadQueue[l]),n+=e.length;for(var d=0,f=e.length;f>d;d++)i=e[d],4===i.status?(t=i.mpfs&&i.mpfs.progress?i.mpfs.progress:0,o+=t,s.push(i),r++):5===i.status?(o+=100,a++):-1===i.status&&(u=i.file.name,c++)}if(r>0)this.showStatusesWrap(),this.showBg(),this.showCancel(),this.progress.css("width",Math.floor(o/n)+"%"),this.title.removeClass("b-disk-uploader__statuses_title_error"),this.title.html(1===r?ya.htmlFilter(s[0].file.name):diskUploaderParams.uploadingFiles.replace("%1",a).replace("%2",n));else{var p,m=!1;1===c?(p=diskUploaderParams.errorFile.replace("%1",ya.htmlFilter(u)),m=!0):c>1?(p=diskUploaderParams.errorFiles,m=!0):p=diskUploaderParams.loaded,this.finishUpload(p,m)}},e.prototype.finishUpload=function(t,e){this.uploadQueue=[],this.hideStatusesWrap(),this.hideBg(),this.hideCancel(),this.title.removeClass("b-disk-uploader__statuses_title_error"),"undefined"!=typeof e&&e?this.title.addClass("b-disk-uploader__statuses_title_error"):t+=this.goLink,this.title.html(t)},e.prototype.getFilesByQueue=function(t){for(var e=[],i=0,n=this.files.length;n>i;i++)this.files[i].queueId===t&&e.push(this.files[i]);return e},e.prototype.addCancelEvent=function(){var t,e=this;this.cancel.click(function(){for(var i=0,n=e.files.length;n>i;i++)t=e.files[i],t.xhr&&5!==t.status&&(t.status=-3,t.xhr.abort(),clearTimeout(e.statusesTimers[t.id]));return e.finishUpload(diskUploaderParams.cancel,!0),!1})},e.prototype.addCancelDialogEvent=function(){var t=this;this.infoPopup.on("hide",function(){t.disabled=!1}),this.forcePopup.on("hide",function(){t.disabled=!1,t.clearUploadQueue(),t.unfixParanja()}),$("#diskUploadCancel").click(function(){t.forcePopup.hide()})},e.prototype.clearUploadQueue=function(){for(var t,e=0,i=this.files.length;i>e;e++)t=this.files[e],(2===t.status||3===t.status)&&(t.status=-3)},e.prototype.fixParanja=function(){$(".i-popup__under_type_paranja").addClass("b-disk-force-popup__under"),$(".b-disk-force").closest(".i-popup").addClass("b-disk-force-popup"),this.hideBanner()},e.prototype.unfixParanja=function(){$(".i-popup__under_type_paranja").removeClass("b-disk-force-popup__under"),$(".b-disk-force").closest(".i-popup").removeClass("b-disk-force-popup"),this.showBanner()},e.prototype.checkFileTypes=function(t){if(!t.types)return!1;var e=!1;if(t.types.length)for(var i=0,n=t.types.length;n>i;i++)"Files"===t.types[i]&&(e=!0);return e},e.prototype.checkFiles=function(e){if(e.files&&this.checkFileTypes(e)){var i=new t(function(t){var e=0,i=0;for(var o in t)t.hasOwnProperty(o)&&(++e,t[o].status!==!1&&(++i,n.push(t[o].file)));e===i&&e>0?n.store():n.showInfoDialog(0===i)}),n=this;if(e.files.length)for(var o=0,s=e.files.length;s>o;o++)this.isRegularFile(e.files[o],i.add("file"+o,this.checkFileHandler));else e.types.length&&i.done()}},e.prototype.isRegularFile=function(t,e){var i;try{i=t.size}catch(n){i=0}if(0===i)return void setTimeout(function(){e(!1,t)},0);if(t.size>102400)return void setTimeout(function(){e(!0,t)},0);if(!window.FileReader||window.opera&&navigator.platform.toLowerCase().indexOf("mac")>-1&&"12.00"===window.opera.version())setTimeout(function(){e(null,t)},0);else try{var o=new FileReader;o.onerror=function(){o.onloadend=o.onprogress=o.onerror=null,e(!1,t)},o.onloadend=o.onprogress=function(i){o.onloadend=o.onprogress=o.onerror=null,"loadend"!==i.type&&o.abort(),e(!0,t)},o.readAsDataURL(t)}catch(n){setTimeout(function(){e(!1,t)},0)}},e.prototype.checkFileHandler=function(t,e){return{file:e,status:t}},e.prototype.stopLeaveTimer=function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)},e.prototype.startLeaveTimer=function(){this.stopLeaveTimer(),this.leaveTimer=setTimeout(function(){this.hideArea()}.bind(this),50)},e.prototype.init=function(){if(window.File&&window.FileList&&window.FileReader&&$(".b-disk-uploader").length){this.uploaderArea=$(".b-disk-uploader"),this.innerArea=$(".b-disk-uploader__inner"),this.forcePopup=$(".b-disk-force").bem("popup"),this.forcePopupContent=$(".b-disk-uploader__force_content"),this.infoPopup=$(".b-disk-info").bem("popup"),this.infoPopupTitle=$(".b-disk-uploader__info_title"),this.statusesWrap=$(".b-disk-uploader__statuses_wrap"),this.progress=$(".b-disk-uploader__statuses_progress"),this.bg=$(".b-disk-uploader__statuses_bg"),this.title=$(".b-disk-uploader__statuses_title"),this.cancel=$("#diskCancel");var t=this;$(window).bind({dragenter:function(e){return!t.disabled&&t.checkFileTypes(e.originalEvent.dataTransfer)?(t.areaShown||t.showArea(),!1):void 0},dragover:function(){return t.stopLeaveTimer(),!1},dragleave:function(){return!1},drop:function(e){return t.disabled||t.checkFiles(e.originalEvent.dataTransfer),!1}}),this.uploaderArea.bind("dragleave",this.startLeaveTimer.bind(this)),this.uploaderArea.click(function(){return t.hideArea(),!1}),$(document).mouseout(function(e){var i=e.relatedTarget||e.toElement;i&&"HTML"!==i.nodeName||t.hideArea()}),$(document).mouseover(function(){t.areaShown&&t.hideArea()}),$("#diskUploadOk").click(function(){return t.collectForceFiles(),!1}),$("#diskUploadClose").click(function(){return t.disabled=!1,t.infoPopup.hide(),t.store(),!1}),this.focusEvents(),this.addCancelEvent(),this.addCancelDialogEvent()}},e.prototype.hideBanner=function(){window.home&&home.leftBanner&&home.leftBanner.hideBanner&&home.leftBanner.hideBanner("b-disk-uploader")},e.prototype.showBanner=function(){window.home&&home.leftBanner&&home.leftBanner.hideBanner&&home.leftBanner.showBanner("b-disk-uploader")},e.prototype.showArea=function(){this.areaShown||(this.uploaderArea.addClass("b-disk-uploader__highlighted"),this.hideBanner(),this.areaShown=!0)},e.prototype.hideArea=function(){this.areaShown&&(this.uploaderArea.removeClass("b-disk-uploader__highlighted"),this.showBanner(),this.areaShown=!1)},e.prototype.showStatusesWrap=function(){this.wrapTimer&&clearTimeout(this.wrapTimer),this.statusesWrap.hasClass("i-hidden")&&(this.statusesWrap.css({bottom:-44}).removeClass("i-hidden").animate({bottom:0},500),this.hideBanner())},e.prototype.hideStatusesWrap=function(){var t=this;this.statusesWrap.hasClass("i-hidden")||(this.wrapTimer=setTimeout(function(){t.statusesWrap.animate({bottom:-44},500,function(){t.statusesWrap.css({bottom:0}).addClass("i-hidden"),t.showBanner()})},1e4))},e.prototype.showBg=function(){this.bg.removeClass("i-hidden")},e.prototype.hideBg=function(){this.bg.addClass("i-hidden")},e.prototype.showCancel=function(){this.cancel.removeClass("i-hidden")},e.prototype.hideCancel=function(){this.cancel.addClass("i-hidden")};var i=new e;i.init()}}),function(){"use strict";BEM.DOM.decl({name:"popup",modName:"focus",modVal:"capture"},{_onShown:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex","0").focus()},_onHidden:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("tabindex")}})}(),function(){function t(){var t=document.visibilityState||document.webkitVisibilityState||document.msVisibilityState;return"prerender"===t}function e(){return"//"+(BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru")+"/click"}function i(){var t,i="/dtype=stred/pid=1/cid=72202";i+="/reqid="+l.reqid,i+="/path=690.1033";var o={1036:h.domainLookupStart-d,1037:h.domainLookupEnd-h.domainLookupStart,1038:h.connectEnd-h.connectStart,1039:h.responseStart-h.requestStart,1040:h.responseEnd-h.responseStart,1040.318:h.responseEnd-d};for(t in _)_[t]>0?o[t]=Math.min(f*m,_[t]):0===_[t]&&(o[t]=f*m);for(t in l.vars)l.vars.hasOwnProperty(t)&&(o[t]=l.vars[t]);for(t in o)o[t]<0&&delete o[t];o[1042]=encodeURIComponent(navigator.userAgent),i+="/vars="+n(o),i+="/slots="+(u("exp.data")||"")+"/*",(new Image).src=e()+i}function n(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return e.join(",")}function o(){var e=-1;if(t())return e;if(window.chrome&&"function"==typeof window.chrome.loadTimes&&d){var i=window.chrome.loadTimes();e=i.firstPaintTime?Math.floor(1e3*i.firstPaintTime)-d:0}return e}function s(){var e=-1;return t()?e:("undefined"!=typeof h.msFirstPaint&&(e=h.msFirstPaint?h.msFirstPaint-d:0,h.msFirstPaint&&h.responseStart&&h.msFirstPaint<h.responseStart&&(e=-1)),e)}function r(){var e=-1;if(t())return e;if(window.chrome&&"function"==typeof window.chrome.loadTimes&&d){var i=window.chrome.loadTimes();e=i.firstPaintAfterLoadTime?Math.floor(1e3*i.firstPaintAfterLoadTime)-d:0}return e}function a(){if(_[1051]>0){if(_[1041.659]>0)return!0;if(_["1041.660"]>0&&_["1050.660"]>0)return!0}}function c(){++p,_[1041.659]=s(),_["1041.660"]=o(),_["1050.660"]=r(),_[1041.659]>0?_[1041.318]=_[1041.659]:_["1041.660"]>0&&(_[1041.318]=_["1041.660"]),_[1041.318]>0&&(_[1041.906]=_[1041.318]-(h.domainLookupStart-d),_[1041]=_[1041.318]-(h.responseStart-d)),l||(l=u("b-timing.data")),l&&(a()||p===m)?i():setTimeout(c,f)}function u(t){return home&&home.getData&&home.getData(t)}var l,h=window.performance&&window.performance.timing;if(h&&h.navigationStart){var d=h.navigationStart,f=1e3,p=0,m=100,_={1041.659:-1,"1041.660":-1,"1050.660":-1,1041:-1,1041.906:-1,1041.318:-1,1051:0};$(function(){_[1051]=+new Date-d}),setTimeout(c,f)}}(),function(t){t.getData=function(e,i){var n,o,s,r,a="export",c=e.split("."),u=c.length;if(u>1){for(o=t[a]||{},s=0;u>s;s++)if(n=c[s],o=o[n],"undefined"==typeof o)return"undefined"==typeof o?i:o;return"undefined"==typeof o?i:o}return a="export",r=t&&t[a]&&t[a][e],"undefined"==typeof r?i:r}}(home),$(function(){var t=$(".b-yabrowser-notice"),e=$("body");if(t.length){var i=t.data(),n=i.show,o=i.close,s=i.bk;if(home.localStorage.getItem("znotice")===s)return o&&((new Image).src=o),void home.localStorage.clear("znotice");n&&((new Image).src=n),$.browser.webkit&&(window.fifa2014Urls||window.olymp2014Urls)&&$(".b-yabrowser-notice").css({"-webkit-transform":"translateZ(0)",transform:"translateZ(0)"}),$(".b-yabrowser-notice__link").click(function(){home.localStorage.setItem("znotice",s)}),setTimeout(function(){t.fadeIn(500),$(".b-yabrowser-notice__close").click(function(){return t.addClass("i-hidden"),e.removeClass("b-page_has_yabro-notice"),o&&((new Image).src=o),!1})},100)}}),$(function(){var t,e;if("undefined"!=typeof Widget){var i=function(){t||home&&home.getData&&(t=home.getData("b-domik-reloaded.reload-url"),e=home.getData("b-domik-reloaded.empty"))},n=3e5,o={reload:function(){i(),t&&$.get(t,function(t){if(t.Mail.Logged){var i=t.Mail.count,n=t.Mail.fullcountaccus,o=Number(i)?"<b>"+String(i)+" "+n+"</b>":e;$(window).trigger("mailcount",{count:i,word:i?n:e}),$(".b-topbar__mail .b-topbar__notifier_type_mail .b-link__inner").html(o),$(".b-topbar__body .b-topbar__notifier_type_mail .b-link__inner").html(Number(i)?"<b>"+String(i)+"</b>":e),s()
}},"json")},id:"domik"},s=function(){setTimeout(function(){Widget.prototype.iReload.call(o)},n)};s()}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="";return function(e,i,n){return e.length>i+n?e.substring(0,i-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var i,n=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",c=~t.indexOf(a),u=function(){for(var e,i=/\&#\d+;/gi;e=i.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(c)return t;for(;~t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!c&&u(),s.forEach(function(e){i=o>e[0]?o:e[0],n.push({tag:"span",elem:"span",content:l(t.slice(o,i))}),n.push({tag:"em",elem:"em",content:l(t.slice(i,o=e[1]))})},this),n.push({tag:"span",elem:"span",content:l(t.slice(o))}),n}}),function(){var t,e,i=function(){for(var e,i=0;e=t[i++];)e.val(e.elem("control").val())},n=function(t){try{return t.activeElement}catch(e){}};BEM.DOM.decl("input",{onSetMod:{js:function(){var o=this,s=o.elem("control"),r=n(o.__self.doc[0]),a=o.params.autoFocus&&!(r&&$(r).is("input, textarea"));o._val=s.val(),(r===s[0]||a)&&(o.setMod("focused","yes")._focused=!0),e||(t=[],e=o.channel("sys").on({tick:i,idle:function(){e.un("tick",i)},wakeup:function(){e.on("tick",i)}})),o._instanceIndex=t.push(o.bindTo(s,{focus:o._onFocus,blur:o._onBlur}))-1,o.on("change",o._updateClear)._updateClear(),o.bindTo("box","click",function(){o.setMod("focused","yes")})},disabled:function(t,e){this.elem("control").attr("disabled","yes"===e)},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var i="yes"==e;i?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(i?"focus":"blur")})}},onElemSetMod:{message:{visibility:function(t,e,i){var n=this,o=n.getMod(t,"type");if(o){var s=!0;i||n.elem("message","type",o).each(function(){this!=t[0]&&n.hasMod($(this),"visibility","visible")&&(s=!1)}),s&&n.toggleMod("message-"+o,"yes","","visible"===i)}}}},_onClearClick:function(){this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.val("",{source:"clear"}).setMod("focused","yes")},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){if("undefined"==typeof t)return this._val;if(this._val!=t){var i=this.elem("control");i.val()!=t&&i.val(t),this._val=t,this.trigger("change",e)}return this},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()==t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},name:function(){return this.elem("control").attr("name")},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._focused=!1,this.delMod("focused")},_focus:function(){var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},_blur:function(){this.elem("control").blur()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),t.splice(this._instanceIndex,1);for(var e,i=this._instanceIndex;e=t[i++];)--e._instanceIndex}},{live:function(){return this.liveBindTo("clear","leftclick",function(t){this._onClearClick(),t.stopPropagation()}),!1}})}(),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&38===t.keyCode&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}}),function(){var t,e=0,i=!1,n=0,o=BEM.channel("sys"),s=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){n=0,i&&(i=!1,o.trigger("wakeup"))}),this._tick()},_tick:function(){var r=this;o.trigger("tick",{counter:e++}),!i&&(n+=s)>3e3&&(i=!0,o.trigger("idle")),t=setTimeout(function(){r._tick()},s)}}).start()}(),BEM.DOM.decl("button",{onSetMod:{js:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href"),e.attr("disabled",t),this._isFocusable="a button".indexOf(e[0].tagName.toLowerCase())>-1},focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isFocusable&&(this._isControlFocused()||this.domElem.focus()),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isFocusable&&this._isControlFocused()&&this.domElem.blur(),this.afterCurrentEvent(function(){this.trigger("blur")})}},disabled:function(t,e){var i="yes"==e,n=this.domElem;this._href&&(i?n.removeAttr("href"):n.attr("href",this._href)),i&&n.keyup(),this.afterCurrentEvent(function(){n.attr("disabled",i)})},pressed:function(t,e){this.setMod("focused","yes"),this.isDisabled()||this.trigger("yes"==e?"press":"release")},hovered:{"":function(){this.delMod("pressed")}},"*":function(t){return this.isDisabled()&&"hovered pressed".indexOf(t)>-1?!1:void 0}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_isControlFocused:function(){try{return this.containsDomElem($(document.activeElement))}catch(t){return!1}},_onKeyDown:function(t){var e=t.keyCode;13!=e&&32!=e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32==e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(t){this._onClick(t)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(e){var i=t[e.type];this.setMod(i.name,i.val||"")}).liveBindTo("mousedown",function(e){var i=t[e.type];1==e.which&&this.setMod(i.name,i.val||""),this._isControlFocused()&&e.preventDefault()})}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("button2",{onSetMod:{js:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")},disabled:function(t,e){var i="yes"===e,n=this.domElem;this._href&&(i?n.removeAttr("href"):n.attr("href",this._href)),this.afterCurrentEvent(function(){n.attr("disabled",i)})},pressed:function(t,e){return this.isDisabled()?!1:void this.trigger("yes"===e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)})}}),BEM.DOM.decl("button2",{onSetMod:{js:function(){this.__base.apply(this,arguments)},focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isControlFocused()&&this._getControl().blur(),this.afterCurrentEvent(function(){this.trigger("blur")})}},disabled:function(t,e){this.__base.apply(this,arguments),"yes"===e&&this.domElem.keyup()},hovered:function(t,e){return this.isDisabled()?!1:void(""===e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},_onKeyDown:function(t){var e=t.keyCode;13!==e&&32!==e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32===e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){this.__base.apply(this,arguments);var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}},e=$.browser.msie&&"8.0"===$.browser.version;this.liveBindTo("mouseover mouseout mouseup focusin focusout",function(i){var n=t[i.type];this.setMod(n.name,n.val||""),!e||this._href||"mouseup"!==i.type&&"mouseout"!==i.type||this.domElem.height()}).liveBindTo("mousedown",function(e){var i=t[e.type];1===e.which&&this.setMod(i.name,i.val||"")})}}),BEM.DOM.decl({name:"button2",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this.params.form||this.findBlockOutside("suggest2-form"),this._lastSubmitTime=0,this._lastBlurTime=0,this._clear()}}},getDefaultParams:function(){return{submitBySelect:!1,updateOnEnterByKeyboard:!0,onFocus:"request",requestOnEmptyInput:!1}},destruct:function(){this.getItems().forEach(function(t){t.destruct()})},init:function(){var t=this;t.params.form.on("submit",function(){t._lastSubmitTime=(new Date).getTime(),t._currentSearchCGIParams?t._currentSearchCGIParams=!1:t._removeSearchCGIParams(),t._clear(),t._popup.hide()}),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems,reject:function(e,i){2===i.code&&(t._popup.hide(),t._clear())}},t),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t.bindEvents()},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(){var t=this.getMod("theme")||"normal",e={theme:t};return"large"===t&&(e.group="type"),"label"===this.getMod("group")&&(e.group="label"),BEM.create({block:"suggest2-view",mods:e})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.initValues().bindEvents():void 0},getCounter:function(){return this._counter},setDataConverter:function(t){return this.getModel().getProvider().convert=t,this},setRequestData:function(t){return this.getModel().getProvider().getRequestData=t,this},setRequestUrl:function(t){return this.getModel().getProvider().getRequestUrl=t,this},setOwner:function(t){return this._popup.owner(t),this},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur,click:t._onFocus},t),t._popup.on({preshow:function(){this.trigger("preshow")},show:function(){this.trigger("show")},hide:function(t,e){this.trigger("hide",e)}},this),t.params.button&&t.params.button.bindTo("mousedown",function(){t._input.realVal(t._input.val()),t._popup.hide()}),t},setItems:function(t,e){var i=this;return i._isFormSubmitDurinQuery()||!e.data.items.length?(i._popup.hide(),i._clear()):i._input.val()!==e.val?i._clear():(i._text=e.val,i._pos=e.pos,i._meta=e.data.meta||{},i._popup.show(i._view.html(e.data.items,i._meta)).width(i.getPopupWidth()),i._items=i.findBlocksInside("suggest2-item"),i._clearItems().trigger("update",{val:i._text,pos:i._pos,items:i._items}),i)},getItems:function(){return this._items||[]},isBlur:function(){return this._isBlur},getPopupWidth:function(){},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime&&this._model.isTimeInRequestInterval(this._lastSubmitTime)?(this._lastSubmitTime=0,!0):!1},_onChange:function(t,e){this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),e)},_onFocus:function(){!this._popup.isShown()&&this._isBlur&&this.params.onFocus&&this._isLastBlurTimeLater(50)&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._onChange())},_onBlur:function(){this._lastBlurTime=(new Date).getTime(),this._isBlur?(this._clear(),this._popup.hide()):this._freezeInputFocus?(this._clear(),this._input.focus()):this._isMouseDown&&this._input.focus(),this._isBlur=!0},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._freezeInputFocus=!1,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_isLastBlurTimeLater:function(t){return(new Date).getTime()-this._lastBlurTime>t},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var i=this,n=i._getItemIndex(t),o=t.onSelect(e).val();return i._text=i._input.realVal(o),i._isBlur=!0,i._freezeInputFocus=!1,i.trigger("select",{val:i._text,pos:i._pos,item:t,meta:i._meta,itemIndex:n,byKeyboard:e}),i._setSearchCGIParams(t),o!==!1&&(i._items=[],i.params.submitBySelect&&i.params.form.submit()),n},_currentSearchCGIParams:!1,_setSearchCGIParams:function(t){if(this._removeSearchCGIParams(),t.params.searchCGI){var e=[];t.params.searchCGI.forEach(function(t){e.push({block:"suggest2",elem:"search-cgi",tag:"input",attrs:{type:"hidden",name:t[0],value:t[1]}})}),this._currentSearchCGIParams=!0,BEM.DOM.after(this._input.get().domElem,BEMHTML.apply(e))}},_removeSearchCGIParams:function(){BEM.DOM.destruct(this.findElem(this.params.form.domElem,"search-cgi"))},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e){t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,i=t.which;!this._popup.isShown()||i!==e.up&&i!==e.down||(t.preventDefault(),this._enterByKeyboard(i))},_onKeyUp:function(t){var e=this.__self.keyboard;if((t.which===e.left||t.which===e.right)&&(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition())),t.which===e.right&&~this._enterItemIndex&&this._enterItemByKeyboard){var i=this._items[this._enterItemIndex];i&&this.trigger("ahead",{item:i,val:"link"===i.getMod("interact")?i.elem("text").text():i.val()})}},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,i=this._items.length,n=this._enterItemIndex+e;return-1===n||n===i?(this._enterItemIndex=n,this._unselectItems(this._items[n]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>n?n=i-1:n>=i&&(n=0),void this._onEnterItem(this._items[n],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40},live:function(){this.liveBindTo("mousedown",function(){this._onDownItem()})}}),BEM.decl("suggest2",{bindEvents:function(){function t(){e._popup&&e._popup.isShown()&&e._popup.hide()}var e=this;e.__base.apply(e,arguments),e._input.bindEvents({click:function(){e._popup.isShown()||(e._tabChange=!1,e._onChange())}}),BEM.blocks["suggest2-item"].on(e.domElem,{mousedown:function(){e.bindToDoc("mouseup.suggest2",function(){e._isBlur=!0,e._isMouseDown=!1,e.unbindFromDoc("mouseup.suggest2")})}}),$(window).bind("keyboardOpened.lego",function(){e._popup&&e._popup.isShown()&&e._popup.get()&&e._popup.get().repaint()});var i=!0;$(window).on("focus",function(){var n;try{n=document.activeElement}catch(o){}i||(i=!0,n&&e._input.getControl()&&e._input.getControl().is(n)&&(e._tabChange=!0),t())}).on("blur",function(){i=!1,t()})},init:function(){this.__base.apply(this,arguments),this.trigger("model-ready")},_onChange:function(){return this._tabChange=!1,this.__base.apply(this,arguments)},_onFocus:function(){this._tabChange||this.__base.apply(this,arguments)}}),BEM.DOM.decl("suggest2-detect",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){this.__self._pressedKeyCode=t.which},this).bindToDoc("keyup",function(){this.__self._pressedKeyCode=null},this)}}}},{_pressedKeyCode:null,isPressedEscape:function(){return 27===this._pressedKeyCode},isSupportInlineSVG:function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){return this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},getCancelRequestConditions:function(){return[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}]},request:function(t,e,i){var n=this._isNeedRequest(t,i);if(!n.need)return this.trigger("reject",{val:t,pos:e,code:n.code,reason:n.reason||{}});var o={val:t,requestTime:(new Date).getTime()};return this.trigger("request",{val:t,pos:e}),this.getProvider().get(t,e,function(t,e,i){o.responseTime=(new Date).getTime(),this._requests.push(o),this._onResponse(t,e,i)}.bind(this)),this},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},_isNeedRequest:function(t,e){if(""===t&&!this.params.requestOnEmptyInput)return{need:!1,code:2};if(!e)return{need:!0};var i,n=this.getCancelRequestConditions();t:for(var o=0;o<n.length;o++){i=n[o];for(var s in i)if(i.hasOwnProperty(s)&&i[s]!==e[s])continue t;return{need:!1,code:1,reason:{condition:i}}}return{need:!0}},_onResponse:function(t,e,i){this.trigger("response",{val:t,pos:e,data:i})}}),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},get:function(t,e,i){var n=this,o=function(){i.call(n,t,e,n.convert(n._lastData))};return n._lastText===t?o():(n._lastText=t,void $.ajax(n._extendParamsData(n.getRequestData(t,e))).done(function(t){n._lastData=t}).fail(function(){n._lastData=[]}).always(o))},convert:function(t){return{orig:t[0],items:t[1],meta:t[2]}},getRequestData:function(t,e){var i={};return BEM.blocks["suggest2-detect"].isSupportInlineSVG()&&(i.svg=1),$.extend({part:t,pos:e},i)},getRequestUrl:function(){return this.params.url},_extendParamsData:function(t){return this.params.url=this.getRequestUrl(),this.params.data=$.extend(this.params.data||{},t),this.params},_lastText:void 0,_lastData:[]}),BEM.decl("suggest2-provider",{get:function(t,e,i){var n=this,o=n.params&&n.params.paramName||"part",s={pos:e};s[o]=t,$.ajax(this._extendParamsData(s)).done(function(o){n.params&&n.params.email?i.call(this,t,e,{orig:t,items:n._processEmailst(o),meta:{}}):i.call(this,t,e,{orig:o[0],items:o[1],meta:o[2]})}).error(function(){i.call(this,t,e,{items:[]})})},_processEmailst:function(t){for(var e=[],i=0,n=t.length;n>i;++i)e.push(["email",t[i].email,t[i].name]);return e}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",mods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),i=this.__self._getType(t,e),n="html"===i?{}:{type:i};return this._getItemByType(t,e,i,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:n,js:e.js||{},props:{},content:[]})},_getItemByType:function(t,e,i,n){var o=n.text,s=n.mods,r=n.js,a=n.props,c=n.content;if(e.pers&&(s.personal="yes"),"fact"===i)c.push(o,{elem:"bullet"},{elem:"fact",content:t[2]});else if("weather"===i)c.push(o,{elem:"icon",elemMods:{weather:t[3].replace("-","minus-").replace("+","plus-").replace(/_/g,"-")}},{elem:"fact",content:t[2]});else if("traffic"===i)c.push(o,{elem:"icon",elemMods:{traffic:t[3]}},{elem:"fact",content:t[2]});else if("nav"===i)s.interact="link",a.url=this.__self._resolveUrl(t[4]),c.push({elem:"text",content:t[3]},{elem:"bullet"},{elem:"fact",content:t[2]});else if("icon"===i){var u={};e.icon.forEach(function(t,e,i){Array.isArray(t)?u[t[0]]=t[1]:0===e&&(u[t]=i[e+1])}),c.push(o,$.extend({elem:"icon",elemMods:{type:"favicon"}},u)),e.fact&&c.push({elem:"fact",content:e.fact})}else"html"===i?(r.val=t[1],c.push(e.body)):c.push(o);return e.url&&(s.interact="link",a.url=this.__self._resolveUrl(e.url),e.target&&(a.target=e.target)),e.search_cgi&&(r.searchCGI=e.search_cgi),$.extend({block:"suggest2-item",mods:s,js:r,content:c},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var i=Array.isArray(t)?t[0]||"text":"text";return"icon"!==i||e.icon?i:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var i,n=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),o=[],s=0;return n.length?(n.forEach(function(e){i=s>e[0]?s:e[0],o.push(t.slice(s,i)),o.push({elem:"highlight",content:t.slice(i,s=e[1])})},this),o.push(t.slice(s)),o.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-view",{},{_getGroupType:function(t,e){return t.pers?"nah":~["nav"].indexOf(e)?e:"text"},_getTextLabel:function(t){return BEM.I18N("suggest2",t)}}),BEM.decl("suggest2-view",{_getItemByType:function(t,e,i,n){var o,s;return"email"===i?(o=[],s=n.js,s.email=t[1],o.push({elem:"name",content:BEM.blocks["i-common__string"].escapeHTML(t[2]||t[1])}),t[2]&&o.push({elem:"email",content:BEM.blocks["i-common__string"].escapeHTML(t[1])}),$.extend({block:"suggest2-item",mods:n.mods,js:s,content:o},n.props)):this.__base.apply(this,arguments)}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this._popup.on("hide",function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})},this),this.bindSuggestEvents()}}},show:function(t){return this._popup.domElem?(t&&this._popup.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._popup.show(this.params.owner),this.trigger("show"),this)):this},hide:function(t){return this.isShown()&&(this._popup.hide(),this.trigger("hide",t||{})),this},setContent:function(t){return this._popup.setContent(t),this},isShown:function(){return this._popup?this._popup.isShown():!1},owner:function(t){return t?(this.params.owner=t,this):this.params.owner},getOwnerPos:function(){return this._popup.getOwnerPos()||{}},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.outerWidth():(this._popup.domElem.outerWidth(t),this)},destruct:function(){return this._popup?this._popup.destruct():void 0},bindSuggestEvents:function(){return this.params.suggest.on({select:function(t,e){this.hide(e)},update:function(t,e){e.items.length||this.hide({response:"empty"})}},this),this}}),BEM.decl("suggest2-popup",{pos:function(){return this.isShown()&&this._popup.repaint(),this}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,i){t.trigger("change",i)},clear:$.throttle(function(e,i){t.trigger("clear",i)},300)},t),t.bindSuggestEvents()}}},get:function(){return this._input},focus:function(){return this._input.setMod("focused","yes"),this},blur:function(){return this._input.delMod("focused"),this},getControl:function(){return this._input.elem("control")},val:function(){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],i=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-i),t.text.length):e.selectionStart||0===e.selectionStart?e.selectionStart:i},moveCaretToEnd:function(){var t=this.getControl()[0],e=t.value.length;if("number"==typeof t.selectionStart)t.scrollLeft=999999,t.setSelectionRange(e,e);else if("undefined"!=typeof t.createTextRange){t.focus();var i=t.createTextRange();i.collapse(!1),i.select()}return this},disableBrowserAutocomplete:function(){var t=this._input.hasMod("focused");t&&this._input.delMod("focused"),this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"}),t&&this._input.setMod("focused","yes")},bindEvents:function(t,e){return Object.keys(t).forEach(function(i){this._eventsFilter(i).on(i,t[i].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},select:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},enter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&this._changeValueByEvent(t,e)}},this),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){this.val(e&&e.val||this.realVal(),$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents({keydown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}},this)}}}}),BEM.DOM.decl("suggest2-item",{val:function(){if(this.params.val)return this.params.val;var t=this.elem("text");return(t.length?t:this.domElem).text()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.val(),byKeyboard:t})},onLeave:function(){return this.delMod("selected")},onSelect:function(t){return this.triggerEvent("select",{val:this.val(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)})}}),function(){"use strict";var t=15,e=396;BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"email"},{getPopupWidth:function(){var t=this._input.width();return t+6},init:function(){this.__base.apply(this,arguments),this.on("show",this._onShow),this.on("hide",this._onHide)},_onShow:function(){this._updateMaxWidth(),this.bindToDomElem($(window),"resize",this._updateMaxWidth)},_onHide:function(){this.unbindFromDomElem($(window),"resize")},_updateMaxWidth:function(){var i=$(window).width(),n=this._input.get().domElem.outerWidth(),o=this._input.get().domElem.offset().left,s=Math.max(e,i-o-t);this._popup.get().domElem.css({"max-width":s,"min-width":n+6}),this._popup.pos()}})}(),BEM.DOM.decl({block:"suggest2",modName:"ahead",modVal:"yes"},{init:function(){var t=this.__base.apply(this,arguments),e=this;return e._model.on("response",function(t,i){var n=i.data,o=n.items&&n.items[0],s=e._input.val(),r="object"==typeof o?o[1]:o,a="string"==typeof r&&r.match("^"+BEM.blocks["i-common__string"].escapeRegExp(s.toLowerCase())+"(.*)$");n.val=i.val,e.params.aheadFromServer?e._input.get().setAhead(s,n.meta&&n.meta["continue"]||"",n):a&&s.length>=e.params.showOverChars?e._input.get().setAhead(s,e.params.showFullPhrase?a[1]:a[1].split(" ")[0],{val:i.val}):e._input.get().unsetAhead()}),e._input.on("change",function(){e._input.get().unsetAhead()}),e._input.get().onPopupShow&&e._popup.on("show",function(){e._input.get().onPopupShow()}),e._popup.on("hide",function(){e._input.get().onPopupHide()}),t},getDefaultParams:function(){return $.extend(this.__base(),{aheadFromServer:!1,showOverChars:3,showFullPhrase:!1})}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},getOwner:function(){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t})},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,i=e.params;return i.input=t.input,i.button=t.button,i.form=this,i["suggest2-popup"]=BEM.create("suggest2-popup",{suggest:e,popup:e.findBlockOn(this.params.popupName),owner:this.getOwner(t)||i.input}),i["suggest2-input"]=BEM.create("suggest2-input",{suggest:e,input:i.input,updateOnEnterByKeyboard:i.updateOnEnterByKeyboard}),t.counter&&(t.counter.params.suggest=e,t.counter.params.form=this,i.counter=t.counter),this.bindFormEvents(t),t},this)},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click",function(t){e.trigger("button-click",t)}),e.bindTo("submit",function(t,i){e.onSubmit(t,i)}),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(i,n){var o=$(n),s=t.findBlockInside(o,"suggest2"),r={input:t.findElem(o,"input"),button:t.findElem(o,"button")};e.push({node:o,suggest:s,counter:t.findBlockOn("suggest2-counter"),input:t.findBlockOn(r.input,t.params.inputName),button:t.findBlockOn(r.button,t.params.buttonName),popup:s.findBlockOn(t.params.popupName)})}),e}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:function(){this.__base(),this._initCounters()}},_prepareCounterStats:function(t){var e=[];try{e.push(t.since_last_change),e.push(t.since_first_change),e.push(t.user_input.length),e.push(t.ratio.actionsCount),e.push(t.path.index),e.push("button_by_mouse"===t.path.submit?"1":"0"),e.push("edit"===t.path.state?"1":"0")}catch(i){return""}return e.join(",")},_bindCounters:function(){var t,e=this,i=e.findBlockInside("suggest2"),n=i.getCounter();
n&&e.params.statsExp===!0&&n.on("submit",function(i,n){var o;t&&t.remove(),o=e._prepareCounterStats(n),o&&(t=$("<input>",{type:"hidden",name:"csg",value:o}),e.domElem.append(t))})},_initCounters:function(){this.isReady()?this._bindCounters():this.on("ready",this._bindCounters)}}),BEM.DOM.decl({block:"suggest2-item",modName:"type",modVal:"email"},{val:function(){return this.params.email}}),BEM.DOM.decl("b-themes-list",{onSetMod:{js:function(){var t=this;$(".b-themes-list__tab-item").live("click",function(){var e=$(this),i=e.data("tabid");t.showTabThemes(i),t.scrollToTheme(t.getSelectedThemeOffsetFromLeft()),t.updateHash(i)}),$(".b-themes-list__theme-link").click(function(e){e.preventDefault(),t.addHashAndGo($(this).attr("href"),$(this).data("skinid"),$(this).data("stat"))}),$(".b-themes-list__arrow-prev").click(function(){t.scrolling(5,1)}),$(".b-themes-list__arrow-next").click(function(){t.scrolling(-5,1)}),window.addEventListener&&window.addEventListener("DOMMouseScroll",function(e){t.wheel(e)},!1),window.onmousewheel=document.onmousewheel=function(e){t.wheel(e)};var e=t.hashQuery(),i=this.params.list;if(e.tab&&i&&i[e.tab]||(e.tab="all"),this.showTabThemes(e.tab),e.pos)e.pos=parseInt(e.pos,10);else{var n=t.getSelectedThemeOffsetFromLeft();n=t.check(n),e.pos=-n}if(t.scrollToTheme(e.pos,!0),$.browser.msie&&(document.title=document.title.split("#")[0],$.browser.version<10)){var o=$(".b-themes-list");$(window).on("resize",function(){o.toggleClass("ie8reflow")})}}},hashQuery:function(){var t,e=location.hash.substr(1),i={};if(e){e=e.split("&");for(var n=0,o=e.length;o>n;n++)t=e[n].split("="),2===t.length&&(i[t[0]]=t[1])}return i},getSelectedThemeOffsetFromLeft:function(){var t=this.elem("theme").not(".b-themes-list__theme-hidden"),e=t.index($(".b-themes-list__theme_selected"));return-1!==e?-68*(e-2):0},updateHash:function(t,e){var i=this.hashQuery();"all"!==t&&t?i.tab=t:delete i.tab,e?i.pos=e:delete i.pos;var n="";for(var o in i)i.hasOwnProperty(o)&&(n+=o+"="+i[o]+"&");n.length&&(n=n.substr(0,n.length-1)),location.hash=n,$.browser.msie&&(document.title=document.title.split("#")[0])},showTabThemes:function(t){var e=this.elem("theme"),i=e.eq(0).parent(),n=this.params.list;$(".b-themes-list__tab_selected").removeClass("b-themes-list__tab_selected"),$(".b-themes-list__tab_"+t).addClass("b-themes-list__tab_selected"),n[t]?(e.addClass("b-themes-list__theme-hidden"),$.each(n[t],function(t,e){var n=".b-themes-list__theme_"+e;i.append($(n)),$(n).removeClass("b-themes-list__theme-hidden")})):i.append(e.removeClass("b-themes-list__theme-hidden"))},isNewBrowser:function(){var t=/(msie) (\w+\.\w+)/.exec(navigator.userAgent.toLowerCase());return t&&Number(t[2].split(".")[0])>8||!t},scrollToTheme:function(t,e){var i;i=t?-t:0,i=this.check(i);var n=$(".b-themes-list__list table");e?(n.css("left",i).show(),setTimeout(function(){n.show()},0)):(n.animate({left:i}),setTimeout(function(){n.show()},0))},showTheme:function(t,e,i){var n=this.elem("theme"),o=n.eq(0).parent(),s=this.params.list;n.addClass("b-themes-list__theme-hidden"),$.each(s[t],function(t,e){var i=".b-themes-list__theme_"+e;o.append($(i)),$(".b-themes-list__theme_"+e).removeClass("b-themes-list__theme-hidden")}),this.showTabThemes(t),this.scrollToTheme(e||0,i)},scrolling:function(t,e){var i=$(".b-themes-list__list table"),n=this.check(parseInt(i.css("left"),10)+68*t);e?i.stop().animate({left:n}):i.css({left:n})},check:function(t){var e=this.widths(),i=e.windowWidth-e.themesTableWidth-36;return t>0||i>0?0:i>t?i:t},widths:function(){var t=$(window).width(),e=parseFloat($(".b-themes-list__list table").width());return e=e===t-36?68*this.elem("theme").length+28:e,{themesTableWidth:e,windowWidth:t}},scrollThemes:function(t){-1>t&&(t=-1),t>1&&(t=1),this.scrolling(parseInt(t,10),0)},getCurrentTab:function(){return $(".b-themes-list__tab_selected > .b-themes-list__tab-item").data("tabid")||"all"},addHashAndGo:function(t,e,i){return t+="#tab="+this.getCurrentTab()+"&pos="+Math.abs(parseInt($(".b-themes-list__list table").css("left"),10)),window.statRedirect(t,i),!1},wheel:function(t){var e,i=0;t?e=t.target:(t=window.event,e=t.srcElement),$(e).parents(".b-themes-list").length?(t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i&&(this.scrollThemes(i),t.preventDefault&&t.preventDefault(),t.returnValue=!1)):t.returnValue=!0}}),window.ya=window.ya||{},ya.history=window.history&&history.pushState?function(){return{navigate:function(t){t=t||{},t.url&&(t.title||(t.title=""),t.data||(t.data=""),t.replace?history.replaceState(t.data,t.title,t.url):history.pushState(t.data,t.title,t.url))},onchange:function(t){$(window).on("popstate",function(e){t.call(this,e.originalEvent)})}}}():null,$(document).ready(function(){var t=home&&home.getData&&home.getData("i-change-url.data");if(t){var e=t.url;if(e&&ya.history){var i=home&&home.getData&&home.getData("mordaFromCache.data");if(i){var n=i.lastClid;document.location.search.indexOf("?clid="+n)>-1&&($("form.search input[name='clid']").length||$("form.search").append('<input type="hidden" name="clid" value="'+n+'">'))}ya.history.navigate({data:{page:"morda"},url:e,replace:!0})}}}),$(function(){function t(t,i,n){t.append(r),r.fadeIn(500),s=0,"stocks"===i?(c.removeClass("i-hidden"),$(".b-wdgt-control").css({width:44})):(c.addClass("i-hidden"),$(".b-wdgt-control").css({width:18})),$("#b-wdgt-setup_button").attr("href",a+"#open=_"+i),clearTimeout(o),n&&(o=setTimeout(function(){e()},4e3))}function e(){s||r.fadeOut(500,function(){c.addClass("i-hidden")})}function i(i,r){$(".b-newpromo").length||i.mouseenter(function(){s||(clearTimeout(o),n=setTimeout(function(){t(i,r)},1e3))}).mouseleave(function(){clearTimeout(n),clearTimeout(o),o=setTimeout(function(){s=0,e()},1e3)})}if(!$(".b-page_widgets").length){var n,o,s,r=$(".b-wdgt-control"),a=$("#b-wdgt-setup_button").attr("href"),c=$("#b-wdgt-toggle_button");r.length&&(r.css({right:0,top:0}),$("#b-wdgt-send_button").addClass("i-hidden"),$("#b-wdgt-del_button").addClass("i-hidden"),$(".b-wdgt-control").css({width:18,height:18}),$(".b-wdgt-control").mouseenter(function(){s=1,clearTimeout(o)}),$(".b-wdgt-control").mouseleave(function(){o=setTimeout(function(){s=0,e()},1e3)}),window.wdgtControl=i,window.device&&$("#b-wdgt-toggle_button").length&&($("#b-wdgt-setup_button").addClass("i-hidden"),t($(".b-wrapper-stocks"),"stocks",!0)))}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){this.setMod("visibility","outside").setMod("adaptive","no"),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/-(100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/-(100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")}}),BEM.DOM.decl("b-wdgt-hint",{onSetMod:{js:function(){this.bindTo("accept","click",this.accept),this.bindTo("reject","click",this.reject),this.popup=this.findBlockOn(this.domElem,"popup"),this.popup.on("hide",this.changeThis(function(){this.hasMod("widget")&&!this.hasMod("move")&&this.saveValue(0,1)},this))},widget:function(t,e){e?(this._watch=setInterval(this.changeThis(function(){this.alignPopup()},this),300),this.showParanja(),this.bindEvents()):(clearInterval(this._watch),this.hideParanja(),this.unbindEvents())},move:function(t,e){this.popup[e?"hide":"repaint"]()}},alignPopup:function(){if(this._widgetParams||(this._widgetParams={offset:{}}),!this.hasMod("move")){var t=this._widget.wrapper.$(),e=this._widgetParams,i={offset:t.offset(),width:t.width(),height:t.height()};(e.offset.x!==i.offset.x||e.offset.y!==i.offset.y||e.width!==i.width||e.height!==i.height)&&(this._widgetParams=i,this.repaint())}},bindEvents:function(){$(document).bind("keydown.wdgthint",this.changeThis(this.keydown))},unbindEvents:function(){$(document).unbind("keydown.wdgthint")},keydown:function(t){switch(t.keyCode){case 13:return this.accept(),!1;case 27:return this.reject(),!1}},showFor:function(t,e,i){t&&(this._widget=t,this._noCatalog=e,this._from=i,this.delMod("move"),t.params.yandex?(this.elem("message").html(translatedMessages.securityMessages.yandexWidgetAdded),this.elem("no-yandex").addClass("i-hidden")):(this.elem("message").html(translatedMessages.securityMessages.reallyAdd),this.elem("no-yandex").removeClass("i-hidden")))},showPopup:function(){this.popup.show(this._widget.wrapper.$()),this.setMod("widget",this._widget.id),this.delMod("move"),this.elem("accept").focus()},repaint:function(){this.hasMod("widget")&&(this.popup._cache.ownerSize=null,this.popup.repaint())},wipe:function(){this._widget=this._from=this._noCatalog=0,this.delMod("widget")},accept:function(){this.saveValue(1),this.popup.hide()},reject:function(){this.saveValue(0),this.popup.hide()},saveValue:function(t,e){this._widget&&(wg.confirmAddWidget({ans:t,noCatalog:this._noCatalog,from:this._from,id:this._widget.id,noUpdateHash:e}),this.wipe())},isShown:function(){return this.popup.isShown()},getParanja:function(){return $(".v_sform_bg")},showParanja:function(){var t=this.getParanja();t.one("click.wdgthint",this.changeThis(function(){this.reject()},this)),t.show()},hideParanja:function(){var t=this.getParanja();t.off("click.wdgthint"),t.hide()}}),BEM.DOM.decl("b-wdgt-share",{onSetMod:{js:function(){this.bindTo("close","click",this.hide),this.bindTo("link","click",this.linkClick)}},show:function(t){this.updateLinks(t),this.getPopup().show()},hide:function(){this.getPopup().hide()},updateLinks:function(t){var e=t.id.substr(0,t.id.lastIndexOf("-")),i="http://www.yandex.#d#/?add=#id#&from=shared".replace(/#d#/,document.domain.replace(/yandex\./,"")).replace(/#id#/,e),n=this.params.shareText;this.elem("url").val(i),this.elem("link").each(function(){var e=$(this),o=e.data("service"),s=e.data("title")||n;e.attr("href","http://share.yandex.ru/go.xml?service="+encodeURIComponent(o)+"&url="+encodeURIComponent(i)+"&title="+encodeURIComponent(s.replace("%s",""+t.params.title+"").replace("(URL)",i)))})},linkClick:function(t){var e=t.currentTarget;if("_blank"!==e.target){{window.open(e.href,"shareWindow","status=1, toolbar=0, menubar=0, resizable=1, scrollbars=1, width=800px, height=500px")}return!1}},getPopup:function(){return this.popup||(this.popup=this.findBlockOn(this.domElem,"popup"))}});var posRegionHint,initRegionHint;!function(t){function e(t){var e;n=!0,e=t.bem("popup"),e.show(i)}var i,n=!1;window.initRegionHint=function(o,s){var r=t(".b-region__hint"),a=t(s),c=t(o),u=r.find(".b-region__hint__header")[0],l=u?u.onclick():{};r.length>0&&setTimeout(function(){var o;if("1"===l.ispopup){if(i=c,0===i.length)return!1;e(r)}else if(i=a,0===i.length)return!1;o=function(){e(r)},i.click(o),t(document).keydown(function(t){"27"===t.keyCode&&r.bem("popup").hide()}),r.bem("popup").on("hide",function(){n=!1}),"1"===l.ispopup&&r.bem("popup").on("hide",function(){i.unbind("click",o)}),t(window).resize(function(){setTimeout(function(){if(n){r.bem("popup")._isShowed=!1,r.bem("popup").show(i),n=!0;try{document.body.focus()}catch(t){}}},142)}),t(".b-region__ajax-action").click(function(){return t(document.body).append('<iframe style="display:none" src="'+this.href+'"></iframe>'),r.bem("popup").hide(),!1})},1e3)}}(jQuery),$(document).ready(function(){!function(){function t(){return $(".b-mobile-balloon")[0].onclick()}$(".b-mobile-balloon__button_yes").click(function(){document.location.href=t().url}),$(".b-mobile-balloon__button_no").click(function(){var e=t().statNo;(new Image).src=t().closeurl,e&&cp(e),$(".b-mobile-balloon").hide()})}()}),$(document).ready(function(){function t(t,e){var i=new Date(1e3*t);return e.replace("%day",i.getDate()).replace("%month",n.monthNames[i.getMonth()]).replace("%year",i.getFullYear())}function e(){$(".b-head-stripe").hide(),$(".b-sethome-stripe").hide(),$(".b-https-stripe").hide();var t=$(".popup_visibility_visible:not(.b-topbar__popup)");t.length&&t.bem("popup").hide(),setTimeout(function(){$(window).trigger("popupredraw.lego")},100)}function i(e,i){r=e.html(),a=new Date(1e3*i).getFullYear()===new Date(1e3*n.timestamp).getFullYear()?n.dateFormatShort:n.dateFormatLong,r=r.replace("%local_date","<b>("+t(i,a)+")</b>").replace("%current_date","<b>("+t(n.timestamp,a)+")</b>"),e.html(r)}var n=home&&home.getData&&home.getData("b-time-banner.data");if(!n||n.empty)return void home.delayManager.runQueue("timeBanner.notshown");var o,s,r,a,c,u,l=$(".b-time-banner"),h=Math.round((new Date).getTime()/1e3);n.WrongDateFatal.show&&(n.WrongDateFatal.till_ts>h||n.WrongDateFatal.from_ts&&n.WrongDateFatal.from_ts<h)?(o=n.WrongDateFatal,s=$(".b-time-banner_mode_fatal .b-time-banner__text"),i(s,h),$(".b-time-banner_mode_fatal").show(),u=n.showFatalCounter,c=o.show_url,e()):n.WrongDateAlert.show&&(n.WrongDateAlert.till_ts>h||n.WrongDateAlert.from_ts&&n.WrongDateAlert.from_ts<h)?(o=n.WrongDateAlert,s=$(".b-time-banner_mode_alert .b-time-banner__text"),i(s,h),$(".b-time-banner_mode_alert").show(),u=n.showAlertCounter,c=o.show_url,e()):home.delayManager.runQueue("timeBanner.notshown"),c&&((new Image).src=c),u&&csh_ifgsid(u),$(".attention-stripe__close").click(function(t){(new Image).src=o.close_url,csh_ifgsid($(t.target).hasClass("attention-stripe__close_alert")?n.closeAlertCounter:n.closeFatalCounter),l.hide(),t.preventDefault(),e()})}),function(){$(document).ready(function(){function t(t){var e=document.createElement("iframe");e.style.visibility="hidden",e.style.position="absolute",e.setAttribute("src",t),e.style.top=e.style.left=e.style.width=e.style.height=0,document.getElementsByTagName("body")[0].appendChild(e)}if(home.getData("b-https-stripe.data.show")){var e=home.getData("b-https-stripe.data.close_url"),i=home.getData("b-https-stripe.data.counter_url");t(i),cp(home.getData("b-https-stripe.counters.show")),$(".b-https-stripe .attention-stripe__close").click(function(){t(e),cp(home.getData("b-https-stripe.counters.close")),$(".b-https-stripe").hide()})}})}(),BEM.DOM.decl("multiauth-promo",{onSetMod:{js:function(){if(this.popup=this.findBlockOn(this.domElem,"popup"),this.popup.show($(".user:first .user__icon")),$(".b-topbar").bem("b-topbar").onFirst("expanded",this.changeThis(this.hide)),this.repaint=this.changeThis(function(){this.popup.repaint()}),$(window).bind("popupredraw.lego",this.repaint),$(window).one("popupopen.lego",this.changeThis(this.hide)),this.params.close){var t=new Image;t.src=this.params.close}}},hide:function(){$(window).unbind("popupredraw.lego",this.repaint),this.popup.delMod("domik"),this.popup.hide()}}),$(function(){"use strict";var t=function(){var t=$(this),e=t.data("id"),i=t.data("cookie"),n=t.data("stat"),o="b-tabs",s="b-tabs__selected",r="b-tabs__notselected",a="b-tabs__names",c="b-tabs__items",u="i-hidden";if(t.parent().is("."+s))return n&&csh_ifmsid(n+".link",this),!0;var l=t.closest("."+o);if($("."+a+" > .b-tabs__title-block",l).removeClass(s).addClass(r),t.closest(".b-tabs__title-block").removeClass(r).addClass(s),$("."+c+" > .b-tabs__block",l).addClass(u),$("#"+e).removeClass(u),n&&csh_ifmsid(n+".select"),t.blur(),i){var h=$(".b-tabs__frame");h.length||(h=$('<iframe class="b-tabs__frame" style="display:none"></iframe>'),$(document.body).append(h)),h.attr("src",i)}if(l.data("message")&&window.workerMessage){var d=parseInt(t.attr("name").replace("tab",""),10);window.workerMessage("update",{name:l.data("message"),index:d})}return!1};$("body").on("click",".b-tabs__title",t)}),function(){var t=function(){this.serverDate=null,this.prevDay=null,this.loadDate=null,this.parent=null,this.placeHolders={date:null,day:null,month:null,wday:null,time:null,h:null,m:null},this.flicker={timePH:null,init:function(t){this.timePH=t},blink:function(){$(this.timePH).toggleClass("b-datetime__time_hidden")}},this.timeTemplate=null};t.prototype._norm=function(t){return t>9?""+t:"0"+t},t.prototype.iterate=function(){var t=new Date,e=new Date(this.serverDate.getTime()+(t.getTime()-this.loadDate.getTime())),i=e.getDay();0===e.getUTCHours()&&0===e.getUTCMinutes()&&this.prevDay!==i&&(this.placeHolders.date.length>0&&(this.placeHolders.date.replaceWith(this.timeTemplate({title:"",day:e.getDate(),month:this.locale.month[e.getMonth()],wday:this.locale.week[i]})),this.placeHolders.date=$(".b-datetime__date",this.parent)),this.prevDay=i,$(window).trigger({type:"morda.nextDay",date:e.getDate(),month:this.locale.month[e.getMonth()],wday:this.locale.week[i],monthServer:e.getMonth(),day:i})),this.placeHolders.h.html(this._norm(e.getUTCHours())),this.placeHolders.m.html(this._norm(e.getUTCMinutes()))},t.prototype.init=function(t,e){if(e){if(this.parent=e,$(this.parent).hasClass("b-datetime__inited"))return;if($(this.parent).addClass("b-datetime__inited"),this.serverDate=new Date(t+" GMT+0000"),this.loadDate=new Date,this.timeTemplate=ya.template(this.infoDate),this.serverDate&&"Invalid Date"!==this.serverDate&&!isNaN(this.serverDate)){this.placeHolders.date=$(".b-datetime__date",e),this.placeHolders.day=$(".b-datetime__day",e),this.placeHolders.month=$(".b-datetime__month",e),this.placeHolders.wday=$(".b-datetime__wday",e),this.placeHolders.time=$(".b-datetime__time",e),this.placeHolders.h=$("span:first",this.placeHolders.time),this.placeHolders.m=$("span:last",this.placeHolders.time),this.flicker.init($(".b-datetime__time b",e)),this.iterate();var i=this;setInterval(function(){i.iterate(),i.flicker.blink()},1e3)}}},window.MordaClock=t}(),function(t){var e=/\[%\s([^%]+)\s%\]/g;t.template=function(t,i){i=i||{};try{var n=t.replace(/'/g,"\\'").replace(e,function(t,e){return i.hasOwnProperty(e)?"'+(hash.hasOwnProperty(\""+e+'")?hash["'+e+'"]:"'+i[e]+"\")+'":"'+(hash.hasOwnProperty(\""+e+'")&&typeof(hash["'+e+"\"])!='undefined'?hash[\""+e+"\"]:'')+'"});return new Function("hash","return '"+n+"'")}catch(o){debug&&debug("template make failed:",t,n)}},t.getClasses=function(t,e,i){var n,o=t;if(i&&(o+=" "+i),e)for(n in e)e.hasOwnProperty(n)&&e[n]&&(o+=" "+t+"_"+n+"_"+e[n]);return o},t.getAttrs=function(t){if(!t)return"";var e,i="";for(e in t)t.hasOwnProperty(e)&&(i+=" "+e+'="'+t[e]+'"');return i},t.getJsParams=function(t){return JSON.stringify(t||{}).replace(/"/g,"'")},t.decline=function(t,e){return e&&e.length?0===t&&e[3]?e[3]:e[1]||e[2]?e[2]?(t%=100,t>=20&&(t%=10),1===t?e[0]:t>1&&5>t?e[1]:e[2]):t>=0&&1>=t?e[0]:e[1]:e[1]:e}}(ya),function(){function t(){var t=i.height(),e=n.height(),a=$(window).height();o||(o=t,s=t-e),n.css(o+r>a?{height:Math.max(a-r-s,200),overflowY:"auto",marginRight:7}:{height:"auto",overflowY:"visible",marginRight:0})}function e(e){var n;n=e.is(".b-disaster")?$(".b-link_pseudo_yes",e):$(".b-disaster .b-link_pseudo_yes",e),n.click(function(){i&&i.bem("popup").show(),t(),$(window).trigger("disasterpopup.show")})}var i,n,o=0,s=0,r=70;$(function(){i=$(".b-disaster-popup"),n=$(".b-disaster-popup__content"),i.find(".b-disaster-content").each(function(){var t=this.onclick()||{};t=t.content||"",$(this).replaceWith(t)}),$(window).resize(function(){t()})}),window.initDisasterPopup=e}(),function(){var t=!0;$.browser.msie?($(document).bind("focusin",function(){t=!0}),$(document).bind("focusout",function(){t=!1})):($(window).focus(function(){t=!0}),$(window).blur(function(){t=!1})),$(document).ready(function(){if(window.teaserId){var e=$("#"+window.teaserId);if(e.length){e=e[0];var i=e.src,n=0,o=6e4,s=setTimeout(function r(){600>n?t?(e.src=i+"?rnd="+ya.uid(),n++,setTimeout(r,o)):$.browser.msie?$(document).one("focusin",r):$(window).one("focus",r):clearTimeout(s)},o)}}})}(),x.amd.require("statlog",function(t){BEM.DOM.decl("themes-promo",{onSetMod:{js:function(){for(var e=this,i=e.params,n=i.stat,o=i.promos,s=null,r=null,a=null,c=!1,u=e._hasStorage(),l=new Date,h=new Date,d=0,f=o.length;f>d;d+=1)if(s=o[d],e._canShow(s)){$(".b-line_bar").addClass("has_themes-promo"),r={text:s.text,url:"/themes/"+(s["default"]?s["default"]:"")+"#tab="+(s.group||"all"),mix:"b-link_themes_promo ",stat:n?e._getStatAttr(s.counter+".preview",!0):null},a={text:"",mix:"themes-promo__close b-link_pseudo_yes ",stat:n?e._getStatAttr(s.counter+".close"):null},n&&t.logByDocument({doc:e.domElem[0]}),e.elem("wrapper-link").html(e._link(r)),e.elem("wrapper-close").html(e._link(a)),s.promo_from_mail&&((new Image).src=s.show_url),u||s.promo_from_mail||e.elem("wrapper-close").addClass("i-hidden"),c=!0,e.setMod("state","shown");break}c&&(u&&e.elem("wrapper-link").find(".b-link_themes_promo").click(function(){e._banPromo(s.counter,Number(l.setMonth(l.getMonth()+3)))}),e.bindTo("close","leftclick",function(){s.promo_from_mail?(new Image).src=s.close_url:u&&(e._banPromo(s.counter,Number(l.setMonth(l.getMonth()+3))),e._banPromo("hot",Number(h.setHours(h.getHours()+24)))),e.setMod("state","hidden"),$(".b-line_bar").removeClass("has_themes-promo"),$(window).trigger("b-line_bar-update")}))}},_canShow:function(t){return this._checkConditions(t)&&this._checkLS("hot")&&this._checkLS(t.counter)},_checkConditions:function(t){return t["default"]!==this.params.skin},_checkLS:function(t){if(!this._hasStorage())return!0;var e,i=Number(new Date),n=this._getUnlockDate(t);return n?(e=n-i,e>0?!1:(this._cleanGarbage(t),!0)):!0},_banPromo:function(t,e){home.localStorage.setItem("tp:"+t,e)},_cleanGarbage:function(t){home.localStorage.removeItem("tp:"+t)},_getUnlockDate:function(t){var e=home.localStorage.getItem("tp:"+t);return null!==e?Number(e):null},_getStatAttr:function(t){return'data-statlog="head.skinpromo.'+t+'"'},_link:function(t){return(t.url?'<a href="'+t.url+'"':"<span")+' class="b-link i-bem'+(t.mix?" "+t.mix:"")+'"'+(t.stat?" "+t.stat:"")+'onclick="return{'+(t.js||"'b-link':{}")+'}">'+(t.text||"")+(t.url?"</a>":"</span>")},_hasStorage:function(){return!home.disabledLS}})}),function(){BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,i,n){if("disabled"==n)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","leftclick",function(t){this.onItemSelectorClick(t)})}})}(),function(){BEM.DOM.decl({name:"b-menu-vert",baseBlock:"i-menu"},{},{live:function(){this.__base()}})}(),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),function(){BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"})}(),BEM.DOM.decl({block:"popup",modName:"domik",modVal:"trigger"},{_dispatch:function(t){$(window).trigger("popup"+t+".lego")},show:function(){this._dispatch("open"),this.__base.apply(this,arguments)},hide:function(){this._dispatch("close"),this.__base.apply(this,arguments)}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=window.devicePixelRatio,this._isRetina>1&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),i=this._getIconSize(),n=(this._isRetina?"/islands-retina-":"/islands-")+i,o=[t,"/get-yapic/",e,n,"?rnd=",+new Date].join("");return o},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){var t=this._getIconPath();this._setIconBackground(t)},getDefaultParams:function(){return{avatarHost:"//avatars.yandex.net"}},_getIconSize:function(){return"middle"}}),BEM.DOM.decl("user",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this,e=BEM.blocks["i-global"];0===e.param("login").lastIndexOf("uid-",0)&&BEM.blocks["i-user-services"].get(function(e){var i=ya.htmlFilter(e.displayName&&e.displayName.name||e.login||" "),n='<span class="user__name"><span class="user__first-letter">'+i[0]+"</span>"+i.slice(1)+"</span>";BEM.DOM.replace(t.elem("name"),n)})}}}),BEM.DOM.decl("user",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.elem("icon");if(t.length&&0===$("html.i-ua_inlinesvg_yes").length){var e=t.css("background-image");e=e.replace(/(?:[^\/]+)\.svg(.*)?\)$/,"SFzCr2GZxGw2r1fKJO9soo0otUI.png$1)"),t.css("background-image",e)}}}}),BEM.DOM.decl("user",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=BEM.create("domik_type_popup",{mods:this.params.domikMods,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})});t.bindTo("leftclick",function(){return e.open(),!1})}}}}),BEM.DOM.decl("user",{onSetMod:{js:function(){var t=this,e=BEM.blocks["i-global"],i=function(t,e,i){var n="";return t.length>e+i?t.substring(0,e-1)+n:t};0===e.param("login").lastIndexOf("uid-",0)&&BEM.blocks["i-user-services"].get(function(e){var n=i(ya.htmlFilter(e.displayName&&e.displayName.name||e.login||" "),20,3),o='<span class="user__name"><span class="user__first-letter">'+n[0]+"</span>"+n.slice(1)+"</span>";BEM.DOM.replace(t.elem("name"),o)});var n=this.findBlockOn("enter","button");null!==n&&n.bindTo("leftclick",function(){try{var t=$(".popup_behavior_snap");return t.length?(t=t.bem("popup"),t.isShown()?!0:$(".b-topbar_expanded_yes").length?($(".popup_visibility_visible").bem("popup").hide(),$(window).trigger("popupclose.lego"),!1):!0):!0}catch(e){return!1}})}}}),BEM.decl("domik_type_popup",{destruct:function(){var t=this;t._form&&t._form.destruct(),t._popup&&t._popup.destruct(),t.__base.apply(t,arguments)},create:function(){var t=this;if(t._created)return t;var e,i,n=t.__self,o=n._buildTypePopup(t._uniqId,t.params.mods),s=$(BEMHTML.apply(o)),r=t.params.hidden;if(BEM.DOM.append($("body"),s),i=t._popup=s.bem("popup"),e=t._form=t._popup.findBlockInside("auth"),r){var a=r.domElem;e.getUsernameBlock().val(a.find("input[name=login]").change().val()),e.getPasswordBlock().val(a.find("input[name=passwd]").change().val()),r.destruct()}return t._created=!0,t},open:function(){var t=this;return BEM.blocks["i-global"].param("login")?t:(t._created||t.create(),t.close(),t._popup.show(),t.afterCurrentEvent(function(){t._form.getUsernameBlock().setMod("focused","yes"),t._form.redraw()}),t)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShowed()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e){return{block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:{_uniqId:t},mods:$.extend({type:"popup"},e),content:{block:"auth",mods:{content:"auto"}}}}}}}),BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:{visible:function(){this.__base(),this._body.css({overflow:"hidden"})},"":function(){this.__base(),this._body.css({overflow:""})}}}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.setMod("checked",this.elem("control").attr("checked")?"yes":""),this._isControlFocused()&&this.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this._isControlFocused()||this.elem("control").focus(),this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._isControlFocused()&&this.elem("control").blur(),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},checked:function(t,e){this.elem("control").attr("checked","yes"==e),this.afterCurrentEvent(function(){this.trigger("change")}),this.toggleMod(this.elem("box"),"checked","yes","yes"==e)},disabled:function(t,e){this.elem("control").attr("disabled","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},_onClick:function(t){this.isDisabled()||this.setMod("focused","yes").toggle(),t.preventDefault()},_onChange:function(t){t.target.checked?this.setMod("checked","yes"):this.delMod("checked")},_onFocusInFocusOut:function(t){this.setMod("focused","focusin"===t.type?"yes":"")},_onMouseOverMouseOut:function(t){this.isDisabled()||this.setMod("hovered","mouseover"===t.type?"yes":"")},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}}},{live:function(){return this.liveBindTo("leftclick",function(t){this._onClick(t)}).liveBindTo("control","leftclick",function(t){t.stopPropagation()}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("control","focusin focusout",function(t){this._onFocusInFocusOut(t)}).liveBindTo("mouseover mouseout",function(t){this._onMouseOverMouseOut(t)}),!1}}),function(){"use strict";BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",function(){cp(this.params.stat)})}}})}(),BEM.DOM.decl("auth",{onSetMod:{js:function(){var t=this;t._button=t.findBlockInside("button","button"),t._username=t.findBlockInside("username","input"),t._password=t.findBlockInside("password","input"),t._password.on("change",t._onInputChange,t),t._username.on("change",t._onInputChange,t),t.redraw(),t._errorOn=null,t.bindTo("submit",t._onBeforeSubmit)}},destruct:function(){var t=this;t._error&&t._error.destruct(),t.__base.apply(t,arguments)},_appendErrorElem:function(){var t=this,e=$(BEMHTML.apply(t.__self._buildError()));t.__self.append(t.domElem,e),t._error=t.findBlockOn(e,"popup"),t._errorMsg=t.findElem(e,"error"),t._error.on("hide",function(){t._errorOn=null})},_checkInput:function(t){var e=this,i=e.__self,n=e._username.val(),o=e._password.val();if(t){if(0===n.length)return e.showError(e._username,BEM.I18N("auth","fill-input")),!1;if(0===o.length)return e.showError(e._password,BEM.I18N("auth","fill-input")),!1}return/[\u0400-\u04FF\u0500-\u052F]/.test(n)?(e.showError(e._username,BEM.I18N("auth","wrong-keyboard-layout")),!1):/[\u0400-\u04FF\u0500-\u052F]/.test(o)?(e.showError(e._password,BEM.I18N("auth","wrong-keyboard-layout")),!1):i._isUsernameValid(n)?i._isPasswordValid(o)?o&&o===n?(e.showError(e._password,BEM.I18N("auth","wrong-password")),!1):(e.hideError(),!0):(e.showError(e._password,BEM.I18N("auth","wrong-characters")),!1):(e.showError(e._username,BEM.I18N("auth","wrong-characters")),!1)},_onInputChange:function(){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(){this.disableButton(),this.elem("retpath").val(this.__self._getRetpath()),this._timestamp||(this._timestamp=$('<input type="hidden" name="'+this.__self._timestampName+'"/>').appendTo(this.domElem[0])),this._timestamp.val(+new Date);var t=this.domElem.attr("action");t&&this.domElem.attr("action",t.replace(/^(https?:)?/,"https:"))},showError:function(t,e){var i=this;return i._error||i._appendErrorElem(),i._curErrorMsg!==e&&(i._errorMsg.text(e),i._curErrorMsg=e),i._errorOn!==t&&(i._error.hide(),i._error.show(t),i._errorOn=t),i},hideError:function(){return this._error&&this._error.hide(),this._errorOn=null,this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){var t=this;return!t._haunter&&(t._haunter=t.findBlockInside("haunter","checkbox")),t._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this}},{_retpathName:"retpath",_timestampName:"timestamp",_isUsernameValid:function(t){return!(-1===t.indexOf("@")&&/[^-A-Za-z0-9\.]/.test(t))},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)
},_getRetpath:function(){return BEM.blocks["i-global"].param("retpath")},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}}}),BEM.DOM.decl("auth",{onSetMod:{js:function(){var t=this;t.__base.apply(t,arguments);var e=document.createElement("b");e.innerHTML="<!--[if IE 9]><i></i><![endif]-->",1===e.getElementsByTagName("i").length&&t._username.elem("control").add(t._password.elem("control")).keydown(function(e){return 13===e.which?(t.submit(),!1):void 0})}}}),BEM.DOM.decl("auth",{_checkInput:function(t){var e=this,i=e.__self,n=e._username.val(),o=e._password.val();if(t){if(0===n.length)return e.showError(e._username,BEM.I18N("auth","fill-input")),!1;if(0===o.length)return e.showError(e._password,BEM.I18N("auth","fill-input")),!1}return i._isUsernameValid(n)?(e.hideError(),!0):(e.showError(e._username,BEM.I18N("auth","wrong-characters")),!1)}},{_isUsernameValid:function(t){return!/\s/.test(t)},_buildError:function(){var t=this.__base.apply(this,arguments);return t.js.directions=["left"],t}}),BEM.DOM.decl({block:"auth",modName:"login",modVal:"known"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.login||this.delMod("login"),this.findBlockInside("username","input").val(this.params.login),this._switchCounters(!0),this.bindTo("notme","click",function(){this.findBlockInside("username","input").val(""),this.elem("stale-login").remove(),this.channel("auth").trigger("notme"),this._switchCounters(!1),this.delMod("login")})}},_switchCounters:function(t){this._switchCountersOnElem(this.elem("login-button"),t),this._switchCountersOnElem(this.elem("remember-link"),t)},_switchCountersOnElem:function(t,e){var i=t.attr("onmousedown");i&&(i=i.replace(e?".domik.":".domik_stale.",e?".domik_stale.":".domik."),t.attr("onmousedown",i))}}),BEM.DOM.decl("auth",{onSetMod:{js:function(){var t=this,e=BEM.blocks["i-global"];t.__base.apply(t,arguments);var i=e.param("social-providers");if(i)t._createSocial(i);else{var n=e.param("social-host");if(!n)return;var o=t.elem("social");o.css("height",28),$.getJSON(t.__self._getProvidersURL(n),function(e){o.css("height",""),t._createSocial(e.providers)})}}},destruct:function(){var t=this;t._socialDropdown&&t._socialDropdown.destruct(),t.__base.apply(t,arguments)},_createSocial:function(t){var e,i=this,n=i.__self;return t.length?(e=n._buildSocial(t,i._uniqId),n.update(i.elem("social"),BEMHTML.apply(e)),void(i._socialDropdown=i.findBlockInside("social","dropdown"))):void i.elem("social").remove()},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"],i=this.elemParams(t.data.domElem).provider;this._socialDropdown&&this._socialDropdown.hide(),BEM.blocks["social-broker"].start(function(){e.param("retpath")&&top.location.href!=e.param("retpath")?top.location.href=e.param("retpath"):top.location.reload()},function(){},{provider:i})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","click",function(t){this._onSocialClick(t)}),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var i,n,o=[];return t=t.filter(function(t){return t.enabled}),i=t.filter(function(t){return t.primary}),i=i.map(function(t){return{block:"auth",elem:"social-link",js:{provider:t.code},attrs:{tabIndex:103},mix:[{elem:"social-icon",elemMods:{code:t.code}}]}}),[].push.apply(o,i),n=t.map(function(t){return{block:"auth",elem:"social-link",js:{provider:t.code},attrs:{tabIndex:103},content:[{elem:"social-icon",elemMods:{code:t.code}},t.display_name]}}),i.length<t.length&&o.push({block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],tabindex:103,content:"  "},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:e}}],content:n}}]}),o}}),function(){"use strict";var t={SPACE:32};BEM.DOM.decl("auth",{onSetMod:{js:function(){this.__base.apply(this,arguments),Lego.params.statRoot&&this._socialDropdown&&this._socialDropdown.bindTo("switcher","click",function(){cp(Lego.params.statRoot+".mail.logout.domik.social_more")})}},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"],i=this.elemParams(t.data.domElem).provider;this._socialDropdown&&this._socialDropdown.hide(),Lego.params.statRoot&&cp(Lego.params.statRoot+".mail.logout.domik.social_login."+i),BEM.blocks["social-broker"].start(function(){var t,i=e.param("retpath");return i&&top.location.href!==i?(t=setTimeout(function(){top.location.href=i},5e3),void $.ajax({url:Lego.params["pass-host"]+"/services",data:{locale:BEM.blocks["i-global"].param("lang"),yu:$.cookie("yandexuid")},dataType:"jsonp",success:function(e){clearTimeout(t);for(var n=0,o=e.length;o>n;n++){var s=e[n].url&&(e[n].url.match(/^(?:https?:)?\/\/([^\/]+)/)||[])[1]||"";if(-1!==i.indexOf(s))return void(top.location.href=i)}top.location.reload()}})):void top.location.reload()},function(){},{provider:i})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","keydown",function(e){e.which===t.SPACE&&this._onSocialClick(e)}),!1},_buildSocial:function(){var t=this.__base.apply(this,arguments),e=t[t.length-1];return"dropdown"===e.block&&(e.content[0].content="",e.content[1].js={directions:{to:"bottom",axis:"right",offset:{left:10}}}),t}})}(),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:function(){this._window=null,this._timer=0}},start:function(t,e,i){var n,o,s,r,a=this;if(this._cleanup(),this._onSuccess=t,this._onFailure=e,i=$.extend({},a._getDefaultParams(),i),n=i.startUrl+"?",r=i.popupName,delete i.startUrl,delete i.popupName,o=i.display,s=i.retpath,o&&"popup"!=o)i.retpath=i.retnopopup||i.retpath||window.location.href,delete i.retnopopup;else{var c="ddom="+(i.ddom||(location.hostname==document.domain?"":document.domain));i.retpath+=(s.match("#")?"&":"#")+c}return n+=Object.keys(i).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(i[e])),t},[]).join("&"),o&&"popup"!=o?void(window.location.href=n):(this._window=window.open(n,r,a._getPopupParams()),void(this._window&&(this._window.focus(),clearTimeout(this._timer),this._timer=setInterval(function(){a.isClosed()&&(clearInterval(a._timer),a._onFailure({status:"error"}))},500))))},isClosed:function(){if(!this._window)return!0;try{return this._window.closed}catch(t){return!0}},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||location.protocol+"//"+location.host+t.param("lego-path")+"/blocks-common/i-social/closer/i-social__closer.html",retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,i,n){return"scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0, left="+e+", top="+t+", width="+i+", height="+n},_getPopupParams:function(){var t,e,i=this._windowWidth,n=this._windowHeight;return window.opera?(t=(screen.availWidth-i)/2,e=(screen.availHeight-n)/2):(t=(window.innerWidth-i)/2,e=(window.innerHeight-n)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,i,n)},_cleanup:function(){clearInterval(this._timer),this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)}},{start:function(){this._current&&this._current.destruct(),this._current=BEM.create("social-broker"),Lego.block["i-social"]={broker:this._current},this._current.start.apply(this._current,arguments)},onSuccess:function(){this._current.onSuccess.apply(this._current,arguments)},onFailure:function(){this._current.onFailure.apply(this._current,arguments)}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=!!this.elem("hint")[0])&&this.on("change",this._updateHint)._updateHint()},focused:function(){this.__base.apply(this,arguments),this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown||(this._dropdown=this.findBlockOutside("dropdown-menu")),this._dropdown&&this._dropdown.toggle(this.elem(this.elem("icon").length?"icon":"name"))}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("leftclick",function(t){this._onClick(t)}),!1}}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){var t=this;t.updateInformer(t.onUpdateSuccess,t.onUpdateError)}}},updateInformer:function(t,e){var i=this;i._getExporter().get({key:$.cookie("yandexuid")},function(i){i.unread?t.apply(this,arguments):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=parseInt(t.unread,10)||0,i=this.params.unreadMax;e&&i&&e>i&&(e=i+"+");var n=e?e+" ":"";BEM.DOM.update(this.domElem,n+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(),cache:!1,callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(){return BEM.blocks["i-global"].param("export-host")+"/for/unread.xml?callback=?"}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(t,e,i,n){$.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n))},_get:function(e,i,n,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){i.call(this.params.callbackCtx,r.data[s])},this):this._do(e,i,n,o)},_do:function(){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t){return"string"==typeof t?t:$.param(t)},putToCache:function(e,i,n){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(i,e);o.data[s]=n,o.keys.push(s)},dropCache:function(){delete t[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback(function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-->0?setTimeout(function(){o._do.apply(o,s)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber==t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),BEM.DOM.decl({block:"user",modName:"login",modVal:"known"},{onSetMod:{js:function(){this.channel("auth").on("notme",function(){this.delMod("login")},this)}}}),BEM.DOM.decl("userlist",{onSetMod:{js:function(){this.bindTo("item-user","click",this.switchTo)}},getEmbeddedAuth:function(){return this.auth?this.auth:this.auth=BEM.create("i-embeddedauth",this.params.auth)},switchTo:function(t){var e=$(t.currentTarget).data("uid");return this.getEmbeddedAuth().setData({uid:e},this.changeThis(this.switchResponse,this)).submit(),!1},switchResponse:function(t){switch(t.status){case"ok":case"action-not-required":return void this.goTo();default:this.goTo(this.params.passport)}},goTo:function(t){t?window.location=t:window.location.reload()}}),BEM.decl("i-embeddedauth",{addCallback:function(t){var e="cb"+Math.random();return this.callbacks||(this.callbacks={}),this.callbacks[e]=t,e},addQueryParam:function(t,e){var i=t.split("?"),n=i[1]?i[1].split("&"):[];return n.push(e),i[1]=n.join("&"),i.join("?")},bindCallback:function(){var t=this;window.mordaAuth={onResponse:function(e){if(!e)return void t.processResponse();for(var i=e.split("?")[1].split("&"),n={},o=0,s=i.length;s>o;o++){var r=i[o].split("=");n[r.shift()]=decodeURIComponent(r.join("="))}t.processResponse(n)}}},submit:function(){this.getForm().trigger("submit")},setData:function(t,e){if(t=$.extend({},this.params.params||{},t),this.idkey&&(t.idkey=this.idkey),e){var i=this.addCallback(e);t.retpath=this.addQueryParam(t.retpath,"from="+i)}return this.getForm().html(this.stringifyParams(t)),this},setDomain:function(){var t=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain!==t&&(document.domain=t)}catch(e){}},stringifyParams:function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=this.getInputHtml(i,t[i]));return e},getInputHtml:function(t,e){return'<input name="'+t+'" value="'+e+'"/>'},getForm:function(){if(this.form)return this.form;this.setDomain(),this.bindCallback();var t="embeddedauthframe"+parseInt(1e4*Math.random());return this.form=$('<form style="display:none" target="'+t+'" method="'+(this.params.method||"post")+'" action="'+this.params.action+'"></form>'),this.frame=$('<iframe style="display:none" name="'+t+'"></iframe>'),$("body").append(this.form,this.frame),this.form},processResponse:function(t){var e=function(){};if(!t)return void this.trigger("no-data");switch(t.from&&this.callbacks[t.from]&&(e=this.callbacks[t.from],this.callbacks[t.from]=!1),this.idkey=t.idkey,t.status){case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"action-not-required":case"ok":case"uid-empty":case"sessionid-invalid":case"session-no-uid":case"yu-empty":case"yu-invalid":case"captcha-invalid":case"captcha-required":return e(t),void this.trigger("data-received",t);case"internal-exception":return this.idkey="",this._interr?(e(t),void this.trigger("data-received",t)):(this._interr=!0,t.from&&(this.callbacks[t.from]=e),void this.submit());default:t.url?window.location=t.url:(e(t),this.trigger("data-received",t))}}}),function(t){var e=t.event.special.outsideclick={add:function(i){t(document).on("click."+i.guid,e.handler.bind(this))},remove:function(e){t(document).off("click."+e.guid)},handler:function(e){t.contains(this,e.target)||(e.type="outsideclick",t.event.handle.apply(this,arguments),e.type="click")}}}(jQuery),BEM.DOM.decl("paranja",{onSetMod:{js:function(){var t=this;$(t.params.rel).each(function(){$(this.elem||t.domElem).on(this.event,t[this.method].bind(t))}),this.bindTo("leftclick tap",function(){this.trigger("click")})},state:{open:function(){this.domElem.trigger("open")},close:function(){this.domElem.trigger("close")}}},open:function(){this.setMod("state","open")},close:function(){this.setMod("state","close")}},{live:!1}),function(){var t=$(window),e={};BEM.DOM.decl("header__action",{onSetMod:{js:function(){var t=this.params.group;(e[t]||(e[t]=[])).push(this)},pressed:{"":function(){var e=this.params.uniqId;BEM.blocks.input.un("focus"),BEM.blocks.button.un("focus"),BEM.blocks.paranja.un("click"),t.off("scroll."+e),t.off("closeUnder"),this.domElem.trigger("released")},yes:function(){var i=this,n=this.params.uniqId;$(e[this.params.group]).each(function(){this!=i&&this.delMod("pressed")}),BEM.blocks.input.on("focus",function(){i.delMod("pressed")}),BEM.blocks.button.on("focus",function(t){t.block.findBlockOutside("services-table")||i.delMod("pressed")}),BEM.blocks.paranja.on("click",function(){i.delMod("pressed")}),i.params.releaseByDocumentScroll&&t.one("scroll."+n,function(){i.delMod("pressed")}),t.one("closeUnder",function(){i.delMod("pressed")}),this.domElem.trigger("pressed")}}},getDefaultParams:function(){return{group:Math.random(),releaseByHeaderOutsideClick:!0,releaseByDocumentScroll:!0}}},{live:function(){return this.liveBindTo("leftclick tap",function(t){t.preventDefault(),this.toggleMod("pressed","yes","")}),!1}})}(),x.amd.require("statlog",function(t){BEM.DOM.decl({block:"header__action",modName:"type",modVal:"settings"},{onSetMod:{js:function(){this._dropdown||(this._dropdown=this.findBlockOutside("dropdown-menu")),this._dropdown.on("hide",this.changeThis(function(){this.delMod("pressed")}))},pressed:{yes:function(){var e=this;Lego.params.statRoot&&"undefined"!=typeof cp&&t.log("head.settings"),e.__base.apply(e,arguments),setTimeout(function(){e._dropdown&&e._dropdown.show(e)},50)},"":function(){this._dropdown&&this._dropdown.hide(this)}}}})}),BEM.DOM.decl("b-topbar",{onSetMod:{js:function(){var t=this;this.urls=BEM.DOM.extractParams(this.domElem[0])["b-topbar"],this._bindToggle(),this.popup=this._createPopup(),this._bindAutoclose(),this.has=$(".b-line_bar"),"yes"===this.getMod("expanded")?(this.state=1,window.opera?setTimeout(function(){t._show()},50):window.pl&&window.pl.notloaded.css?$(window).on("cssloaded.cacher",this.changeThis(function(){this._show()})):this._show()):this._notifyHasBlock()},expanded:{"":function(){this._notifyHasBlock(),this._switchCounters(this.domElem,".big.",".small."),this._switchCounters($(".b-popupa_overlapping_yes"),".big.",".small."),this._switchCounters($(".b-topbar__area"),".big",".small"),workerMessage("update",{name:"domik",visible:!1})},yes:function(){this._notifyHasBlock(),this._switchCounters(this.domElem,".small.",".big."),this._switchCounters($(".b-popupa_overlapping_yes"),".small.",".big."),this._switchCounters($(".b-topbar__area"),".small",".big"),workerMessage("update",{name:"domik",visible:!0})}}},_notifyHasBlock:function(){this.has.toggleClass("has_domik")},_switchCounters:function(t,e,i){t.find(".b-link").each(function(){var t=$(this).attr("onmousedown");t&&$(this).attr("onmousedown",t.replace(e,i))})},_createPopup:function(){var t=$(BEM.HTML.build({block:"popup",mods:{theme:"flat",behavior:"snap",autoclosable:"yes",direction:"down",animate:"yes"},mix:[{block:"b-topbar",elem:"popup"}],js:{zIndex:-31700},content:[{elem:"tail"},{elem:"under"},{elem:"content",mods:{padded:"old"}}]}));return t=this.findBlockOn(t,"popup"),t.elem("content").append($(".b-topbar__popup .popup__content > *")),t.on({"outside-click":function(t){t.preventDefault()}},this),t},_isPopupVisible:function(t){return t.hasClass("popup_visibility_visible")},_bindAutoclose:function(){var t,e=this;$(window).bind("popupopen.lego",function(){clearTimeout(t),e.popup.hide()}).bind("popupclose.lego",function(){if(!e.popup.isShown()||e.popup.isHiding()){var i=$(".header__action_type_settings.header__action_pressed_yes").length,n=$(".popup_langs_yes").hasClass("popup_visibility_visible"),o=$(".dropdown-menu__popup_extra_yes").hasClass("popup_visibility_visible");clearTimeout(t),t=setTimeout(function(){var t=$(".popup_user_yes").hasClass("popup_visibility_visible");!e.state||t&&i||t&&n||t&&o||e._isPopupVisible($(".popup_langs_yes"))&&n||e.popup.show(e._getSwitcher())},220+(window.device?200:0))}}).bind("popupredraw.lego keyboardOpened.lego keyboardClosed",function(){e.state&&e.popup.repaint()})},_bindToggle:function(){for(var t=this.findBlocksInside($(".b-topbar__toggler"),"b-link"),e=0;e<t.length;e++)t[e].on("click",this._toggle,this)},_show:function(){this.setMod("expanded","yes"),this.trigger("expanded"),this._save(1);var t=this._getSwitcher();this.popup.show(t)},_hide:function(){this.delMod("expanded"),this._save(0),this.popup.hide()},_getSwitcher:function(){return this.switcher||(this.switcher=$($.browser.msie&&$.browser.version<9?$(".user__icon:first").length?".user__icon:first":".user__enter":$(".user__name:first").length?$(".user__name:first").width()>30?".user__name:first":".user__icon:first":".user__enter")),this.switcher},_toggle:function(){this.popup.isShown()?this._hide():this._show()},_save:function(t){if(this.state!==t){this.state=t;var e=$(".b-topbar__frame");e.length||(e=$('<iframe class="b-topbar__frame" style="display:none"></iframe>'),$(document.body).append(e)),e.attr("src",this.urls[t?"open":"close"])}}}),BEM.DOM.decl({block:"b-topbar",modName:"update",modVal:"auto"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.xivaUrl&&this.params.uid&&(this.channel("mail").on("update",this.changeThis(this.changeNumbers)),this.barMailCount=this.elem("notifier","type","mail").find(".b-link__inner"),this._mailCount=parseInt(this.barMailCount.text(),10)||0,this.getXivaNotifier().connect(),home.getData("b-bar.mail-icon-exp")&&this.initMailPulse())}},getXivaNotifier:function(){return this._notif?this._notif:this._notif=BEM.create("i-xiva-notif",this.params)},changeNumbers:function(t,e){var i,n=!1;this.params.uid===e.uid&&(isNaN(e.count)||this._mailCount===e.count||(n=!0,this._mailCount=e.count),i=this._mailCount,this.barMailCount.html(i?"<b>"+i+"</b>":e.word||i),this.popup.elem("content").find(".b-topbar__notifier_type_mail .b-link__inner").html(i?"<b>"+i+" "+e.word+"</b>":e.word),n&&home.getData("b-bar.mail-icon-exp")&&(document.hidden?this.channel("sys").onFirst("visible",this.changeThis(this.notifyMail)):this.notifyMail()))},initMailPulse:function(){var t=$(".b-topbar__notifier_type_mail");t.addClass("pulse-animation-wrapper"),t.prepend('<span class="b-icon b-ico-redmail"></span>')},notifyMail:function(){var t=$(".b-topbar__notifier_type_mail");t.addClass("pulse-animation"),setTimeout(function(){t.removeClass("pulse-animation")},600)}}),function(t){BEM.decl("i-visibilitychange",{init:function(){var e=t.document,i=this.changeThis(this.normalize);this.hiddenProp="hidden",this.hiddenProp in e?e.addEventListener("visibilitychange",this.changeThis(function(){this.change(e.hidden)})):(this.hiddenProp="mozHidden")in e?e.addEventListener("mozvisibilitychange",i):(this.hiddenProp="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",i):(this.hiddenProp="msHidden")in e?e.addEventListener("msvisibilitychange",i):"onfocusin"in e?e.onfocusin=e.onfocusout=i:t.onpageshow=t.onpagehide=t.onfocus=t.onblur=i},normalize:function(e){var i,n=t.document,o={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0};e=e||t.event,i=e.type in o?o[e.type]:n[this.hiddenProp],n.hidden=i,$(t).trigger("visibilitychange"),this.change(i)},change:function(t){this.channel("sys").trigger("visibilitychange",{hidden:t}),this.channel("sys").trigger(t?"hidden":"visible")}}),BEM.create("i-visibilitychange").init()}(window),function(){var t=24,e=15,i=$.browser.opera&&$.browser.version<12.1?"keypress":"keydown";BEM.DOM.decl({block:"popup",modName:"behavior",modVal:"snap"},{onSetMod:{visibility:{visible:function(){this.__base(),this.hasMod("adaptive","yes")||this._bindToResize()},"":function(){this.__base(),this._unbindFromResize()}}},_calcLeft:function(){var i=this.getPopupSize(),n=this.getOwnerPos(),o=this.getOwnerSize(),s=n.left+o.width/2-t/2,r=n.left+o.width,a=document.body.offsetWidth;if(a-e>r&&a-e-s<i.width)return this.snap="right",a-e-i.width;if(n.left>0&&s<i.width+e)return this.snap="left",e;this.snap=!1;var c=this.__base.apply(this,arguments),u=c+i.width-(document.body.scrollWidth-e);return u>0&&(c-=u),c},_calcTop:function(){return this.__base.apply(this,arguments)},_show:function(t,e){var i={},n=document.body.scrollWidth,o=document.body.scrollHeight,s=this.domElem.offsetParent();return i.top=i.right=i.bottom=i.left="auto",t.left>n/2?i.right=s.width()-this.getPopupSize().width-t.left:i.left=t.left,t.top>o/2?i.bottom=s.height()-this.getPopupSize().height-t.top:i.top=t.top,this.__base.call(this,i,e)},getWindowSize:function(){return this._getSizeOf($(document))},onResize:function(){this._cache={},this._isHiding||this.repaint()},_onShown:function(){var t=this.__base.apply(this,arguments);return this.unbindFromDoc(i),t},_bindToResize:function(){this.bindToWin("resize",this.onResize)},_unbindFromResize:function(){this.unbindFromWin("resize")},_moveToContainer:function(){return this.domElem.parent().length?this:(this.__base.apply(this,arguments),this)}})}(),BEM.decl("i-user-services",{},{get:function(t){this._data?t(this._data):this._get(t)},getApiUrl:function(){return BEM.blocks["i-global"].param("pass-host")+"/services?callback=?"},_callbacks:[],_get:function(t){var e=this;e._callbacks.push(t),1==e._callbacks.length&&$.getJSON(e.getApiUrl(),{locale:BEM.blocks["i-global"].param("lang"),login:"yes","current-login":BEM.blocks["i-global"].param("login"),yu:$.cookie("yandexuid")},function(t){e._data=t,$.each(e._callbacks,function(){this(t)}),e._callbacks.length=0})}}),BEM.decl("i-user-services",{},{get:function(t){if(this._data)this.trigger(this._data,t);else{var e=this;this._get(function(i){e.trigger(i,t)})}},trigger:function(t,e){e(t),$(window).trigger("popupredraw.lego")}}),function(t,e,i,n){i.DOM.decl("b-head-user",{onSetMod:{js:function(){var t=this;this._maxLength=parseInt(this.params.maxlength,10),this._maxLengthRel=parseInt(this.params["maxlength-relative"],10),(""!==n.param("login")||n.param("displayName"))&&i.blocks["i-user-services"].get(function(e){t.buildHtml(e)})}},getDefaultParams:function(){return{maxlength:20,"maxlength-relative":3}},getUserItems:function(e){var o=e.displayName&&e.displayName.social?[{name:i.I18N("b-head-user","profiles"),url:n.param("social-host")}]:[{name:i.I18N("b-head-user","passport"),url:n.param("passport-host")+"/passport?mode=passport"},{name:i.I18N("b-head-user","change-password"),url:n.param("passport-host")+"/passport?mode=changepass&retpath="+encodeURIComponent(n.param("retpath"))+"/"}],s="";return t.each(o,function(t,e){s+='<li class="b-menu__layout-vert-cell'+(t==o.length-1?" b-menu__layout-vert-cell_position_last":"")+'"><div class="b-menu__item"><a class="b-link b-head-user__link" href="'+e.url+'">'+e.name+"</a></div></li>"}),s},buildHtml:function(e){if(e&&e.services){var o,s,r,a=this,c=e.displayName&&e.displayName.social,u=i.blocks["i-common__string"].cleverSubstring(t("<div/>").text(a.getUserLogin(e)).html(),a._maxLength,a._maxLengthRel),l=this.findBlocksOn("i-ctr")&&n.param("show-counters"),h="";o=c?'<b class="b-user b-user_social_yes"><span class="b-user__provider-ico" style="background:url(//static.yandex.st/social/current/icons/16/'+c.provider+'.png)"></span>'+u+"</b>":'<b class="b-user"><b class="b-user__first-letter">'+u.substring(0,1)+"</b>"+u.substring(1)+"</b>",h=a.params.href?a.params.href:c?n.param("social-host"):/\.com(.tr)?$/.test(location.hostname)?n.param("passport-host"):n.param("i-host")||"https://i.yandex.ru",s='<a class="b-link b-link_pseudo_yes '+(l?"i-ctr i-ctr_click_b-link ":"")+"i-bem\" onclick=\"return {'b-link':{}"+(l?",'i-ctr':{stat:'head-login'}":"")+'}"'+(!c&&a.hasMod("type","com")?"":' href="'+h+'"')+'><span class="b-link__inner">'+o+"</span></a>",r='<div class="b-dropdowna b-dropdowna i-bem" onclick="return {\'b-dropdowna\':{}}"><span class="b-dropdowna__switcher">'+s+'</span><div class="i-popup i-popup_autoclosable_yes i-popup i-bem" onclick="return {\'i-popup\':{}}"><div class="i-popup__content"><div class="i-popup__under b-popupa__under"></div><div class="b-popupa b-popupa_theme_ffffff b-popupa_direction_down i-bem b-dropdowna__popup" onclick="return {\'b-popupa\':{}}"><i class="b-popupa__shadow"></i><i class="b-popupa__tail"><i class="b-popupa__tail-i"></i></i><table cellpadding="0" cellspasing="0" class="b-popupa__wrap"><tr><td class="b-popupa__wrap-cell"><div class="b-popupa__content"><div class="b-menu b-menu_layout_vert b-dropdowna__menu"><ul class="b-menu__layout-vert">',c&&a.setMod("social","yes"),t.each(e.services,function(t){r+='<li class="b-menu__layout-vert-cell'+(0===t?" b-menu__layout-vert-cell_position_first":"")+'"><div class="b-menu__item">',r+=n.param("id")==this.id&&n.param("index")?"<strong>"+this.title+"</strong>":'<a class="b-link b-head-user__link" href="'+this.url+'" onmousedown="Lego.ch(\''+n.param("id")+".login.myservices."+this.id+"',this)\">"+this.title+"</a>",r+="</div></li>"}),e.services.length&&(r+='<li class="b-menu__layout-vert-separator"><i class="b-menu__separator"></i></li>'),r+=a.getUserItems(e),r+="</ul></div></div></td></tr></table></div></div></div></div>",i.DOM.update(a.findBlockInside("b-user").domElem,r)}},getUserLogin:function(t){var e=n.param("displayName");return e&&e.social&&e.name||t.displayName&&t.displayName.name||n.param("login")||t.login}})}(jQuery,window.Lego,BEM,BEM.blocks["i-global"]),function(t){BEM.DOM.decl("b-dropdowna",{onSetMod:{js:function(){this._getSwitcher().on("click",this._toggle,this)},disabled:function(t,e){this._getSwitcher().setMod(t,e),"yes"==e&&this.getPopup().hide()}},_getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside("b-"+(this.getMod(this.elem("switcher"),"type")||"link")))},_toggle:function(){this.getPopup().toggle(this.elem("switcher"))},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("b-popupa")).on("outside-click",function(e,i){this._getSwitcher().containsDomElem(t(i.domEvent.target))&&e.preventDefault()},this)},destruct:function(){var t=this._popup;t&&t.destruct(),this.__base.apply(this,arguments)}},{live:function(){this.liveInitOnEvent("switcher","leftclick",function(){})}})}(jQuery),BEM.HTML.decl("b-dropdowna",{onBlock:function(t){t.js(!0)}}),function(t){var e=["down-right","down","down-left","up","up-right","up-left","right-down","right","right-up","left-down","left","left-up"];BEM.DOM.decl("b-popupa",{onSetMod:{js:function(){this._owner=null,this._isShowed=!1,this._direction=this.getMod("direction")||"down",this._lastDirection=null,this._hasTail=!!this.elem("tail").length,this._hasTail||Object.keys(this.params).forEach(function(t){0===t.indexOf("tail")&&(this.params[t]=0)},this)}},show:function(t){return this._isShowed&&this._owner===t||(this._owner=t,this._getUnder().show({left:-1e4,top:-1e4}),this.pos(),this._getUnder().setMod("animate","yes")),this},hide:function(){return this._isShowed&&this._getUnder().hide(),this},toggle:function(t){return this.isShowed()?this.hide():this.show(t)},_pos:function(){var t=this._calcParams(this._owner);return this._hasTail&&this.elem("tail").css(t.tailOffsets),this.setMod("direction",t.direction)._getUnder().show(t.offsets),this},pos:function(){return this._isShowed?this._pos():this},isShowed:function(){return this._isShowed},setDirection:function(t){this._direction!=t&&(this._direction=t,this.isShowed()&&this.pos())},setContent:function(t,e,i){return BEM.DOM.update(this.elem("content"),t,e,i),this.isShowed()?this.pos():this},_isOwnerNode:function(){return!(!this._owner||!this._owner.jquery)},_calcDimensions:function(){var t=this._getUnder().domElem,e=this._getUnder()._getUnder(),i=this.__self.win,n=this._owner,o=this._isOwnerNode(),s=o?n.offset():n,r=o?n.outerWidth():0,a=o?n.outerHeight():0,c=i.scrollLeft(),u=i.scrollTop(),l=this.__self.getWindowSize(),h=parseInt(this.elem("content").css("border-top-width"),10);return{ownerWidth:r,ownerHeight:a,ownerLeft:s.left,ownerTop:s.top,ownerRight:s.left+r,ownerBottom:s.top+a,ownerHorizMiddle:s.left+r/2,ownerVertMiddle:s.top+a/2,posWidth:t.outerWidth(),posHeight:t.outerHeight(),underWidth:e.outerWidth(),underHeight:e.outerHeight(),borderWidth:isNaN(h)?0:h,windowLeft:c,windowRight:c+l.width,windowTop:u,windowBottom:u+l.height}},_calcParams:function(){var e=this._calcDimensions();
if(this.hasMod("adjustable","no"))return this.calcDirectionParams(this._direction,e);var i={},n=this.params.directions,o=t.inArray(this._direction,n);o>-1||(o=0);var s,r,a=o;do{if(s=n[o],r=i[s]=this.calcDirectionParams(s,e),!r.factor)return this._lastDirection=s,r;++o==n.length&&(o=0)}while(o!==a);return i[this._lastDirection||n[0]]},calcDirectionParams:function(t,e){var i,n=this.params,o={top:0,left:0},s={marginLeft:0,marginTop:0},r=t.split("-")[0],a=this._hasTail&&e.ownerWidth<n.tailWidthVertical?(n.tailWidthVertical-e.ownerWidth)/2:0,c=this._hasTail&&e.ownerHeight<n.tailHeightHorizontal?(n.tailHeightHorizontal-e.ownerHeight)/2:0;switch(t){case"up":case"down":o.left=e.ownerHorizMiddle-e.posWidth/2,o.top="down"==t?e.ownerBottom+n.tailHeightVertical:e.ownerTop-e.posHeight-n.tailHeightVertical,s.marginLeft=e.posWidth/2-n.tailWidthVertical/2,s.marginTop="down"==t?0-n.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":o.left="down-right"==t||"up-right"==t?e.ownerLeft-a:e.ownerRight-e.posWidth+a,o.top="down"==r?e.ownerBottom+n.tailHeightVertical:e.ownerTop-e.posHeight-n.tailHeightVertical,s.marginLeft=e.ownerWidth>e.posWidth?e.posWidth/2-n.tailWidthVertical/2:e.ownerHorizMiddle-o.left-n.tailWidthVertical/2,s.marginTop="down"==r?e.borderWidth-n.tailHeightVertical:0-e.borderWidth;break;case"left-down":case"right-down":o.left="left-down"==t?e.ownerLeft-e.posWidth-n.tailWidthHorizontal:e.ownerRight+n.tailWidthHorizontal,o.top=e.ownerTop-c,s.marginLeft="left-down"==t?0-e.borderWidth:e.borderWidth-n.tailWidthHorizontal,s.marginTop=e.ownerHeight<e.posHeight?e.ownerVertMiddle-o.top-n.tailHeightHorizontal/2:e.posHeight/2-n.tailHeightHorizontal/2;break;case"left":case"right":o.left="left"==t?e.ownerLeft-e.posWidth-n.tailWidthHorizontal:e.ownerRight+n.tailWidthHorizontal,o.top=e.ownerVertMiddle-e.posHeight/2,s.marginLeft="left"==t?0-e.borderWidth:e.borderWidth-n.tailWidthHorizontal,s.marginTop=e.posHeight/2-n.tailHeightHorizontal/2;break;case"left-up":case"right-up":o.left="left-up"==t?e.ownerLeft-e.posWidth-n.tailWidthHorizontal:e.ownerRight+n.tailWidthHorizontal,o.top=e.ownerBottom-e.posHeight+c,s.marginLeft="left"==r?0-e.borderWidth:e.borderWidth-n.tailWidthHorizontal,s.marginTop=e.ownerHeight>e.posHeight?e.posHeight/2-n.tailHeightHorizontal/2:e.ownerVertMiddle-o.top-n.tailHeightHorizontal/2}return i=this.calcInWindowFactor(o,e),{direction:r,factor:i,offsets:o,tailOffsets:s}},calcInWindowFactor:function(t,e){var i=0;return e.windowTop>t.top&&(i+=e.windowTop-t.top),t.top+e.underHeight>e.windowBottom&&(i+=t.top+e.underHeight-e.windowBottom),e.windowLeft>t.left&&(i+=e.windowLeft-t.left),t.left+e.underWidth>e.windowRight&&(i+=t.left+e.underWidth-e.windowRight),i},getDefaultParams:function(){return{tailOffset:19,tailWidthHorizontal:9,tailWidthVertical:19,tailHeightHorizontal:19,tailHeightVertical:10,shadowSize:7,directions:e}},destruct:function(){var t=this._under;t?this._destructing||(this._destructing=!0,this.hide(),BEM.DOM.destruct(!1,t.domElem),this.__base(!0)):this.__base.apply(this,arguments)},_getUnder:function(){if(!this._under){var e=t(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:this.getMod("autoclosable")||"yes",fixed:this.hasMod("direction","fixed")&&"yes"},underMods:this.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(this._under=this.findBlockOn(e,"i-popup")).on({show:this._onUnderShowed,hide:this._onUnderHidden,"outside-click":this._onUnderOutsideClicked},this).elem("content").append(this.domElem)}return this._under},_onUnderShowed:function(){this._isShowed=!0,this.bindToDomElem(t(window),"resize",this.pos)._isOwnerNode()&&this.bindToDomElem(this._owner.parents().add(this.__self.win),"scroll",this.pos),this.trigger("show")},_onUnderHidden:function(){this._isShowed=!1,this.unbindFromDomElem(t(window),"resize")._isOwnerNode()&&this.unbindFromDomElem(this._owner.parents().add(this.__self.win),"scroll"),this.trigger("hide")},_onUnderOutsideClicked:function(){this.trigger.apply(this,arguments)}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}}),BEM.HTML.decl("b-popupa",{onBlock:function(e){var i=!1;t.each(e.param("content"),function(t,e){return!(i="close"==e.elem)}),e.mods({theme:"ffffff",direction:"down","has-close":i&&"yes"}).js(!0).afterContent({elem:"shadow"})},onElem:{content:function(t){t.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(t){t.tag("i")},shadow:function(t){t.tag("i")},tail:function(t){t.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})}(jQuery),BEM.DOM.decl("b-popupa",{immediateHide:function(){return this._isShowed&&this._getUnder().delMod("animate").delMod("visibility"),this},onSetMod:{overlapping:{yes:function(){this.afterCurrentEvent(function(){this._bindOnShowHide()})}}},_pos:function(){var t=this._calcParams(this._owner);return this.elem("tail")&&this.elem("tail").css(t.tailOffsets),this.setMod("direction",t.direction)._getUnder().show(t.offsets),this}}),function(t){function e(){return s.length?s.shift():o?o.clone():o=n()}function i(t){s.push(t)}function n(){var e,i=(r.safari||r.webkit)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1;if(i)return t("<div/>");try{e=location.hostname!==document.domain}catch(n){e=!0}return t("<iframe"+(r.msie&&r.version<9?' frameborder="0"':"")+(r.msie&&e?" src=\"javascript:void(function(){document.open();document.write('&lt;script&gt;document.domain=\\'"+document.domain+"\\'&lt;/script&gt;');document.close();})()\"":"")+"/>")}var o,s=[],r=t.browser;BEM.DOM.decl("i-popup",{onSetMod:{js:function(){var e=t.browser;e.msie&&parseInt(e.version)>=9&&(this.domElem[0].onresize=function(){this.className+=""})},visibility:{visible:function(){var t=this._getUnder(),e=t.parent();this.hasMod(t,"type","paranja")?e.is("body")||t.appendTo("body"):e[0]!==this.domElem[0]&&t.prependTo(this.domElem),this._inBody||(this._inBody=!!this.domElem.appendTo("body")),this.trigger("show")},"":function(){var t=this._getUnder();this.hasMod(t,"type","paranja")&&t.remove(),this._putUnder(),this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=e().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){i(this._under),delete this._under},show:function(t){return t&&this.domElem.css(t),this.setMod("visibility","visible")},hide:function(){return this.delMod("animate").delMod("visibility")}},{live:!0})}(jQuery),BEM.HTML.decl("i-popup",{onBlock:function(t){t.mod("autoclosable","yes").js(!0).wrapContent({elem:"content"}).afterContent({elem:"under",mods:t.param("underMods"),mix:t.param("underMix")}).param("zIndex")&&t.attr("style","z-index:"+(32700+t.param("zIndex")))}}),function(t){var e=t.browser.opera&&t.browser.version<12.1?"keypress":"keydown";BEM.DOM.decl({name:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.afterCurrentEvent(function(){if(this.hasMod("visibility","visible")){var i=this._under;this.bindToDoc("leftclick",function(e){this.containsDomElem(t(e.target))||this._onOutClick(e)}).bindToDoc(e,function(t){27==t.keyCode&&this.hide()}),i&&i.is("iframe")&&this.hasMod(i,"type","paranja")&&this.bindToDomElem(t([i[0].contentWindow,i[0].contentWindow.document]),"leftclick",this._onOutClick)}}),this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("leftclick "+e).__base.apply(this,arguments)}}},_onOutClick:function(e){var i=t.Event("outside-click");this.trigger(i,{domEvent:e}),i.isDefaultPrevented()||this.hide()}})}(jQuery),BEM.HTML.decl("b-dropdowna",{onElem:{switcher:function(t){t.tag("span")}}}),function(){function t(){Lego.c("lego-ctr/p=show("+n(i())+")"),s=[]}function e(t){var e=t.split("-");return e.join("(")+new Array(e.length).join(")")}function i(){for(var t=[],e=0,i=s.length;i>e;e++){for(var n=s[e].split("-"),o=t,r=0,a=n.length-1;a>r;r++){var c=n[r];o[c]||(o[c]=[],o.push(c)),o=o[c]}o.push(n[n.length-1])}return t}function n(t){for(var e=[],i=[],o=0;o<t.length;o++){var s=t[o];t[s]?e.push(s+"("+n(t[s])+")"):i.push(s)}return e.length&&i.push(e.join("")),i.join(",")}function o(t){var e="-"+BEM.blocks["i-global"].param("id");return-1===t.indexOf(e,t.length-e.length)?t+=e:t}var s=[];BEM.DOM.decl("i-ctr",{onSetMod:{js:function(){this.setupShow(),this.setupClick()}},setupShow:function(){var e=o(this.params.stat);s.push(e),1==s.length&&this.afterCurrentEvent(function(){t()})},setupClick:function(){var t=this.getMod("click");t?this.findBlockOn(t).on("click",function(){this.sendClick()},this):this.bindTo("mousedown",this.sendClick)},sendClick:function(t){Lego.c("lego-ctr/p=click("+e(o(this.params.stat))+")",t&&t.target&&"A"===t.target.tagName.toUpperCase()&&t.target)}})}(),BEM.decl("i-xiva-notif",{changeNumbers:function(t,e){this.channel("mail").trigger("update",{uid:e,count:t,word:ya.decline(t,this.params.words||[])})},_update:function(t){"insert"===t.operation&&this.isItFreshMsg(t)&&this.changeNumbers(parseInt(t.message.new_messages,10),t.uid)},isItFreshMsg:function(t){var e=t.uid;if(e)return e in this.last||(this.last[e]=0),this.last[e]<t.lcn?(this.last[e]=t.lcn,!0):void 0},connect:function(){if(window.WebSocket&&this.params.xivaUrl){var t=this,e=new WebSocket(this.params.xivaUrl),i=!1;return this.last={},this.connectAttempts=0,e.onopen=function(){i=!0,setTimeout(function(){i&&(t.connectAttempts=0)},5e3)},e.onmessage=function(e){try{var i=JSON.parse(e.data);t._update(i)}catch(n){}},e.onclose=function(e){t.connectAttempts++;var n=6e4;i=!1,t.connectAttempts<=5?n=3e3:t.connectAttempts<=15&&(n=1e4),4e3===e.code&&(n=3e5),setTimeout(function(){t.connect()},n)},this}}}),function(){"use strict";var t=150,e=10,i=70,n=.77,o=!!detector.getCSS3TransformProperty(),s={SPACE:32};BEM.DOM.decl("domik2",{onSetMod:{js:function(){this.__base.call(this),this._$bar=$(".b-line_bar"),this._shown=this.hasMod("expanded","yes"),this._logged=this.hasMod("logged","yes"),this._openPopupCount=0,0===this.domElem.find(".domik2__dropdown-wrapper").length&&$(".domik2__dropdown-wrapper").appendTo(this.elem("expanded")),this._initToggle(),this._initSocial(),this._initRegisterPromo(),this._initMultiauthPromo(),this._initStale(),this._initPopupEvents(),this._initMailCountUpdate(),this._toggleBarClass(),this.hasMod("animation","pulse")&&this._initMailPulse()}},_initToggle:function(){this.bindTo("toggler","mousedown",this._preventSelection),this.bindTo("toggler","click",this._toggleExpanded)},_initSocial:function(){this.bindTo("social-more","mousedown",this._preventSelection),this.bindTo("social-more","click",this._toggleSocialExpander),this.bindTo("social-more","keydown",this._keydownSocialExpander)},_preventSelection:function(t){t.preventDefault()},_initRegisterPromo:function(){this.bindTo("dropdown-login-button","click",this._nextSlide)},_initMultiauthPromo:function(){var t=this.elem("dropdown-multiauth"),e=t.data("params");e&&((new Image).src=e.close),this.bindTo("dropdown-skip-multiauth","click",this._nextSlide),this.on("expanded",function(){this.elem("slide","type","current").find(".domik2__dropdown-multiauth").length&&(this._nextSlide(),this._minWidth=void 0,this.elem("dropdown-wrapper").css({display:"block","min-width":"","max-width":""}),this._initMinWidth())})},_initStale:function(){var t=this.findBlockInside("stale-not-me","button2");t&&t.on("click",this._nextSlide,this)},_initPopupEvents:function(){$(window).on("popupopen.lego",this.changeThis(this._hideDropdown)),$(window).on("popupclose.lego",this.changeThis(this._showDropdown))},_initMailCountUpdate:function(){$(window).on("mailcount",this.changeThis(this._updateMailCounter)),this.params.xivaUrl&&this.params.uid&&(BEM.create("i-xiva-notif",this.params).connect(),this.channel("mail").on("update",this.changeThis(function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)})))},_initMinWidth:function(){if(void 0===this._minWidth){var t,i,n,o=$(".user2"),s=o.width();this._$user2=o,i=this.elem("slide","visible","yes"),i.length||(i=this.elem("dropdown")),n=i.width(),t=$(window).width(),this._minWidth=s+Math.max(0,this.elem("expanded").offset().left-(t-n-e)),this._baseWidth=o.find(".b-link").width(),this._deltaWidth=this._minWidth-this._baseWidth}},_afterAnimation:function(e,i){var n=this;!o||void 0!==i&&i!==!0?e.call(this):setTimeout(function(){e.call(n)},t)},_toggleExpanded:function(){var t=this.hasMod("collapsed","yes");this._shown=t,this.toggleMod("collapsed","yes",!t),this.toggleMod("expanded","yes",t),this.trigger(t?"expanded":"collapsed"),this._toggleBarClass(),this._toggleBodyClass(),this._animateExpand(t,!0,function(){this.elem("toggler").attr("aria-expanded",t?"true":"false"),this._saveState(t),this._sendStat(t?"statExpand":"statCollapse"),workerMessage("update",{name:"domik",visible:this._shown})})},_animateExpand:function(s,r,a){var c,u,l,h,d=this;a=a&&a.bind(this),this._initMinWidth(),o?(c=this.elem("dropdown"),u=this.elem("dropdown-wrapper"),l=parseInt(u.css("min-width"),10),h=this.elem("expanded").offset().left,u.css({display:"block",visibility:"visible",height:"auto"}),s&&u.css({"min-width":0,"max-width":0}),this.domElem[0].domik2Anim=s?1:0,this.domElem.stop().animate({domik2Anim:s?0:1},{duration:t,step:function(t){var o,a,f,p,m,_;_=d._baseWidth+d._deltaWidth*(1-t),m=d._deltaWidth*(s?t-1:t),o=-i*t,a=1-(1-n)*t,p=$(window).width(),f=p-(h+m)-e,r&&d._$user2.css("min-width",_),c.css({"-webkit-transform":"translateY("+o+"px) scale("+a+")","-moz-transform":"translateY("+o+"px) scale("+a+")",transform:"translateY("+o+"px) scale("+a+")",opacity:1-t}),u.css({"min-width":Math.min(l,f),"max-width":f})},complete:function(){s||u.css("display","none"),a&&a()}})):(this._$user2.css("min-width",s?d._minWidth:0),a&&a(this))},_saveState:function(t){var e=t?"setOn":"setOff",i=this.params[e];if(i)try{var n=$(".domik2__frame");n.length||(n=$('<iframe class="domik2__frame" style="display:none"></iframe>'),$("body").append(n)),n.attr("src",i)}catch(o){}},_updateVisibleState:function(){clearTimeout(this._otherPopupTimeout),this._otherPopupTimeout=setTimeout(this.changeThis(function(){var t=0===this._openPopupCount,e=this.hasMod("expanded","yes");t!==e&&(this.toggleMod("expanded","yes",t),this._animateExpand(t))}),50)},_hideDropdown:function(){++this._openPopupCount,this._shown&&this._updateVisibleState()},_showDropdown:function(){--this._openPopupCount,this._shown&&this._updateVisibleState()},_keydownSocialExpander:function(t){return t.which===s.SPACE?(this._toggleSocialExpander(),!1):void 0},_sendStat:function(t){var e=this.params[t];e&&cp(e)},_toggleSocialExpander:function(){var t=this.hasMod("social-expanded","yes");return this.toggleMod("social-expanded","yes"),t=!t,this._afterAnimation(function(){this.toggleMod(this.elem("social-short-buttons"),"clickable","no")},t),this._sendStat("statSocialExpand"),this.elem("social-more").attr("aria-pressed",t?"true":"false"),!1},_nextSlide:function(){var t=this.elem("slide","type","current"),e=t.next();this.delMod(t,"type"),this.setMod(t,"animated","yes"),this.setMod(e,"visible","yes"),this._afterAnimation(function(){this.setMod(t,"hidden","yes"),this.setMod(e,"type","current")})},_updateMailCounter:function(t,e){var i=this.elem("notification","type","mail"),n=!1;isNaN(e.count)||this._count===e.count||(this._count=e.count,n=!0),i.each(function(){var t,i=$(this),n=i.closest(".domik2__collapsed").length>0;t=n?e.count?e.count:e.word:(e.count?e.count+" ":"")+e.word,i.toggleClass("domik2__notification_mod_mail-unread",e.count>0).find(".domik2__notification-content").text(t).end().find(".domik2__notification-content-alt").text(e.count)}),this.hasMod("animation","pulse")&&n&&(document.hidden?this.channel("sys").onFirst("visible",this.changeThis(this.notifyMailPulse)):this.notifyMailPulse())},_initMailPulse:function(){var t=this.elem("notification","type","mail");t.each(function(){$(this).prepend('<span class="domik2__notification-icon b-ico-redmail"></span>')})},notifyMailPulse:function(){var t=this;this.setMod("pulse","play"),setTimeout(function(){t.delMod("pulse")},600)},_toggleBarClass:function(){this._logged&&(this._$bar.toggleClass("has_domik",this.hasMod("collapsed","yes")),$(window).trigger("b-line_bar-update"))},_toggleBodyClass:function(){var t=this.hasMod("collapsed","yes");$("body").toggleClass("b-page_domik_new-hidden",t),$(".b-line_head .widgets-table").toggleClass("widgets-table_no-padding_yes",t)}})}(),BEM.DOM.decl("input2",{onSetMod:{js:function(){this._val=this.elem("control").val()},disabled:function(t,e){this.elem("control").attr("disabled","yes"===e)},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var i="yes"===e;i?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(i?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){if("undefined"==typeof t)return this._val;t=null===t?"":t.toString();var i=this.elem("control");return i.val()!==t&&i.val(t),this._val=t,this.trigger("change",e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)})}}),function(){var t,e=[],i=function(){e.forEach(function(t){t.val(t.elem("control").val())})},n=function(t){try{return t.activeElement}catch(e){}};BEM.DOM.decl("input2",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._instanceIndex=e.push(this)-1;var o=this.elem("control"),s=n(this.__self.doc[0]),r=this.params.autoFocus&&(!s||!$(s).is("input2, textarea"));(s===o[0]||r)&&(this.setMod("focused","yes")._focused=!0),t||(t=this.channel("sys").on({tick:i,idle:function(){t.un("tick",i)},wakeup:function(){t.on("tick",i)}})),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&38===t.which&&!$(t.target).is("input2, textarea")&&this.setMod("focused","yes")})}}},val:function(t,e){var i="undefined"!=typeof t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},_focus:function(){var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1),e.slice(this._instanceIndex).forEach(function(t){t._instanceIndex--})}},{})}(),BEM.DOM.decl("input2",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl("input2",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}},_onBoxClear:function(){this.hasMod("clear","visibility","visible")||this.hasMod("disabled","yes")||this.setMod("focused","yes")},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","mousedown",function(t){1===t.which&&this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","leftclick tap",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("box","leftclick tap",function(){this._onBoxClear()})}}),BEM.DOM.decl("checkbox2",{onSetMod:{js:function(){this.setMod("checked",this.elem("control").prop("checked")?"yes":""),this._isControlFocused()&&this.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this._isControlFocused()||this.elem("control").focus(),this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._isControlFocused()&&this.elem("control").blur(),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},checked:function(t,e){return this.isDisabled()?!1:(this.elem("control").prop("checked","yes"===e),this.afterCurrentEvent(function(){this.trigger("change",{checked:"yes"===e})}),void this.setMod(this.elem("box"),"checked",e))},disabled:function(t,e){this.elem("control").prop("disabled","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onClick:function(){this.isDisabled()||this.setMod("focused","yes")},_onChange:function(t){t.target.checked?this.setMod("checked","yes"):this.delMod("checked")},_onFocusInFocusOut:function(t){this.setMod("focused","focusin"===t.type?"yes":"")},_onMouseOverMouseOut:function(t){this.isDisabled()||this.setMod("hovered","mouseover"===t.type?"yes":"")},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("control","focusin focusout",function(t){this._onFocusInFocusOut(t)}).liveBindTo("mouseover mouseout",function(t){this._onMouseOverMouseOut(t)})}}),BEM.DOM.decl("checkbox2",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",function(){cp(this.params.stat)})}}}),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"serverside",modValue:"yes"},{onSetMod:{js:function(){var t=this;t._button=t.findBlockInside("button","button2"),t._username=t.findBlockInside("username","input2"),t._password=t.findBlockInside("password","input2"),t._password.on("change",t._onInputChange,t),t._username.on("change",t._onInputChange,t),t.redraw(),t._errorOn=null,t.bindTo("submit",t._onBeforeSubmit)}},_createSocial:function(){}})}(),function(){"use strict";var t=100;BEM.DOM.decl("media-queries",{onSetMod:{js:function(){var e;this.__base(),e=$.throttle(this.changeThis(this._updateMinified),t),this.bindToWin("resize",e),$(window).on("b-line_bar-update",e),this._updateMinified()}},_updateMinified:function(){var t=$(window).width();this._update(t)},_update:function(){}})}(),function(){"use strict";BEM.DOM.decl({block:"media-queries",modName:"type",modVal:"domik2"},{_update:function(t){this.__base.apply(this,arguments);var e,i=$(".b-line_bar"),n=i.hasClass("has_b-crimea"),o=i.hasClass("has_domik"),s=i.hasClass("has_logined"),r=i.hasClass("has_sethome"),a=i.hasClass("has_themes-promo");e=1130>t&&n&&o&&s&&r&&a||1100>t&&n&&o&&s&&r||1080>t&&o&&s&&r,this.domElem.toggleClass("domik2_minified_yes",e)}})}(),function(){"use strict";BEM.DOM.decl({block:"media-queries",modName:"type",modVal:"user2"},{_update:function(t){this.__base.apply(this,arguments);var e,i=$(".b-line_bar"),n=i.hasClass("has_b-crimea"),o=i.hasClass("has_domik"),s=i.hasClass("has_logined"),r=i.hasClass("has_sethome");e=1050>t&&n&&o&&s&&r,this.domElem.toggleClass("user2_minified_yes",e)}})}(),BEM.DOM.decl("b-form-button",{onSetMod:{js:function(){var t=this.isDisabled();(this._href=this.domElem.attr("href"))&&t&&this.domElem.removeAttr("href"),this.elem("input").attr("disabled",t)},focused:{yes:function(){var t=this;return t.isDisabled()?!1:(t.bindTo("keydown",this._onKeyDown).elem("input").is(":focus")||t.elem("input").focus(),void(t._unloadInited||(t._unloadInited=$(window).bind("unload",function(){t.delMod("focused")}))))},"":function(){this.unbindFrom("keydown").elem("input").blur()}},disabled:function(t,e){var i="yes"==e;this._href&&(i?this.domElem.removeAttr("href"):this.domElem.attr("href",this._href)),i&&this.domElem.keyup(),this.afterCurrentEvent(function(){this.domElem&&this.elem("input").attr("disabled",i)})},pressed:function(t,e){this.isDisabled()||this.trigger("yes"==e?"press":"release")},hovered:{"":function(){this.delMod("pressed")}},"*":function(t){return this.isDisabled()&&"hovered pressed".indexOf(t)>-1?!1:void 0}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_onKeyDown:function(t){var e=t.keyCode;13!=e&&32!=e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32==e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(t){this._onClick(t)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(e){var i=t[e.type];this.setMod(i.name,i.val||"")}).liveBindTo("mousedown",function(e){var i=t[e.type];1==e.which&&this.setMod(i.name,i.val||"")})}}),BEM.HTML.decl("b-form-button",{onBlock:function(t){t.tag(t.param("url")?"a":"span").attrs({href:t.param("url"),target:t.param("target")}).mods({size:t.mod("size"),theme:t.mod("theme")}).content([{elem:"left",tag:"i"},{elem:"content",tag:"span",content:{elem:"text",tag:"span",content:t.content()}}],!0).afterContent(t.param("type")?{elem:"input",attrs:{value:t.param("value")||"",type:t.param("type"),name:t.param("name"),disabled:t.mod("disabled")&&"disabled"}}:{elem:"click"}).js(!0)},onElem:{input:function(t){t.tag("input")},click:function(t){t.tag("i")}}}),BEM.DOM.decl("b-fade",{onSetMod:{js:function(){var t=this,e=this.params.target?this.findBlockOutside(this.params.target):this;e.domElem.bind("mouseenter",function(){t.setMod("hovered","yes"),clearTimeout(t.countdown)}).bind("mouseleave",function(){t.hide()}),this._bindEventsOnPopups()}},hide:function(){var t=this;t.countdown=setTimeout(function(){t._hide()},200)},_bindEventsOnPopups:function(){var t,e=this._getDropdownas(),i=e.length,n=this,o=function(){clearTimeout(n.countdown)},s=function(){n.hide()};for(t=0;i>t;t++)e[t].getPopup().domElem.unbind("mouseenter.b-fade",o).unbind("mouseleave.b-fade",s).bind("mouseenter.b-fade",o).bind("mouseleave.b-fade",s)},_getDropdownas:function(){return this.dropdownas&&this.dropdownas.length||(this.dropdownas=this.findBlocksInside("b-dropdowna")||[]),this.dropdownas},_hide:function(){var t,e=this._getDropdownas(),i=e.length;for(this.setMod("hovered",""),t=0;i>t;t++)e[t].getPopup().hide()}}),BEM.DOM.decl("b-keyboard-loader",{onSetMod:{js:function(){Lego.block["b-keyboard-loader"].call(this.domElem,this.params)}}}),function(t,e){e.block["b-keyboard-loader"]=function(i){function n(i){var n=i?"addClass":"toggleClass",o=c.find(".b-keyboard-popup"),s=e.block["b-keyboard"]._lastFocusedIn;o.length&&(c.find(".b-keyboard-popup__gap")[n]("i-hidden"),c.find(".b-keyboard-popup")[n]("i-hidden").hasClass("i-hidden")?(u.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego"),s&&s.focus()):u.trigger("keyboardOpened.lego"),o.data("isHidden",!1))}function o(){h||(e.cp(0,70873,BEM.blocks["i-global"].param("id")+"."+(i.autoLoad?"auto":"manual")),h=!0)}function s(t){return r()[t]}function r(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function a(e,i){var n=r(),o=[];n[e]=i,t.each(n,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var c=t(document.body),u=t(window),l=this;l.click(function(o){o.preventDefault();var s=t(this),r=(this.className.match(/b-keyboard-loader_lang_(\w+)/)||["",""])[1];if(c.find(".b-keyboard")[0])n();else{var a=BEM.blocks["i-global"].param("lego-static-host"),l=a+("/"===a.charAt(a.length-1)?"":"/")+"blocks-desktop/",h=[l+"b-keyboard/_keyboard.js"],d=t.browser.msie&&(!document.documentMode||document.documentMode<9)?".ie":"",f=[l+"b-keyboard/_keyboard"+d+".css"];s.append('<i class="b-keyboard-loader__progress"/>'),t.xLazyLoader({name:"b-keyboard",js:h,css:f,success:function(){e.block["b-keyboard-popup"]({lang:r,"for":i["for"]}),c.append("<div class=\"b-keyboard i-bem\" onclick=\"return {'b-keyboard': { lang:'"+r+"'}};\"></div>"),BEM.DOM.init(t(".b-keyboard")),s.find(".b-keyboard-loader__progress").remove(),u.trigger("keyboardOpened.lego",{afterLoad:!0})}})}}),u.bind("keyboardOpen.lego",function(){l.click()}).bind("keyboardClose.lego",n),i["for"]&&u.bind("keyboardOpened.lego",function(e,n){!(n&&n.afterLoad&&i.autoLoad)&&t(i["for"]).focus()}),u.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var i=l.find(".b-keyboard-loader__flag");i[0]&&("tt"===e&&(e="ru"),i.attr("src",i.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),i.storeState=i.storeState!==!1,i.storeState&&u.bind("keyboardOpened.lego",function(){a("keyboard_state","open");var e=s("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){a("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){a("keyboard_lang",e)}),(i.autoLoad=i.autoLoad||i.storeState&&"open"==s("keyboard_state"))&&l.click();var h;u.bind("keyboardOpened.lego",function(){o(),t("input:focus").focus()})}}(jQuery,window.Lego),function(t){function e(){function e(t,e){l[t](e,function(t){"error"==t?d.push(e):h.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function n(t){r.complete(t,h,d),r[t]("error"==t?d:h),clearTimeout(a),clearTimeout(c)}function o(){h.length==f.length?n("success"):h.length+d.length==f.length&&n("error")}function s(){d.push(this.src),o()}var r,a,c,u,l=this,h=[],d=[],f=[];this.init=function(i){if(i){if(r=t.extend({},t.xLazyLoader.defaults,i),u={js:r.js,css:r.css,img:r.img},t.each(u,function(t,e){"string"==typeof e&&(e=e.split(",")),f=f.concat(e)}),!f.length)return void n("error");r.timeout&&(a=setTimeout(function(){var e=h.concat(d);t.each(f,function(i,n){-1==t.inArray(n,e)&&d.push(n)}),n("error")},r.timeout)),t.each(u,function(i,n){t.isArray(n)?t.each(n,function(t,n){e(i,n)}):"string"==typeof n&&e(i,n)})}},this.js=function(e,n){var o=t('script[src*="'+e+'"]');if(o.length)return void(o.attr("pending")?o.bind("scriptload",n):n());var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),r.setAttribute("pending",1),r.onerror=s,t(r).bind("scriptload",function(){t(this).removeAttr("pending"),n(),setTimeout(function(){t(r).unbind("scriptload")
},10)});var a=!1;r.onload=r.onreadystatechange=function(){a||this.readyState&&!/loaded|complete/.test(this.readyState)||(a=!0,r.onload=r.onreadystatechange=null,t(r).trigger("scriptload"))},i.appendChild(r)},this.css=function(e,n){if(t('link[href*="'+e+'"]').length)return void n();var o=document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),t.browser.msie?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:t.browser.opera?o.onload=n:!function(){o&&o.sheet?n():c=setTimeout(arguments.callee,20)}(),i.appendChild(o)},this.img=function(t,e){var i=new Image;i.onload=e,i.onerror=s,i.src=t},this.disable=function(e){t("#lazy-loaded-"+e,i).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,i).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,i).remove()}}t.xLazyLoader=function(t,i){"object"==typeof t&&(i=t,t="init"),(new e)[t](i)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var i=document.getElementsByTagName("head")[0]}(jQuery),BEM.DOM.decl("b-keyboard-loader",{onSetMod:{js:function(){var t=this;Lego.block["b-keyboard-loader"].call(this.domElem,this.params),$(window).on("keyboardOpened.lego",function(){t.params.statOpen&&cp(t.params.statOpen)}).on("keyboardClosed.lego",function(e){"lego"===e.namespace&&t.params.statClose&&cp(t.params.statClose)})}}}),function(t,e){e.block["b-keyboard-loader"]=function(i){function n(i){t("body").removeClass("b-page_keyboard");var n=i?"addClass":"toggleClass",o=c.find(".b-keyboard-popup");if(o.length){if(c.find(".b-keyboard-popup__gap")[n]("i-hidden"),c.find(".b-keyboard-popup")[n]("i-hidden").hasClass("i-hidden")){u.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego");var s=e.block["b-keyboard"]._lastFocusedIn;void 0!==s&&s.focus()}else u.trigger("keyboardOpened.lego");o.data("isHidden",!1)}}function o(){d||(e.cp(0,70873,BEM.blocks["i-global"].param("id")+"."+(i.autoLoad?"auto":"manual")),d=!0)}function s(t){return r()[t]}function r(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function a(e,i){var n=r(),o=[];n[e]=i,t.each(n,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var c=t(document.body),u=t(window),l=this;l.click(function(o){o.preventDefault();var s=t(this),r=(this.className.match(/b-keyboard-loader_lang_(\w+)/)||["",""])[1];if(c.find(".b-keyboard")[0])n();else{var a=BEM.blocks["i-global"].param("lego-static-host-keyboard"),l=a+("/"===a.charAt(a.length-1)?"":"/")+"blocks/big/",h=[l+"b-keyboard/_keyboard.js"],d=t.browser.msie&&(!document.documentMode||document.documentMode<9)?".ie":"",f=[l+"b-keyboard/_keyboard"+d+".css"];s.append('<i class="b-keyboard-loader__progress"/>'),t.xLazyLoader({name:"b-keyboard",js:h,css:f,success:function(){e.block["b-keyboard-popup"]({lang:r,"for":i["for"]}),c.append("<div class=\"b-keyboard i-bem\" onclick=\"return {'b-keyboard': { lang:'"+r+"'}};\"></div>"),BEM.DOM.init(t(".b-keyboard")),s.find(".b-keyboard-loader__progress").remove(),u.trigger("keyboardOpened.lego",{afterLoad:!0}),t(".b-keyboard").on("click",".b-keyboard__key",function(){var e=t("#text").offset().top;t(".b-keyboard-popup").offset().top<e+30&&window.scrollTo(0,e-20)})}})}}),u.bind("keyboardOpen.lego",function(){l.click()}).bind("keyboardClose.lego",n),i["for"]&&u.bind("keyboardOpened.lego",function(e,n){!(n&&n.afterLoad&&i.autoLoad)&&t(i["for"]).focus()}),u.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var i=l.find(".b-keyboard-loader__flag");i[0]&&("tt"===e&&(e="ru"),i.attr("src",i.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),i.storeState=i.storeState!==!1,i.storeState&&u.bind("keyboardOpened.lego",function(){a("keyboard_state","open");var e=s("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){t("body").removeClass("b-page_keyboard"),a("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){a("keyboard_lang",e)});var h="#kb"===window.location.hash;(i.autoLoad=i.autoLoad||i.storeState&&"open"===s("keyboard_state")||h)&&l.click();var d;u.bind("keyboardOpened.lego",function(){o(),t("input:focus").focus(),t("body").addClass("b-page_keyboard")})}}(jQuery,window.Lego),function(t){function e(){function e(t,e){l[t](e,function(t){"error"==t?d.push(e):h.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function n(t){r.complete(t,h,d),r[t]("error"==t?d:h),clearTimeout(a),clearTimeout(c)}function o(){h.length==f.length?n("success"):h.length+d.length==f.length&&n("error")}function s(){d.push(this.src),o()}var r,a,c,u,l=this,h=[],d=[],f=[];this.init=function(i){if(i){if(r=t.extend({},t.xLazyLoader.defaults,i),u={js:r.js,css:r.css,img:r.img},t.each(u,function(t,e){"string"==typeof e&&(e=e.split(",")),f=f.concat(e)}),!f.length)return void n("error");r.timeout&&(a=setTimeout(function(){var e=h.concat(d);t.each(f,function(i,n){-1==t.inArray(n,e)&&d.push(n)}),n("error")},r.timeout)),t.each(u,function(i,n){t.isArray(n)?t.each(n,function(t,n){e(i,n)}):"string"==typeof n&&e(i,n)})}},this.js=function(e,n){var o=t('script[src*="'+e+'"]');if(o.length)return void(o.attr("pending")?o.bind("scriptload",n):n());var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),r.setAttribute("pending",1),r.onerror=s,t(r).bind("scriptload",function(){t(this).removeAttr("pending"),n(),setTimeout(function(){t(r).unbind("scriptload")},10)});var a=!1;r.onload=r.onreadystatechange=function(){a||this.readyState&&!/loaded|complete/.test(this.readyState)||(a=!0,r.onload=r.onreadystatechange=null,t(r).trigger("scriptload"))},i.appendChild(r)},this.css=function(e,n){if(t('link[href*="'+e+'"]').length)return void n();var o=document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),t.browser.msie?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:t.browser.opera?o.onload=n:!function(){o&&o.sheet?n():c=setTimeout(arguments.callee,20)}(),i.appendChild(o)},this.img=function(t,e){var i=new Image;i.onload=e,i.onerror=s,i.src=t},this.disable=function(e){t("#lazy-loaded-"+e,i).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,i).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,i).remove()}}t.xLazyLoader=function(t,i){"object"==typeof t&&(i=t,t="init"),(new e)[t](i)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var i=document.getElementsByTagName("head")[0]}(jQuery),BEM.DOM.decl("b-menu",{onElemSetMod:{trigger:{state:function(t,e,i){this.toggleMod(this.findElem(t.closest(this.buildSelector("layout-vert-cell")),"item-content").eq(0),"visibility","visible","opened"==i).trigger("trigger",{domElem:t,state:i})}},item:{state:{current:function(t){var e=this,i=e.__self.getName(),n=e.elem("item","state","current").filter(function(){return $(this).closest(e.buildSelector()).bem(i)===e});e.findElem(t.parents(e.buildSelector("item-content")).prev(e.buildSelector("item")),"trigger").each(function(){e.setMod($(this),"state","opened")}),e.delMod(n,"state").trigger("current",{prev:n,current:t})}}}},onTriggerClick:function(t){t.preventDefault(),this.toggleMod(t.data.domElem,"state","opened")},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.hasMod(e,"state","disabled")||this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("trigger","leftclick",function(t){this.onTriggerClick(t)}).liveBindTo("item-selector","leftclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["b-link"].on(this.elem("samples"),"click",this._onSampleClick,this)}},disabled:function(t,e){this.findBlocksInside(this.elem("samples"),"b-link").forEach(function(i){i.setMod(t,e)})}},destruct:function(){BEM.blocks["b-link"].un(this.domElem,"click"),this.__base.apply(this,arguments)},_onSampleClick:function(t){var e=t.target.domElem,i=this.elemParams(e);this.val("val"in i?i.val:e.text(),{source:"sample"})}}),BEM.DOM.decl("input",{_onSampleClick:function(){this.__base.apply(this,arguments),this.noSuggest=!0,this.setMod("focused","yes"),this.noSuggest=!1}}),BEM.DOM.decl({block:"input",modName:"keyboard",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).bind("keyboardOpened.lego",this.changeThis(function(){this.setMod("focused","yes")._focused=!0}))}}}),BEM.DOM.decl({name:"input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var t=$.browser.opera&&$.browser.version<12.1?"keypress":"keydown",e=this;this.__base(),this._ahead=this.buildAhead(),this._intent=!1,this._text=this.val(),this._preventAhead=!1,this._lastBackspace=0,this._filler="",this._hint="",this.on("change",this._onTextChange).bindTo("click",function(t){if(!this._preventAhead&&this.elem("input").is(t.target)){var i=t.pageX-this.domElem.offset().left-parseInt(this.elem("input").css("padding-left"),10),n=this.elem("ahead-filler").width(),o=this.elem("ahead-hintholder").width();i>n&&o>i&&(this.trigger("ahead-click"),setTimeout(function(){e._fill({usage:"mouse"})},0))}}).bindTo(t,this._onKeyDown),this.elem("ahead-hint").on("focus",function(){e.elem("input").focus()})}},_onKeyDown:function(t){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),t.which){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:!this._isPopupShown||t.ctrlKey||t.altKey||(t.preventDefault(),this._fill({usage:"tab"}));break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&t.preventDefault()}},setAhead:function(t,e,i){return this._preventAhead?!1:i.items&&t===i.items[0]||i.val!==this.val()?this._clearAhead():(this.elem("ahead-hintholder").text(e),void(this._intent=this._showAhead(t,t+e)))},unsetAhead:function(){this._clearAhead(),this._intent=!1},onPopupShow:function(){this._isPopupShown=!0},onPopupHide:function(){this._preventAhead=!0,this._clearAhead()},_onTextChange:function(){var t=this._text.length-(this._text=this.val()).length;t>0&&this.shiftAhead(t),this._intent&&!this._intent.match("^"+BEM.blocks["i-common__string"].escapeRegExp(this.val()))&&this._clearAhead()},_fill:function(t){var e=$.extend(t,{chars:this._intent.length-this._text.length});if("string"==typeof this._intent&&e.chars>0){try{var i=document.createEvent("TextEvent");i.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._text.length,this._input.dispatchEvent(i)}catch(n){var o=this.elem("input").get(0);if(this.val(this._intent),o.createTextRange){var s=o.createTextRange();s.moveEnd("character",this._text.length),s.collapse(!1),s.select()}}this.trigger("ahead-fill",e)}return e.chars>0},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},buildAhead:function(){return this._ahead=$(BEMHTML.apply({block:"input",elem:"ahead"})),BEM.DOM.before(this.elem("control"),this._ahead),this._ahead},_setAhead:function(t,e){return this.elem("ahead-filler").text(!this._preventAhead&&(this._filler=t)||""),this.elem("ahead-hint").val(!this._preventAhead&&(this._hint=e)||""),this.elem("ahead-hintholder").text(!this._preventAhead&&e||""),e},_showAhead:function(t,e){return"undefined"==typeof t&&this._clearAhead(),this._setAhead(t,e)},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(t){var e=this._filler.slice(0,-t);return this._setAhead(e,this._hint)}}),function(){var t=function(t){var e=t.charCode||t.keyCode||t.which||0,i=t.ctrlKey||t.altKey||t.metaKey,n=e>=48&&57>=e,o=e>=96&&105>=e,s=[e>=65&&90>=e,e>=1025&&1071>=e,0===e,231===e,186===e,String.fromCharCode(e).toLowerCase()!==String.fromCharCode(e).toUpperCase()].some(Boolean);return!i&&(n||o||s)};BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"capture"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}},listen:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},no:function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(e){if(!this.hasMod("focused","yes")&&!$(".popup_visibility_visible:not(.b-topbar__popup), .v_sform_bg:visible, .left-banner-opened").length){var i;try{i=document.activeElement.tagName.toLowerCase()}catch(e){}if(t(e)&&"input"!==i&&"textarea"!==i){var n=this.elem("control")[0],o=this.val();if(o.length>0&&" "!==o.slice(-1)&&(o+=" ",this.val(o)),n.createTextRange){var s=n.createTextRange();s.collapse(!1),s.select()}else n.selectionStart&&n.setSelectionRange(o.length,o.length);this.setMod("focused","yes")}}}})}(),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"normal"},{getPopupWidth:function(){return this._input.width()}}),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"normal"},{getPopupWidth:function(){var t=this._input.width();return $("html").hasClass("ios-simplified")?t:t-2}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{init:function(){this.__base.apply(this,arguments),this._winResizeCallback=function(){this._popup.width(this.getPopupWidth())}.bind(this),this.__self._bindToWinResize(this._winResizeCallback)},destruct:function(){this.__base.apply(this,arguments),BEM.DOM.blocks.suggest2._unbindFromWinResize(this._winResizeCallback)}},{_resizeCallbacks:[],_bindToWinResize:function(t){return this._resizeCallbacks.push(t),this},_unbindFromWinResize:function(t){for(var e=0;e<this._resizeCallbacks.length;e++)if(this._resizeCallbacks[e]===t)return this._resizeCallbacks.splice(e,1),this;return this},_getResizeCallback:function(){return $.throttle(function(){var t=arguments;this._resizeCallbacks.forEach(function(e){e.apply(this,t)},this)},300,this)},live:function(){this.__base.apply(this,arguments),this._resizeCallback=this._getResizeCallback(),BEM.DOM.win.on("resize",this._resizeCallback)}}),BEM.DOM.decl("suggest2-counter",{onSetMod:{js:{inited:function(){this.clear()}}},getDefaultParams:function(){return{submitBySelect:!1,preventSubmit:!0,host:"//yandex.ru",path:"clck/jclck",dataUrl:"http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){var t=this;return t._params={user_input:"",text:""},t._times=[],t._path={service:t.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},t._ratio={len:0,queryLen:0,actionsCount:0},t._firstChange=0,t._lastChange=0,t._sinceChange={first:0,last:0},t._selectedText="",t._session=0,t._meta={},t._afterSendAjaxCallback,t},submit:function(t){var e=this,i=e.params.suggest.params["suggest2-input"];e._params.text=i.val(),e._params.pos=i.getCaretPosition(),e._selectedText&&e._selectedText!==e._params.text&&(e._path.state="edit"),e.sendAjax(e.getUrl(),$.extend({submitForm:!0},t)),this.trigger("submit",this._getSubmitEventData()).clear(),this._params.prev_query=i.val()},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._times,prev_query:t._params.prev_query,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this.params.timeout,cache:!0}).always(function(){this.params.preventSubmit&&e.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1}),this._afterSendAjaxCallback&&this._afterSendAjaxCallback()}.bind(this)),this},afterSendAjax:function(t){return this._afterSendAjaxCallback=t,this},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,i){return e.concat(t._getParams(i))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession()]},initValues:function(){return this._params.prev_query=this.params.suggest.params["suggest2-input"].val(),this},bindEvents:function(){var t,e=this,i=e.params,n=i.suggest;return i.form.on("button-click",function(){"keyboard"!==e._path.submit&&(e._path.submit="button_by_mouse")}),i.form.on("submit",function(t,n){n.data.block!==e.__self.getName()&&n.data.prevent!==!1&&(i.preventSubmit&&(n.stopImmediatePropagation(),n.preventDefault()),e.submit())}),n.getModel().on({request:function(){t=new Date},response:function(i,n){e._path.personal=e._hasPersonal(n.data.items)?"nah_not_used":"nah_not_shown",e._meta=n.data.meta||{},e._addTime(new Date-t),e._setMetaProps(n)}}),n.params["suggest2-input"].on({change:function(t,i){i&&"clear"!==i.source||(e._params.user_input=t.block.val(),e[e._firstChange?"_lastChange":"_firstChange"]=new Date),e._ratio.actionsCount++},enter:function(){e._path.submit="keyboard"}}),n.params["suggest2-popup"].on({show:function(){e._path.state="not_used"},hide:function(t,i){"empty"===i.response&&(e._path.state="not_shown")}}),BEM.blocks["suggest2-item"].on(n.domElem,{enter:function(t,i){i.byKeyboard&&e.params.suggest.params.updateOnEnterByKeyboard&&(e._selectedText=i.val,e._path.state="suggest")}}),n.on({select:function(t,n){e._path.state=n.byKeyboard?"keyboard":"mouse",e._path.index=n.itemIndex+1,e._selectedText=n.val,n.item.hasMod("personal")&&(e._path.personal="nah_used"),i.submitBySelect&&(e._path.submit=n.byKeyboard?"keyboard":"click_by_mouse",e._params.pos=n.pos,e._params.text=e._selectedText)}},e),e},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,i){return""===t[i]?e:(e.push(i+"="+encodeURIComponent(t[i]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){return{since_first_change:this._getSinceTime("first"),since_last_change:this._getSinceTime("last")}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addTime:function(t){return this._times.push(t),this._params.times=this._times.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{val:function(){return!1},onSelect:function(t){return t&&(window.location=this.elem("link").attr("href")),this.__base.apply(this,arguments)}}),BEM.DOM.decl("arrow",{onSetMod:{js:function(){var t=this;this.__base(),this.input=this.findBlockInside("input"),this.suggest=this.findBlockInside("suggest2");var e=this.findBlockInside("input__sample");e&&e.bindTo("click",function(){var e=t.domElem.find("input[name='nl']");t.params.nl&&!e.length&&(e=$('<input type="hidden" name="nl" value="1"/>').insertAfter(t.input.domElem))}),this._initPrefetch()}},_getParams:function(){var t=this.domElem.find("input"),e={};return t.each(function(){var t=$(this),i=t.prop("name");i&&(e[t.prop("name")]=t.val())}),e.prefetch=1,e},_serializeFormParams:function(t,e){var i=[];t.text=e;for(var n in t)t.hasOwnProperty(n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return"?"+i.join("&")},_initPrefetch:function(){var t=this,e=!1;t._prefetchStarted={},t._prefetchLoaded={},window.sessionStorage&&t.params.prefetch&&(this.domElem.on("submit",function(){var i=t.input.val();t._prefetchStarted[i]&&(e||(e=!0,t.domElem.append('<input type="hidden" name="prefetch" value="1">'),t._prefetchLoaded[i]||t.domElem.append('<input type="hidden" name="unfinished" value="1">'))),window.sessionStorage.setItem("x",(new Date).getTime())}),"etalon"!==t.params.prefetch&&this.suggest.on("model-ready",function(){t.suggest.getModel().on("response",function(e,i){var n,o,s,r=i&&i.data,a=r&&r.meta&&"yes"===r.meta.instant;if(a&&r.items.length){if(n="ahead"===t.params.prefetch?r.meta&&r.orig&&r.meta["continue"]&&r.orig+r.meta["continue"]:r.items[0]instanceof Array?r.items[0][1]:r.items[0],!n)return;o=t._getParams(),t._prefetchStarted[n]||(t._prefetchStarted[n]=!0,s=new Image,s.src=t.domElem.attr("action")+t._serializeFormParams(o,n),s.onload=s.onerror=function(){t._prefetchLoaded[n]=!0})}})}))}}),$(function(){"use strict";function t(){$(window).unbind("resize.b-twocolumns").bind("resize.b-twocolumns",t);var e,i=s.children(":visible").length-r.children(":visible").length;if(-1>i)for(e=0;-i>e;e+=2)s.append(r.children().first());else if(i>1)for(e=0;i>e;e+=2)r.prepend(s.children().last())}var e=$("<div></div>")[0],i=["MozColumnCount","columnCount","WebkitColumnCount"].some(function(t){return t in e.style});if(!i){var n=$(".b-twocolumn"),o=n.not(".b-morda-search_nojs .b-twocolumn").children(),s=$('<div class="b-twocolumn__left"></div>'),r=$('<div class="b-twocolumn__right"></div>'),a=Math.ceil(o.length/2);o.each(function(t){(a>t?s:r).append(this)}),n.append(s).append(r),$(window).bind("balance.b-twocolumns",t),$(window).bind("unbalance.b-twocolumns",function(){$(window).unbind("resize.b-twocolumns")})}}),function(t,e){BEM.DOM.decl("b-head-tabs",{onSetMod:{js:function(){e.block["b-head-tabs"].call(this,this.params)}}});var i=e.block["b-head-tabs"]=function(e){function n(e,i){var n=p[e]||{};return!n.clid&&i&&(n.clid=i),t.each(_[e]||[],function(){d[this]&&(n[this]=d[this])}),n}function o(e,i){var n=[].concat(g[e]),o=e+h;("imageswww"==o||"wwwimages"==o)&&n.push("site");var s=m[e]||{};return t.each(n,function(){d[this]&&(s[this]=d[this])}),!s.clid&&i&&"www"!==e&&(s.clid=i),s}function s(e){var i={};return e?(t.each(e.substr(1).split("&"),function(){var e=this.split("="),n=e[0],o=e[1];if(n)if(i.hasOwnProperty(n)){var s=i[n];t.isArray(s)?s.push(o):i[n]=[s,o]}else i[n]=o}),void 0!==t.decodeURIComponent?r(i):i):i}function r(e){var i=["site"];return t.each(e,function(n,o){t.inArray(n,i)>-1&&(e[n]=t.isArray(o)?o.map(function(e){return t.decodeURIComponent(e)}):t.decodeURIComponent(o))}),e}var a,c=this.findBlockOutside("b-page").findBlockInside("b-head-search"),u=c&&c.findBlockInside("b-search"),l=u&&u.findBlockInside("b-form-input"),h=BEM.blocks["i-global"].param("id"),d=function(){var e=s(window.location.search),i=/^#.*(\?.+)$/.exec(window.location.hash);return i&&t.extend(e,s(i[1])),e}(),f={www:505,search:521,images:526}[h]||527,p={market:{cvredirect:2,clid:f}},m={news:{rpt:"nnews2",grhow:"clutop"},haber:{rpt:"nnews2",grhow:"clutop"},yaca:{rpt:"rs2"},market:{cvredirect:2,clid:f},blogs:{ft:"blog"},people:{filter:"people"},appsearch:{filter:"mobile_apps"}},_=function(){var e={};return t.each(["news","yaca","market","blogs","maps","adresa","video","fotki","slovari","auto","images","music","www","aile","yandex","haber","gorsel"],function(){e[this]=["family"]}),e}(),g=function(){var e={};return t.each(["news","yaca","market","blogs","maps","adresa","video","fotki","slovari","auto","images","music","www","aile","yandex","haber","gorsel"],function(){e[this]=["noreask","family"]}),e}(),b=this.domElem.find(':not(strong)>a.b-head-tabs__link:not([href$="/all"])').map(function(){var e=this.host.split(".")[0],r=s(this.search),a=r.clid,c=decodeURIComponent(t.param(t.extend(r,n(e,a)),!0)),u=this.pathname.replace(/^\/?(.*)/,"/$1"),l=i.getHostToUrlMap()[e];return l&&u.indexOf(("/"===l.charAt(0)?"":"/")+l)>-1&&(l=""),u=u.slice(1),u.length&&(u=u.replace(/\/*$/,"/")),{node:this,clid:a,toServiceId:e,path:l,pathname:u,host:this.host,searchHost:i.getHostMap()[e],noSearchParamsUrl:c?"?"+c:"",searchParams:t.extend(r,o(e,a))}}).filter(function(){return"undefined"!=typeof this.path}),v=u&&u.elem("advanced")[0];if(v&&v.pathname){var y=s(v.search),w=v.pathname.replace(/^\/?(.*)/,"$1");y.text="",b.push({node:v,clid:y.clid,toServiceId:h,path:"",pathname:w,host:v.host,noSearchParamsUrl:"?"+t.param(y,!0),searchParams:y})}!function(){var n=l&&t.trim(l.val())||e["default"];a!=n&&(a=n,t.each(b,function(){n&&(this.searchParams[i.getSearchParamName(this.toServiceId)]=n),this.node.href=[this.node.protocol+"/",n&&this.searchHost?this.searchHost:this.host,this.pathname+(n?this.path+"?"+t.param(this.searchParams,!0):this.noSearchParamsUrl)].join("/")})),setTimeout(arguments.callee,200)}()};t.extend(i,{getHostToUrlMap:function(){var t={www:"yandsearch",market:"search.xml",maps:"",music:"#!/search",video:"search"};return t.translate=t.ceviri=t.harita=t.maps,t.blogs=t.adresa=t.fotki=t.slovari=t.auto=t.rabota=t.market,t.appsearch=t.people=t.news=t.yaca=t.images=t.gorsel=t.haber=t.yandex=t.www,t.afisha=t.pogoda=t.hava=t.video,t},getHostMap:function(){return{}},getSearchParamName:function(t){switch(t){case"pogoda":case"hava":return"request";default:return"text"}}})}(jQuery,window.Lego),$(document).ready(function(){function t(t,e){return t+(e.length?(-1!==t.indexOf("?")?"&":"?")+e:"")}function e(t){return tabParams.searchParamName&&tabParams.searchParamName[t]?tabParams.searchParamName[t]:""}function i(){var i=encodeURIComponent($.trim(n.val()));r&&i===s||(r=!0,s=i,o.map(function(){var n,o,s,r=(this.host,$(this).attr("id").split("-")[1]),a="",c="",u="";if(tabParams.url[r]&&(n=tabParams.url[r]),tabParams.searchUrl[r]&&(s=tabParams.searchUrl[r]),i&&s||!tabParams.noSearchDefParamsMap||!tabParams.noSearchDefParamsMap[r]?i&&tabParams.searchDefParamsMap&&tabParams.searchDefParamsMap[r]&&(a=$.param(tabParams.searchDefParamsMap[r])):a=$.param(tabParams.noSearchDefParamsMap[r]),c=$.param(tabParams.commonParams),u=[c,a].filter(function(t){return t.length}).join("&"),s&&i||(o=t(n,u)),s&&i){var l=e(r);o=t(s,u),o=t(o,l+"="+i)}$(this).attr("href",o)}))}if(window.tabParams){var n=$("#text"),o=$("a.b-head-tabs__tab-link:not(.b-link_pseudo_yes)");if(n.length||(n=tabParams.elemSearch),!o.length&&tabParams.elemTabs&&(o=tabParams.elemTabs),n.length&&o.length){var s="",r=!1;setInterval(i,200)}}}),BEM.DOM.decl("b-head-tabs",{onSetMod:{js:function(){var t=this.findBlockInside("b-popupa");t&&(t.on("show",function(){this.afterCurrentEvent(function(){$(window).trigger("balance.b-twocolumns")})}),t.on("hide",function(){$(window).trigger("unbalance.b-twocolumns")}))}}}),function(){"use strict";var t=250;BEM.DOM.decl("hint",{onSetMod:{js:function(){this.bindTo("item","mouseenter",this._onItemOver),this.bindTo("item","mouseleave",this._onItemOut)}},_onItemOver:function(e){var i=this,n=$(e.target).closest(".hint__item");clearTimeout(this._timer),this._timer=setTimeout(function(){i._showTip(n)},t)},_onItemOut:function(){clearTimeout(this._timer),this._hideTip()},_showTip:function(t){this._hideTip(),this._$target=t,this.setMod(this._$target,"hint","visible")},_hideTip:function(){this._$target&&this._$target.length&&(this.delMod(this._$target,"hint"),this._$target=null)}})}(),BEM.DOM.decl("b-traffic-more",{onSetMod:{js:function(){var t=this;$(window).on("probkiRefreshState",function(){t.elem("link").find(".b-link__inner").html(t.params.altLinkText),t.delMod("visible")}),this.bindTo("link","click",function(e){t._showBlock(e)})}},_showBlock:function(){if(this.setMod("shown","yes"),this.params.saveUrl){var t=$(".b-traffic-more__frame");t.length||(t=$('<iframe class="b-traffic-more__frame" style="display:none"></iframe>'),$(document.body).append(t)),t.attr("src",this.params.saveUrl)}}}),BEM.DOM.decl("b-traffic-jamspromo",{onSetMod:{js:function(){home.localStorage.getItem("b-traffic-jamspromo")||this.domElem.removeClass("i-hidden");try{location.hash.indexOf("open=_traffic")>-1&&home.localStorage.setItem("b-traffic-jamspromo",!0)}catch(t){}}}}),$(function(){var t=$(".b-widget__control__toggle-down");if(t.length){if(window.device)return void t.removeClass("i-hidden");var e=!1;$(".inline-stocks").mouseenter(home.debounce(function(){e&&t.removeClass("i-hidden")},250)).mouseenter(function(){e=!0}).mouseleave(function(){e=!1,t.addClass("i-hidden")})}});var AwapsJsonAPI={Json:{}};AwapsJsonAPI.Json=function(t,e,i,n,o,s,r,a){"undefined"==typeof a&&(a=""),a&&a.length>2&&a.indexOf(":")<0&&(a+=":"),this.w=e,this.h=i;for(var c=String(i);c.length<4;)c="0"+c;for(c=e+c;c.length<8;)c="0"+c;o||(o="awaps.yandex.ru"),n=n?"&charset="+n:"",s=s?"&subsection="+s:"",this.object_name=r?r:"aw_json";var u=Math.round(65535*Math.random());this.json_awaps_url=a+"//"+o+"/10/"+t+"/"+c+".?charset="+n+"&callback="+this.object_name+".awaps_callback&rnd="+u+n+s,this.gif_code='<a href="'+a+"//"+o+"/1/"+t+"/"+c+'.gif" target="_blank"  ><img src="'+a+"//"+o+"/0/"+t+"/"+c+".gif?rnd="+u+'" width="'+e+'" height="'+i+'" border="0" ></A>',this.awaps_div_code='<div id="awaps_ad_div" width="'+e+'" height="'+i+'"></div>'},AwapsJsonAPI.Json.prototype.setID=function(t){t&&(this.html_cont_id=document.getElementById(t))},AwapsJsonAPI.Json.prototype.refreshAd=function(){this.callJson(this.json_awaps_url)},AwapsJsonAPI.Json.prototype.callJson=function(t){if(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,e.appendChild(i)}},AwapsJsonAPI.Json.prototype.showAwapsJson=function(t){var e=t.media[0],i=this.getHTML(e);this.html_cont_id&&(this.html_cont_id.innerHTML=i)},AwapsJsonAPI.Json.prototype.awaps_callback=function(t){var e=t.media,i=e&&e[0]&&(e[0].bnImg||e[0].bnHtm);i&&this.showAwapsJson(t)},AwapsJsonAPI.Json.prototype.getHTML=function(t){var e=Math.round(65535*Math.random());if(t.bnCount){this.im=new Image;var i=String(t.bnCount);i=i.replace("%aw_random%",e),this.im.src=i}var n=new CAWBrowser,o="",s=location.protocol||"http:";return t.bnHtm?t.bnHtm:(n.flash>=t.flashV&&t.bnFlash?(s&&0===s.toLowerCase().indexOf("https")&&(t.bnFlash+="&cache=1"),o="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+s+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+t.bnW+" height="+t.bnH+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+t.bnFlash+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+t.flashvars+'" ><EMBED src="'+t.bnFlash+'"  flashvars="'+t.flashvars+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+t.bnW+" HEIGHT="+t.bnH+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+s+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>'):(o='<img src="'+t.bnImg+'" width="'+t.bnW+'" height="'+t.bnH+'" border=0 alt="'+t.bnAlt+'" >',t.gif_tizer||(o='<a href="'+t.bnHref+'" target=_blank >'+o+"</a>")),o)},function(){"use strict";var t=(new Date).getTime(),e=function(){};
window.home=window.home||{},home.leftBanner={};var i=home.leftBanner;$(function(n){var o=home.getData("b-banner-left.data");if(o){o.timestamp=t;var s,r,a,c,u=n(".b-page"),l=n(document.body),h=n(window),d=o.anim_duration,f=!1,p=!1,m="two-slide"===o.mode,_="locked"===o.mode,g="#leftBanner",b=0,v=[],y=o.flash_ver,w=window.innerHeight,k=function(t){var e={};return{isAnimating:function(){return e.animation},isOpened:function(){return t.is(".left-banner-opened")},isClosed:function(){return!t.is(".left-banner-opened")},isHidden:function(){return Number(Boolean(n("div#leftBanner").length||0!==parseInt(n(".b-banner-left").css("top"))||n(".b-banner-left:not(:visible)").length||n(".b-banner-left.hideBanner").length))},setClosed:function(){t.removeClass("left-banner-opened")},setOpened:function(){t.addClass("left-banner-opened")},setAnimated:function(i){e.animation=!!i,e.animation?t.addClass("left-banner-animating"):t.removeClass("left-banner-animating")},setMinimized:function(t){e.minimized=!!t},setInited:function(t){e.initer=t},isInited:function(){return!!e.initer}}}(l);window.stateManager=k,window.AwapsRM={Init:function(){m?setTimeout(function(){B()},50):_&&B()},ClickSmall:function(){"locked"===o.mode?T():F(!1)},ClickClose:home.debounce(function(){H(!0,!1)},100,!0),ClickBig:function(){H(!0,!1)},Error:function(t){M(),e("AwapsRM.Error("+t+")")}};var M=function(){var t=!1;if(o.canShowImage){o.isFlashDisabled=!0,n("#leftBanner").remove();var e=n("<a>").attr({id:"left-banner-fallback",alt:o.image_alt||"",href:o.click_url,target:"_blank"}).css({backgroundColor:o.image_background_color,visibility:"hidden"}),s=n("<img>").attr({id:"left-banner-fallback-image",width:o.image_width,height:o.image_height,src:o.image_show_url}).on("load",function(){e.css("visibility","visible");var i="none"===e.find("img").css("display");i?e.remove():t=!0}).on("error",function(){e.remove()});e.append(s);{e.css("width")}e.css("width",0),e.appendTo(n(".b-banner-left"));var a=setInterval(function(){t&&!I()&&(clearInterval(a),e.css("width",100),n(".left-banner-fallback-placeholder").replaceWith(e),r=n("#left-banner-fallback"),r.show(),i.showBanner("initialization"),P(),n(".b-banner-left").css("width",""))},500)}},E=function(t,i,n){if(n=Boolean(n),!m||!k.isInited())return!1;if(t=t||D(),i=i||$(),c&&c.setSize){try{var o=O();c.setSize(parseInt(t*o),parseInt(i*o),n)}catch(s){e(s+"; setSize call was failed.")}return{width:t,height:i}}return null},x=function(t){if(m&&c&&c.closeBig&&k.isInited())try{c.closeBig(t)}catch(i){e(i+"; closeBig call was failed.")}},C=function(){var t=home.getData("b-banner-left.swfobject");return m&&(t[6].big_flash_height=$(),t[6].big_flash_width=D()),t},T=function(){var t=n(".b-banner-left")[0],e=t.innerHTML;t.innerHTML="",t.innerHTML=e},S=function(){i.hideBanner("initialization");var t=C(o);p=!o.isFlashDisabled&&window.swfobject&&window.swfobject.hasFlashPlayerVersion(y),p?(swfobject.embedSWF.apply(swfobject,t),setTimeout(function(){!k.isInited()&&o.canShowImage&&(e("flash init timeout, fallback to image"),M())},5e3),W()):M(),o.noMediaQueries&&n(".b-page-layout > div:not(.b-line_bar):not(.b-head-stripe):not(.b-skin-bg)").addClass("b-page-layout-movable"),P()},B=function(){var t=n(".b-banner-left");k.setInited(!0),k.setMinimized(!0),k.setClosed(),t.addClass("b-banner-left__minimized"),t.removeClass("b-banner-left__image-mode"),setTimeout(function(){n(".b-banner-left").addClass("b-banner-left__flash-mode")},1e3),i.showBanner("initialization"),m&&(c=n(g)[0],n(window).on("resize",function(){E(null,null,!0)}),u.add(n(".b-disk-uploader")).on("click.leftBanner",function(t,e){return e&&e.verticalBannerIgnore?void 0:(P(),E(),k.isClosed()||k.isAnimating()||n(t.target).closest(".b-banner-left").length?!0:(H(!0,!0),!0))}),n(document).keyup(function(t){27===t.keyCode&&k.isOpened()&&!k.isAnimating()&&H(!0,!0)}),E()),h.on("resize",P),P()},D=function(){return Math.max(o.bigBannerMinWidth,Math.min(parseInt(h.width()*(o.bannerToPageWidthFactorFull/100)),o.bigBannerMaxWidth))},I=function(){return o.pageWidthMin>parseInt(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)||o.allBannerMinHeight>$()},O=function(){return 1},$=function(){return parseInt(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)},P=home.debounce(function(){var t=I(),e=k.isHidden(),n=k.isOpened(),s=!n&&window.innerHeight!==w;w=window.innerHeight,t?n?(i.hideBanner("resize.tooSmall"),k.setClosed(),W(),x(!0)):i.hideBanner("resize.tooSmall"):e?i.showBanner("resize.tooSmall"):n?N():E(null,null,s),o.noMediaQueries&&(h.width()<1265?l.addClass("width-lt-1265"):l.removeClass("width-lt-1265")),t||f||!(f=!0)||(o.client_stat_url&&((new Image).src=o.client_stat_url),o.awaps_stat_url&&((new Image).src=o.awaps_stat_url))},100),j=function(){_&&n("#leftBanner").replaceWith(n('<div id="leftBanner">')),H(!1,!0),l.removeClass("b-banner-left-on"),n(".b-banner-left").addClass("hideBanner")},A=function(){var t=n(".b-banner-left");_?t.is(".hideBanner")&&S():m&&E(null,null,!0),t.removeClass("hideBanner"),l.addClass("b-banner-left-on")},N=function(t){var e=E();if(e){var i=e.width,s=e.height,r=n(o.bannerSelecor).width();if("#test"===location.hash){if(m){var a=a||D();n(o.bannerSelecor).stop().animate({width:a})}}else r>i?L(q,t?!1:d,[i,s]):q(i)}},L=function(t,e,i){0===e||e>0?setTimeout(function(){t.apply(i)},e):t.apply(i)},F=function(){o.show_big_stat_url&&((new Image).src=o.show_big_stat_url),q(),k.setAnimated(!0),k.setOpened(),clearTimeout(s),s=setTimeout(function(){k.setAnimated(!1)},d),U(),window.notificationPanel&&window.notificationPanel.close(),l.trigger("clearScreen"),l.trigger("click",[{verticalBannerIgnore:1}]),n(".b-topbar").bem("b-topbar")._hide()},R=function(){o.close_big_stat_url&&((new Image).src=o.close_big_stat_url)},H=function(t,e){z(),t&&R(),e&&x(),clearTimeout(s),s=setTimeout(function(){W()},o.close_anim_duration||d)},z=function(){k.setAnimated(!0),setTimeout(function(){k.setAnimated(!1),k.setClosed()},o.close_anim_duration||d)},U=function(){k.setAnimated(!0),setTimeout(function(){k.setAnimated(!1),k.setOpened()},d)},W=function(){var t=n(".b-banner-left");m&&!t.is(".b-banner-left__image-mode")&&n(o.bannerSelecor).width(o.small_flash_width/O()),t.addClass("b-banner-left__minimized")},q=function(t){m&&(t=t||D(),n(o.bannerSelecor).css({width:t})),n(".b-banner-left").removeClass("b-banner-left__minimized")};i.hideBanner=function(t){if(!t)throw"hideBanner interface requires key param";return V(),-1!==v.indexOf(t)?!1:(v.push(t),null===b&&(b=0),void(1===++b&&j()))},i.showBanner=function(t){-1!==v.indexOf(t)&&v.splice(v.indexOf(t),1),null!==b&&--b<=0&&!v.length&&(b=null,a=setTimeout(function(){A()},500))};{var V=function(){a&&(clearTimeout(a),a=0)},J=!0,G=302,K=0;"two-slide"!==home.getData("b-banner-left.data.mode")}if(window.performance&&performance.timing&&(K=performance.timing.responseEnd-performance.timing.responseStart,J=G>K),n.ajax({dataType:"script",cache:!0,url:o.swfobjectUrl}).done(function(t,e){"error"===e?M():S()}).fail(function(t,i,n){e("Failed to load swfobject: "+i+", "+n),M()}),n(document).on("popupsClose.lego",function(){home.leftBanner.hideBanner("popupsClose.lego"),setTimeout(function(){n(window).on("widgetSettingsClosed.banner-left",function(){home.leftBanner.showBanner("popupsClose.lego"),n(window).off("widgetSettingsClosed.banner-left")})},100)}),window.notificationPanel){var Q=notificationPanel.open;notificationPanel.open=function(){i.hideBanner("notification-panel"),Array.prototype.splice.call(arguments,0,1),Q.apply(notificationPanel,arguments)};var X=notificationPanel.close;notificationPanel.close=function(){i.showBanner("notification-panel"),Array.prototype.splice.call(arguments,0,1),X.apply(notificationPanel,arguments)}}}})}(),BEM.decl("i-statface",{onSetMod:{js:function(){this._data={},this._needSend=!1,this.hasMod("send","manual")||$(window).unload(this.changeThis(this.send))}},set:function(t,e){this._needSend=!0;var i=this._data;return"object"==typeof t?$.each(t,function(t,e){i[t]=e}):i[t]=e,this},reset:function(){var t=this;return arguments[0]?$.each(arguments,function(e,i){delete t._data[i]}):this._data={},$.isEmptyObject(this._data)&&(this._needSend=!1),this},serialize:function(){var t=this;return $.map(t.params.keys,function(e){return t._data[e]}).join(".")+(t.params.customKeys?$.map(t.params.customKeys,function(e){var i=t._data[e];return"/"+e+"="+(void 0==i?"":i)}).join(""):"")},send:function(t){if(this._needSend){var e=this.params,i=["//",e.host,"/",e.path,"/dtype=stred","/pid=",e.pid,"/cid=",e.cid,"/path=",this.serialize(),"/*data=",encodeURIComponent("url="+encodeURIComponent(e.url))].join("");"click"==e.path?document.createElement("IMG").src=i:$.ajax({type:"GET",url:i,data:null,complete:t||$.noop,dataType:"script",timeout:500}),this._needSend=!1}return this},getDefaultParams:function(){return{host:"clck.yandex.ru",path:"jclck",url:location.href}}}),function(t){t=t||{},t.oframebustMatchDomain=function(t,e){t="[object Array]"===Object.prototype.toString.call(t)?t:function(){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}();for(var i=0,n=t.length;n>i;i++){var o=t[i];if("string"==typeof o){if(/(\?|\*)/.test(o)){var s=o.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".{1}");if(new RegExp("^"+s+"$").test(e))return!0}else if(e==o)return!0}else try{if(o.test(e))return!0}catch(r){}}}}(window.Lego),function(t){t=t||{},t.oframebust=function(e){if(window.top.location!=window.location){var i=document.referrer.match(/^https?:\/\/([^:\/\s]+)\/?.*/);if(!i)return;!t.oframebustMatchDomain(e,i[1])&&(window.top.location=window.location)}}}(window.Lego),BEM.DOM.decl({block:"b-head-stripe",modName:"type",modVal:"wide"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.domElem.animate({"margin-top":0},1e3);var t=this,e=setTimeout(function(){t._doCloseAnimation()},5e3);this.bindTo("mouseover",function(){clearTimeout(e)}),this.bindTo("mouseout",function(){e=setTimeout(function(){t._doCloseAnimation()},1500)})}},_doCloseAnimation:function(){var t=this;this.domElem.animate({"margin-top":"-4em"},1e3,function(){t.setMod("state","closed")})}}),BEM.DOM.decl("b-head-universal",{onSetMod:{js:function(){"use strict";var t,e,i=this,n=i.params,o=Lego.params.statRoot;if(n.animation_duration){var s=n.animation_duration;i.domElem.css({"-webkit-transition":"opacity "+s+"s",transition:"opacity "+s+"s"}),setTimeout(function(){i.setMod("state","showed")},50)}n.auto_close&&setTimeout(function(){i.domElem.hide()},1e3*n.auto_close),n.inline&&(o&&(e=Lego.params.statRoot+".head.unistripe.inline."+n.inlineProduct+"."+n.inlineNumber),t=function(){window.chrome.webstore.install(n.inlineLink,function(){i.setMod("state","closed"),o&&cp(e+".yes")},function(){o&&cp(e+".no")})}),i.bindTo("close","leftclick",function(t){i._closeCnt(t)}),i.bindTo("text1","leftclick",function(e){return n.inline?((new Image).src=i.elem("text1").attr("href"),t(),!1):(e.stopPropagation(),void i._close())}),i.bindTo("text2","leftclick",function(e){return n.inline?((new Image).src=i.elem("text2").attr("href"),t(),!1):(e.stopPropagation(),void i._close())}),i.bindTo("table","leftclick",function(){return n.inline?((new Image).src=n.void_url,o&&cp(n.void_v12counter),t(),!1):(i._close(),void window.statRedirect(n.void_url,n.void_v12counter))}),n.background_color_file2&&((new Image).src=n.background_color_file2,i.bindTo("text2","mouseover",function(){i.elem("image").attr("src",n.background_color_file2)}),i.bindTo("text2","mouseout",function(){i.elem("image").attr("src",n.background_image)})),n.agreement&&(i.bindTo("text1",{mouseover:i._showAgreement,mouseout:i._hideAgreement}),i.bindTo("col_text2",{mouseover:i._showAgreement,mouseout:i._hideAgreement}),i.bindTo("agreement-link","click",function(t){t.stopPropagation()}))}},_showAgreement:function(){this.elem("agreement").addClass("b-head-universal__agreement_visible")},_hideAgreement:function(){this.elem("agreement").removeClass("b-head-universal__agreement_visible")},_closeCnt:function(t){t.preventDefault(),t.stopPropagation(),this.params.close_v12counter&&csh_ifmsid(this.params.close_v12counter),this.params.close_counter&&((new Image).src=this.params.close_counter),this._close()},_close:function(){this.setMod("state","closed"),$(window).trigger("popupredraw.lego");var t=$(".popup_visibility_visible:not(.b-topbar__popup)");t.length&&t.bem("popup").hide()}}),ya.pages={},ya.templates={common:{},pages:{}},ya.generators={common:{},pages:{}},ya.hash={common:{},pages:{}},function(t,e){t.make=function(t,e){return t.hasOwnProperty(e)||(t[e]={}),t[e]},t.uid=function(){return String(Math.random()).substr(2,12)},t.htmlFilter=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.urlFilter=function(t){return t.replace(/./g,function(t){return t.match(/[&@\/;:=+?$]/)?t:encodeURIComponent(t)})},t.capitalize=function(t){return t=t||"",t[0].toUpperCase()+t.substring(1)},t.formatNumber=function(t,e,i){if(isNaN(t))return t;t+="",e=e||",",i=i||"&nbsp;";var n=t.lastIndexOf("."),o=[],s="",r=0,a="";for(-1!==n?s=e+t.substr(n+1):n=t.length;--n>-1;)a=t[n]+a,r++,3===r&&(o.push(a),a="",r=0);return a&&o.push(a),o.reverse().join(i)+s},t.Collection=function(t){this.storage=[],this.idAttr=t||"id"},t.Collection.prototype={add:function(t){this.storage.push(t),$(this).trigger("append."+t[this.idAttr],[t])},get:function(t){var e=this;return this.storage.filter(function(i){return i[e.idAttr]===t})}},t.log=function(){if(env.debug)if(e.console)e.console.log.apply(this,arguments);else if(e.debug)e.debug.apply(this,arguments);else if(e.document&&e.document.body){var t="debugWindow",i=document.getElementById(t);i?i.innerHTML+="<hr/>msg":document.body.innerHTML+='<div style="width:50%;height: 50px; margin-bottom: 200px; overflow: auto;position: absolute;bottom: 0; z-index: 9999; border:1px solid #ccc;background: #fff; color: #000; padding: 1em 2em;margin:2px;" id="'+t+'">Debug:<hr/>'+arguments[0]+"</div>"}},t.zCookie={insert:function(t,e){var i,n,o,s=e.split(":"),r=[],a=!1;if(3===s.length){o=s[0],n=t.split("|");for(var c=0,u=n.length;u>c;c++)n[c]&&(i=n[c].split(":"),i[0]===o?(r.push(e),a=!0):r.push(n[c]));return a||r.push(e),r.join("|")}return!1},get:function(t){t||(t="");for(var e=t.split("|"),i={},n=0,o=e.length;o>n;n++){var s=e[n].split(":");3===s.length&&(i[s[0].substr(2)]=s)}return function(t,e,n){var o,s,r=i[t];if(r){o=r[1],s="l"===r[2];var a={version:o,ls:s,cache:"c"===r[2]&&o===e,fresh:s&&o===e,patchable:s&&n&&n.some(function(t){return t===o})};return a}}}},t.getStaticURL=function(t){var i=e&&e.staticVersion||ya&&ya.page&&ya.page.staticVersion||"1.274";return(env.devInstance?"/v12":"//yastatic.net/www/"+i+"/v12")+t}}(ya,this),function(){function t(t){var e=$(".b-etrains__track",t),i=$(".b-etrains__direction",t);i.length>1&&i.unbind("click").click(function(){e.toggleClass("i-hidden");var t=this.parentNode.onclick();t&&t.stat&&csh_ifmsid(t.stat)}),$(".b-etrains__track_time",t).unbind("mouseover").mouseover(function(){var t=this.onclick().id;$("#"+t).removeClass("i-hidden")}).unbind("mouseout").mouseout(function(){var t=this.onclick().id;$("#"+t).addClass("i-hidden")})}window.initEtrains=t}(),BEM.DOM.decl({name:"i-flashcookie",modName:"type",modVal:"inline"},{onSetMod:{js:function(){Lego.block["i-flashcookie"].call(this.domElem,this.params)}}}),function(){var t=Lego.block["i-flashcookie"],e=function(t){function e(t,e){return'<param name="'+t+'" value="'+e+'" />'}function i(t,e){return" "+t+'="'+e+'"'}function n(t,e,i){var n=t.match(e);return n&&n[i+1?i:1]||""}function o(){return n(d.cookie,new RegExp("fuid"+c+"=([^;]+)"))}function s(){var t=d.domain;return t&&n(t,/[^.]+\.[^.]{2,3}(\.tr)?$/,0)}t||(t={});var r,a,c,u,l=t.host||"kiks.yandex",h=window,d=document,f=navigator,p=f.userAgent,m=f.mimeTypes,_=9,g=p&&/gecko/i.test(p),b=p&&/MSIE/.test(p)&&/Win/.test(p),v=g?"embed":"object",y="//"+l.split(".").slice(0,-1).join(".")+".%s/system/fc%d.html",w="//"+l+".ru/system/%s%d.swf",k="//"+l+".ru/fu",M="//"+l+".ru/fu",E="application/x-shockwave-flash",x="style",C="position:absolute;margin-left:-999em;top:0;",T=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',S="allowScriptAccess",B="always",D="height",I="wmode",O="window",$="width",P="bgcolor",j="#FFFFFF",A="ya_fc",N=i(x,C)+i($,1)+i(D,1)+i("id",A),L=!1;h.ya_fc_external=function(t,n,l,h){r=t,a=n,c=l,u=h||"fc";var d,f=m&&m[E]?m[E].enabledPlugin:0,p=L,y=0,x=o()?w.replace("%d",a).replace("%s",u):k.replace("%s",s());if(f)y=f.description.split("Shockwave Flash ")[1],p=parseInt(y,10)>=_;else if(b){p=L;try{p=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_)}catch(D){}}return d=p?g?'<div style="'+C+'"><'+v+N+i("src",x)+i(I,O)+i(P,j)+i(S,B)+i("type",E)+"/></div>":(b?"<"+v+T+N+">"+e("movie",x):"<"+v+N+i("type",E)+i("data",x)+">")+e(I,O)+e(P,j)+e(S,B)+"</"+v+">":'<img src="'+M.replace("%s",s())+'" style="'+C+'" />'},h.ya_fc_requestData=function(){var t=d.getElementById("ya_fc");try{t.setLocation(s(),o())}catch(e){}},h.ya_fc_setCookie=function(t){var e=new Date;e.setTime(e.getTime()+31536e7),d.cookie="fuid"+c+"="+t+";expires="+e.toGMTString()+";path=/;domain="+s()},h.ya_fc_getIFrame=function(t){var e=y.replace("%s",t).replace("%d",r),i=d.createElement("iframe"),n=d.getElementsByTagName("body")[0],o="40px;";i.src=e,i.style.cssText=$+o+D+o+"border:0;"+C,i.frameBorder=0,n&&n.insertBefore(i,n.firstChild)};var F=this,R=arguments.callee.load=function(t){var e,i;t.mode?(e="00",i="kfc"):e="07",F.replaceWith(h.ya_fc_external("07_2",e,"01",i))};F.hasClass("i-flashcookie_autoload_no")||R(t)};Lego.block["i-flashcookie"]=function(i){var n=this.hasClass("i-flashcookie_type_inline")?e:t;n&&n.call(this,i)}}(),BEM.DOM.decl("b-keyboard-popup",{onSetMod:{js:function(){Lego.block["b-keyboard-popup"].call(this.domElem,this.params)}}}),function(t,e){e.block["b-keyboard-popup"]=function(i){var n=t('<div class="b-keyboard-popup__gap"/><div class="b-keyboard-popup"><div class="b-keyboard-popup__bar"><span class="b-keyboard-popup__bar-link b-keyboard-popup__close"><img class="b-icon" src="//yandex.st/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif">'+BEM.I18N("b-keyboard-popup","close")+"</span></div><div class=\"b-keyboard i-bem\" onclick=\"return {name: 'b-keyboard',fake: false,lang: '"+i.lang+"'"+(i["for"]?",'for': '"+i["for"]+"'":"")+'};"/></div>').appendTo("body"),o=n.filter(".b-keyboard-popup"),s=(n.filter(".b-keyboard-popup__gap"),function(t){return"undefined"==typeof t?o.data("isHidden"):void o.data("isHidden",t)}),r=function(){s()||(n.addClass("i-hidden"),t(window).trigger("keyboardClosed.lego"),s(!0))};t(document).bind("popupsClose.lego",function(e,i){s()||i&&i.source&&t.contains(o[0],i.source)||r()}),n.find(".b-keyboard-popup__close").click(function(){r();var t=e.block["b-keyboard"]._lastFocusedIn;t&&t.focus()})}}(jQuery,window.Lego),x.Component.extend({id:"b-head-tabs__promo",init:function(t){var e=$(x.byId(t)),i="b-head-tabs__promo",n=this,o=null,s=n.data("name"),r=s.split("@");if(2!==r.length)throw new Error("incorrect name in b-head-tabs__promo module");if("undefined"!=typeof JSON&&!home.disabledLS){if(o=home.localStorage.getItem(i))try{o=JSON.parse(o)}catch(a){o=null}o&&o.date&&o.date!==r[1]&&(o=null),(!o||o&&!o[s])&&(e.find(".b-head-tabs__promo-icon").addClass("b-head-tabs__promo_active"),e.find("a").on("mousedown",function(){var t=o||{};t.date=t.date||r[1],t[s]=!0;try{home.localStorage.setItem(i,JSON.stringify(t))}catch(e){}}))}}}),BEM.DOM.decl("b-spin",{onSetMod:{js:function(){this._size=this.getMod("size")||/[\d]+/.exec(this.getMod("theme"))[0],this._bgProp="background-position",this._posPrefix="0 -",this.elem("icon").css("background-position-y")&&(this._bgProp="background-position-y",this._posPrefix="-"),this._curFrame=0,this.hasMod("progress")&&this.channel("sys").on("tick",this._onTick,this)},progress:{yes:function(){this.channel("sys").on("tick",this._onTick,this)},"":function(){this.channel("sys").un("tick",this._onTick,this)}}},_onTick:function(){var t=++this._curFrame*this._size;t>=36*this._size&&(this._curFrame=t=0),this.elem("icon").css(this._bgProp,this._posPrefix+t+"px")},destruct:function(){this.channel("sys").un("tick",this._onTick,this),this.__base.apply(this,arguments)}}),function(){var t="//yastatic.net/browser-cookie/_fc.js",e='<div style="height:0;overflow:hidden;"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1" id="fco" ><param name="movie" value="//yastatic.net/browser-cookie/flash-cookie.swf"/><param name="allowScriptAccess" value="Always"/><embed src="//yastatic.net/browser-cookie/flash-cookie.swf" allowScriptAccess="Always" width="1" height="1" id="fce"></embed></object></div>';setTimeout(function(){window.mordaCookieCopy&&$.getScript(t,function(){$("body").append(e)})},5e3)}(),$(document).ready(function(){window.setTimeout(function(){var t=home&&home.getData&&home.getData("b-cache.url");if(t){var e=navigator.userAgent.toLowerCase();/crios/.test(e)&&(/ipad/.test(e)||/ipod/.test(e)||/iphone/.test(e))||($.ajaxSetup({cache:!0}),$.getScript(t),$.ajaxSetup({cache:!1}))}},5e3)}),function(){var t;t=function(){var t=document,e=window,i={},n=function(){};n.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===i.arrIndexOf(n,e)&&n.push(e)},n.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var n=this._listeners[t],o=i.arrIndexOf(n,e);return-1!==o?void(n.length>1?this._listeners[t]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[t]):void 0}},n.prototype.dispatchEvent=function(t){var e=t.type,i=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,i),this._listeners&&e in this._listeners)for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].apply(this,i)};var o=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])};o.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var i=this[e];"function"==typeof i&&(i="[function]"),t.push(e+"="+i)}return"SimpleEvent("+t.join(", ")+")"};var s=function(t){var e=this;e._events=t||[],e._listeners={}};s.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var i=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,i),t in e._listeners)for(var n=0;n<e._listeners[t].length;n++)e._listeners[t][n].apply(e,i)}},s.prototype.on=function(t,e){var i=this;i._verifyType(t),i._nuked||(t in i._listeners||(i._listeners[t]=[]),i._listeners[t].push(e))},s.prototype._verifyType=function(t){var e=this;-1===i.arrIndexOf(e._events,t)&&i.log("Event "+JSON.stringify(t)+" not listed "+JSON.stringify(e._events)+" in "+e)},s.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var r="abcdefghijklmnopqrstuvwxyz0123456789_";i.random_string=function(t,e){e=e||r.length;var i,n=[];for(i=0;t>i;i++)n.push(r.substr(Math.floor(Math.random()*e),1));return n.join("")},i.random_number=function(t){return Math.floor(Math.random()*t)},i.random_number_string=function(t){var e=(""+(t-1)).length,n=Array(e+1).join("0");return(n+i.random_number(t)).slice(-e)},i.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},i.isSameOriginUrl=function(t,i){return i||(i=e.location.href),t.split("/").slice(0,3).join("/")===i.split("/").slice(0,3).join("/")},i.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},i.objectExtend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t};var a="_jp";i.polluteGlobalNamespace=function(){a in e||(e[a]={})},i.closeFrame=function(t,e){return"c"+JSON.stringify([t,e])},i.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},i.countRTO=function(t){var e;return e=t>100?3*t:t+200},i.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},i.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},i.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},i.amendUrl=function(e){var n=t.location;if(!e)throw new Error("Wrong url for SockJS");if(!i.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");return 0===e.indexOf("//")&&(e=n.protocol+e),0===e.indexOf("/")&&(e=n.protocol+"//"+n.host+e),e=e.replace(/[/]+$/,"")},i.arrIndexOf=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.arrSkip=function(t,e){var n=i.arrIndexOf(t,e);if(-1===n)return t.slice();var o=t.slice(0,n);return o.concat(t.slice(n+1))},i.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},i.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var c,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},h=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(t){return u.lastIndex=0,u.test(t)&&(t=t.replace(u,function(t){return l[t]})),'"'+t+'"'},f=function(t){var e,i={},n=[];for(e=0;65536>e;e++)n.push(String.fromCharCode(e));return t.lastIndex=0,n.join("").replace(t,function(t){return i[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,i};i.quote=function(t){var e=d(t);return h.lastIndex=0,h.test(e)?(c||(c=f(h)),e.replace(h,function(t){return c[t]})):e};var p=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];i.probeProtocols=function(){for(var t={},e=0;e<p.length;e++){var i=p[e];t[i]=E[i]&&E[i].enabled()}return t},i.detectProtocols=function(t,e,i){var n={},o=[];e||(e=p);for(var s=0;s<e.length;s++){var r=e[s];n[r]=t[r]}var a=function(t){var e=t.shift();n[e]?o.push(e):t.length>0&&a(t)};return i.websocket!==!1&&a(["websocket"]),n["xhr-streaming"]&&!i.null_origin?o.push("xhr-streaming"):!n["xdr-streaming"]||i.cookie_needed||i.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),n["xhr-polling"]&&!i.null_origin?o.push("xhr-polling"):!n["xdr-polling"]||i.cookie_needed||i.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";i.createHook=function(){var t="a"+i.random_string(8);if(!(m in e)){var n={};e[m]=function(t){return t in n||(n[t]={id:t,del:function(){delete n[t]}}),n[t]}}return e[m](t)},i.attachMessage=function(t){i.attachEvent("message",t)},i.attachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.addEventListener(i,n,!1):(t.attachEvent("on"+i,n),e.attachEvent("on"+i,n))},i.detachMessage=function(t){i.detachEvent("message",t)},i.detachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.removeEventListener(i,n,!1):(t.detachEvent("on"+i,n),e.detachEvent("on"+i,n))};var _={},g=!1,b=function(){for(var t in _)_[t](),delete _[t]},v=function(){g||(g=!0,b())};i.attachEvent("unload",v),i.unload_add=function(t){var e=i.random_string(8);return _[e]=t,g&&i.delay(b),e},i.unload_del=function(t){t in _&&delete _[t]},i.createIframe=function(e,n){var o,s,r=t.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(t){}r.onerror=null},c=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),i.unload_del(s))},u=function(t){r&&(c(),n(t))},l=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(i){}};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){u("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout(function(){u("onload timeout")},2e3)},t.body.appendChild(r),o=setTimeout(function(){u("timeout")},15e3),s=i.unload_add(c),{post:l,cleanup:c,loaded:a}},i.createHtmlfile=function(t,n){var o,s,r,c=new ActiveXObject("htmlfile"),u=function(){clearTimeout(o)},l=function(){c&&(u(),i.unload_del(s),r.parentNode.removeChild(r),r=c=null,CollectGarbage())},h=function(t){c&&(l(),n(t))},d=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(i){}};c.open(),c.write('<html><script>document.domain="'+document.domain+'";</script></html>'),c.close(),c.parentWindow[a]=e[a];var f=c.createElement("div");return c.body.appendChild(f),r=c.createElement("iframe"),f.appendChild(r),r.src=t,o=setTimeout(function(){h("timeout")},15e3),s=i.unload_add(l),{post:d,cleanup:l,loaded:u}};var y=function(){};y.prototype=new s(["chunk","finish"]),y.prototype._start=function(t,n,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(a){}if(!r.xhr)try{r.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=i.unload_add(function(){r._cleanup(!0)});try{r.xhr.open(t,n,!0)}catch(c){return r.emit("finish",0,""),void r._cleanup()}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var u in s.headers)r.xhr.setRequestHeader(u,s.headers[u]);r.xhr.onreadystatechange=function(){if(r.xhr){var t=r.xhr;switch(t.readyState){case 3:try{var e=t.status,i=t.responseText}catch(t){}1223===e&&(e=204),i&&i.length>0&&r.emit("chunk",e,i);break;case 4:var e=t.status;1223===e&&(e=204),r.emit("finish",e,t.responseText),r._cleanup(!1)}}},r.xhr.send(o)
},y.prototype._cleanup=function(t){var e=this;if(e.xhr){if(i.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(n){}e.unload_ref=e.xhr=null}},y.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var w=i.XHRCorsObject=function(){var t=this,e=arguments;i.delay(function(){t._start.apply(t,e)})};w.prototype=new y;var k=i.XHRLocalObject=function(t,e,n){var o=this;i.delay(function(){o._start(t,e,n,{no_credentials:!0})})};k.prototype=new y;var M=i.XDRObject=function(t,e,n){var o=this;i.delay(function(){o._start(t,e,n)})};M.prototype=new s(["chunk","finish"]),M.prototype._start=function(t,e,n){var o=this,s=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=i.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(t,e),o.xdr.send(n)}catch(a){r()}},M.prototype._cleanup=function(t){var e=this;if(e.xdr){if(i.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(n){}e.unload_ref=e.xdr=null}},M.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},i.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:N.enabled()?3:4};var E=function(t,n,o){if(this===e)return new E(t,n,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&i.objectExtend(r._options,o),r._base_url=i.amendUrl(t),r._server=r._options.server||i.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof n&&n.length>0?[n]:i.isArray(n)?n:null,s&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=E.CONNECTING,r._ir=W(r._base_url),r._ir.onfinish=function(t,e){r._ir=null,t?(r._options.info&&(t=i.objectExtend(t,r._options.info)),r._options.rtt&&(e=r._options.rtt),r._applyInfo(t,e,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};E.prototype=new n,E.version="0.3.4",E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._debug=function(){this._options.debug&&i.log.apply(i,arguments)},E.prototype._dispatchOpen=function(){var t=this;t.readyState===E.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=E.OPEN,t.dispatchEvent(new o("open"))):t._didClose(1006,"Server lost session")},E.prototype._dispatchMessage=function(t){var e=this;e.readyState===E.OPEN&&e.dispatchEvent(new o("message",{data:t}))},E.prototype._dispatchHeartbeat=function(){var t=this;t.readyState===E.OPEN&&t.dispatchEvent(new o("heartbeat",{}))},E.prototype._didClose=function(t,e,n){var s=this;if(s.readyState!==E.CONNECTING&&s.readyState!==E.OPEN&&s.readyState!==E.CLOSING)throw new Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:t,reason:e,wasClean:i.userSetCode(t)});if(!i.userSetCode(t)&&s.readyState===E.CONNECTING&&!n){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=E.CLOSED,i.delay(function(){s.dispatchEvent(r)})},E.prototype._didMessage=function(t){var e=this,i=t.slice(0,1);switch(i){case"o":e._dispatchOpen();break;case"a":for(var n=JSON.parse(t.slice(1)||"[]"),o=0;o<n.length;o++)e._dispatchMessage(n[o]);break;case"m":var n=JSON.parse(t.slice(1)||"null");e._dispatchMessage(n);break;case"c":var n=JSON.parse(t.slice(1)||"[]");e._didClose(n[0],n[1]);break;case"h":e._dispatchHeartbeat()}},E.prototype._try_next_protocol=function(e){var n=this;for(n.protocol&&(n._debug("Closed transport:",n.protocol,""+e),n.protocol=null),n._transport_tref&&(clearTimeout(n._transport_tref),n._transport_tref=null);;){var o=n.protocol=n._protocols.shift();if(!o)return!1;if(E[o]&&E[o].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return n._protocols.unshift(o),n.protocol="waiting-for-load",i.attachEvent("load",function(){n._try_next_protocol()}),!0;if(E[o]&&E[o].enabled(n._options)){var s=E[o].roundTrips||1,r=(n._options.rto||0)*s||5e3;n._transport_tref=i.delay(r,function(){n.readyState===E.CONNECTING&&n._didClose(2007,"Transport timeouted")});var a=i.random_string(8),c=n._base_url+"/"+n._server+"/"+a;return n._debug("Opening transport:",o," url:"+c," RTO:"+n._options.rto),n._transport=new E[o](n,c,n._base_url),!0}n._debug("Skipping transport:",o)}},E.prototype.close=function(t,e){var n=this;if(t&&!i.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return n.readyState!==E.CONNECTING&&n.readyState!==E.OPEN?!1:(n.readyState=E.CLOSING,n._didClose(t||1e3,e||"Normal closure"),!0)},E.prototype.send=function(t){var e=this;if(e.readyState===E.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===E.OPEN&&e._transport.doSend(i.quote(""+t)),!0},E.prototype._applyInfo=function(e,n,o){var s=this;s._options.info=e,s._options.rtt=n,s._options.rto=i.countRTO(n),s._options.info.null_origin=!t.domain;var r=i.probeProtocols();s._protocols=i.detectProtocols(r,o,e)};var x=E.websocket=function(t,n){var o=this,s=n+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=t,o.url=s;var r=e.WebSocket||e.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(t){o.ri._didMessage(t.data)},o.unload_ref=i.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(i.closeFrame(1006,"WebSocket connection broken"))}};x.prototype.doSend=function(t){this.ws.send("["+t+"]")},x.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),i.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},x.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},x.roundTrips=2;var C=function(){};C.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},C.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},C.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=i.delay(25,function(){e.send_stop=null,e.send_schedule()})},C.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,i){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+i):t.send_schedule_wait()}),t.send_buffer=[]}},C.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var T=function(e,n,o){var s=this;if(!("_send_form"in s)){var r=s._send_form=t.createElement("form"),a=s._send_area=t.createElement("textarea");a.name="d",r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",r.appendChild(a),t.body.appendChild(r)}var r=s._send_form,a=s._send_area,c="a"+i.random_string(8);r.target=c,r.action=e+"/jsonp_send?i="+c;var u;try{u=t.createElement('<iframe name="'+c+'">')}catch(l){u=t.createElement("iframe"),u.name=c}u.id=c,r.appendChild(u),u.style.display="none";try{a.value=n}catch(h){i.log("Your browser is seriously broken. Go home! "+h.message)}r.submit();var d=function(){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,i.delay(500,function(){u.parentNode.removeChild(u),u=null}),a.value="",o(!0))};return u.onerror=u.onload=d,u.onreadystatechange=function(){"complete"==u.readyState&&d()},d},S=function(t){return function(e,i,n){var o=new t("POST",e+"/xhr_send",i);return o.onfinish=function(t){n(200===t||204===t,"http status "+t)},function(t){n(!1,t)}}},B=function(e,n){var o,s,r=t.createElement("script"),a=function(t){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,n(t),n=null)},c=!1,u=null;if(r.id="a"+i.random_string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(){u||(u=setTimeout(function(){c||a(i.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},r.onload=function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){c=!0;try{r.onclick()}catch(t){}}r&&a(i.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))s=t.createElement("script"),s.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(l){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0),o=setTimeout(function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var h=t.getElementsByTagName("head")[0];return h.insertBefore(r,h.firstChild),s&&h.insertBefore(s,h.firstChild),a},D=E["jsonp-polling"]=function(t,e){i.polluteGlobalNamespace();var n=this;n.ri=t,n.trans_url=e,n.send_constructor(T),n._schedule_recv()};D.prototype=new C,D.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=I(t.trans_url+"/jsonp",B,e)},D.enabled=function(){return!0},D.need_body=!0,D.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var I=function(t,n,o){var s="a"+i.random_string(6),r=t+"?c="+escape(a+"."+s),c=0,u=function(t){switch(c){case 0:delete e[a][s],o(t);break;case 1:o(t),c=2;break;case 2:delete e[a][s]}},l=n(r,u);e[a][s]=l;var h=function(){e[a][s]&&(c=1,e[a][s](i.closeFrame(1e3,"JSONP user aborted read")))};return h},O=function(){};O.prototype=new C,O.prototype.run=function(t,e,i,n,o){var s=this;s.ri=t,s.trans_url=e,s.send_constructor(S(o)),s.poll=new Y(t,n,e+i,o)},O.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var $=E["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",ne,i.XHRCorsObject)};$.prototype=new O,$.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},$.roundTrips=2,$.need_body=!0;var P=E["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",ne,i.XDRObject)};P.prototype=new O,P.enabled=function(){return!!e.XDomainRequest},P.roundTrips=2;var j=E["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",ne,i.XHRCorsObject)};j.prototype=new O,j.enabled=$.enabled,j.roundTrips=2;var A=E["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",ne,i.XDRObject)};A.prototype=new O,A.enabled=P.enabled,A.roundTrips=2;var N=function(){};N.prototype.i_constructor=function(t,e,n){var o=this;o.ri=t,o.origin=i.getOrigin(n),o.base_url=n,o.trans_url=e;var s=n+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=i.random_string(8),s+="#"+o.window_id,o.iframeObj=i.createIframe(s,function(t){o.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),o.onmessage_cb=i.bind(o.onmessage,o),i.attachMessage(o.onmessage_cb)},N.prototype.doCleanup=function(){var t=this;if(t.iframeObj){i.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},N.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var i=t.data.slice(0,8),n=t.data.slice(8,9),o=t.data.slice(9);if(i===e.window_id)switch(n){case"s":e.iframeObj.loaded(),e.postMessage("s",JSON.stringify([E.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(o)}}},N.prototype.postMessage=function(t,e){var i=this;i.iframeObj.post(i.window_id+t+(e||""),i.origin)},N.prototype.doSend=function(t){this.postMessage("m",t)},N.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var L,F=function(t,n){parent!==e?parent.postMessage(L+t+(n||""),"*"):i.log("Can't postMessage, no parent window.",t,n)},R=function(){};R.prototype._didClose=function(t,e){F("t",i.closeFrame(t,e))},R.prototype._didMessage=function(t){F("t",t)},R.prototype._doSend=function(t){this._transport.doSend(t)},R.prototype._doCleanup=function(){this._transport.doCleanup()},i.parent_origin=void 0,E.bootstrap_iframe=function(){var n;L=t.location.hash.slice(1);var o=function(t){if(t.source===parent&&("undefined"==typeof i.parent_origin&&(i.parent_origin=t.origin),t.origin===i.parent_origin)){var o=t.data.slice(0,8),s=t.data.slice(8,9),r=t.data.slice(9);if(o===L)switch(s){case"s":var a=JSON.parse(r),c=a[0],u=a[1],l=a[2],h=a[3];if(c!==E.version&&i.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+E.version+'".'),!i.flatUrl(l)||!i.flatUrl(h))return void i.log("Only basic urls are supported in SockJS");if(!i.isSameOriginUrl(l)||!i.isSameOriginUrl(h))return void i.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([e.location.href,l,h])+")");n=new R,n._transport=new R[u](n,l,h);break;case"m":n._doSend(r);break;case"c":n&&n._doCleanup(),n=null}}};i.attachMessage(o),F("s")};var H=function(t,e){var n=this;i.delay(function(){n.doXhr(t,e)})};H.prototype=new s(["finish"]),H.prototype.doXhr=function(t,e){var n=this,o=(new Date).getTime(),s=new e("GET",t+"/info"),r=i.delay(8e3,function(){s.ontimeout()});s.onfinish=function(t,e){if(clearTimeout(r),r=null,200===t){var i=(new Date).getTime()-o,s=JSON.parse(e);"object"!=typeof s&&(s={}),n.emit("finish",s,i)}else n.emit("finish")},s.ontimeout=function(){s.close(),n.emit("finish")}};var z=function(e){var n=this,o=function(){var t=new N;t.protocol="w-iframe-info-receiver";var i=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var i=JSON.parse(e.substr(1)),o=i[0],s=i[1];n.emit("finish",o,s)}else n.emit("finish");t.doCleanup(),t=null},o={_options:{},_didClose:i,_didMessage:i};t.i_constructor(o,e,e)};t.body?o():i.attachEvent("load",o)};z.prototype=new s(["finish"]);var U=function(){var t=this;i.delay(function(){t.emit("finish",{},2e3)})};U.prototype=new s(["finish"]);var W=function(t){if(i.isSameOriginUrl(t))return new H(t,i.XHRLocalObject);switch(i.isXHRCorsCapable()){case 1:return new H(t,i.XHRLocalObject);case 2:return new H(t,i.XDRObject);case 3:return new z(t);default:return new U}},q=R["w-iframe-info-receiver"]=function(t,e,n){var o=new H(n,i.XHRLocalObject);o.onfinish=function(e,i){t._didMessage("m"+JSON.stringify([e,i])),t._didClose()}};q.prototype.doCleanup=function(){};var V=E["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};V.prototype=new N,V.enabled=function(){return"EventSource"in e&&N.enabled()},V.need_body=!0,V.roundTrips=3;var J=R["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",Z,i.XHRLocalObject)};J.prototype=new O;var G=E["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};G.prototype=new N,G.enabled=function(){return e.XMLHttpRequest&&N.enabled()},G.need_body=!0,G.roundTrips=3;var K=R["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",ne,i.XHRLocalObject)};K.prototype=new O;var Q=E["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};Q.prototype=new N,Q.enabled=function(){return N.enabled()},Q.need_body=!0,Q.roundTrips=3;var X=R["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",ie,i.XHRLocalObject)};X.prototype=new O;var Y=function(t,e,i,n){var o=this;o.ri=t,o.Receiver=e,o.recv_url=i,o.AjaxObject=n,o._scheduleRecv()};Y.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),i=0;e.onmessage=function(e){i+=1,t.ri._didMessage(e.data)},e.onclose=function(i){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===i.reason?t.ri._didClose(1006,"Polling error ("+i.reason+")"):t._scheduleRecv())}},Y.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var Z=function(t){var e=this,n=new EventSource(t);n.onmessage=function(t){e.dispatchEvent(new o("message",{data:unescape(t.data)}))},e.es_close=n.onerror=function(t,s){var r=s?"user":2!==n.readyState?"network":"permanent";e.es_close=n.onmessage=n.onerror=null,n.close(),n=null,i.delay(200,function(){e.dispatchEvent(new o("close",{reason:r}))})}};Z.prototype=new n,Z.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var te,ee=function(){if(void 0===te)if("ActiveXObject"in e)try{te=!!new ActiveXObject("htmlfile")}catch(t){}else te=!1;return te},ie=function(t){var n=this;i.polluteGlobalNamespace(),n.id="a"+i.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(a+"."+n.id);var s,r=ee()?i.createHtmlfile:i.createIframe;e[a][n.id]={start:function(){s.loaded()},message:function(t){n.dispatchEvent(new o("message",{data:t}))},stop:function(){n.iframe_close({},"network")}},n.iframe_close=function(t,i){s.cleanup(),n.iframe_close=s=null,delete e[a][n.id],n.dispatchEvent(new o("close",{reason:i}))},s=r(t,function(){n.iframe_close({},"permanent")})};ie.prototype=new n,ie.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var ne=function(t,e){var i=this,n=0;i.xo=new e("POST",t,null),i.xo.onchunk=function(t,e){if(200===t)for(;;){var s=e.slice(n),r=s.indexOf("\n");if(-1===r)break;n+=r+1;var a=s.slice(0,r);i.dispatchEvent(new o("message",{data:a}))}},i.xo.onfinish=function(t,e){i.xo.onchunk(t,e),i.xo=null;var n=200===t?"network":"permanent";i.dispatchEvent(new o("close",{reason:n}))}};return ne.prototype=new n,ne.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new o("close",{reason:"user"})),t.xo=null)},E.getUtils=function(){return i},E.getIframeTransport=function(){return N},E}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return t}),function(){"use strict";var e,i,n,o={},s=!1,r=0,a=!1,c=!0,u=[],l=!0;BEM.decl("i-xiva",{},{listen:function(t,e,i){var n=!o[t];n&&(o[t]={handlers:[]}),o[t].ts=e,o[t].handlers.push(i),this._init(),n&&this._subscribe()},connect:function(){c=!0,this._connect()},disconnect:function(t){c=t,e&&e.close&&e.close()},_sendQueue:function(){var t,e,i;for(t=0,e=u.length;e>t;++t)(i=u[t].handler)(u[t].data);u=[]},_toggleFocus:function(t){l=t,l&&this._sendQueue()},_initFocusEvents:function(){var t=this;$.browser.msie?$(document).bind("focusout",function(){t._toggleFocus(!1)}).bind("focusin",function(){t._toggleFocus(!0)}):$(window).focus(function(){t._toggleFocus(!0)}).blur(function(){t._toggleFocus(!1)})},_bindOnUnload:function(){var t=this;$(window).on("beforeunload",function(){t.disconnect(!1)})},_init:function(){s||(s=!0,this._initFocusEvents(),this._bindOnUnload(),this._connect=this._connect.bind(this),this._connect())},_hasXivaSupport:function(){return!!window.WebSocket},_connect:function(){var i=BEM.blocks["i-global"].param("xivaUrl"),n=this;this._hasXivaSupport()&&i&&(e=new t("//"+i+"/xiva",null,{protocols_whitelist:["websocket"]}),e.onopen=function(){n._connected=!0,n._subscribe(),n._checkConnection()},e.onmessage=n._onMessage,e.onclose=function(){n._connected=!1,n._reconnect()})},_reconnect:function(){this._stopConnectionTimer(),c&&(r++,5>=r?setTimeout(this._connect,3e3):15>=r?setTimeout(this._connect,1e4):setTimeout(this._connect,6e4))},_stopConnectionTimer:function(){i&&(clearTimeout(i),i=null)},_checkConnection:function(){this._stopConnectionTimer(),i=setTimeout(function(){a&&(r=0)},5e3)},_subscribe:function(){var t=this;n&&clearTimeout(n),n=setTimeout(function(){t._subscribeSend()},100)},_subscribeSend:function(){var t;if(this._connected){t={subscribe:{}};for(var i in o)o.hasOwnProperty(i)&&(t.subscribe[i]=o[i].ts);e.send(JSON.stringify(t))}},_onMessage:function(t){var e,i,n,s,r=$.trim(t.data);try{if(e=JSON.parse(r),n=e.ch+"_"+e.key,o[n]&&(i=parseInt(e.ts),o[n].ts<i)){o[n].ts=i,s=o[n].handlers;for(var a=0,c=s.length;c>a;++a)l?s[a](e):u.push({handler:s[a],data:e})}}catch(h){}}})}()}(),Array.prototype.filter||(Array.prototype.filter=function(t){var e=[],i=arguments[1]||this;if(null===this)throw new Error("There is empty context for filter function");if("function"!=typeof t)throw new Error("You should declare filter function as parameter");for(var n=0,o=this.length;o>n;n++){var s=i[n];t.call(i,s,n,this)&&e.push(s)}return e}),function(t){t.Collection||(t.Collection=function(t){this.storage=[],this.idAttr=t||"id"},t.Collection.prototype={add:function(t){this.storage.push(t),$(this).trigger("append."+t[this.idAttr],[t])},get:function(t){var e=this;return x.filter(this.storage,function(i){return i[e.idAttr]===t})}})}(ya,this),BEM.DOM.decl("w-rss",{onSetMod:{js:function(){var t=this.domElem,e=this.params.feedID,i=this.params.newsTimestamp,n=t.find(".w-rss__list"),o=t.parent().parent().find("h2.b-widget__title"),s=t.find(".w-rss__gradient"),r=t.find(".w-rss__gradient-up"),a=t.find(".w-rss__informer"),c=t.parent().find(".w-rss__arrow_type_up"),u=t.parent().find(".w-rss__arrow_type_down"),l=0,h=0,d=(new Date).getTime(),f=(new Date).getTime(),p=3e4,m=3e4,_=250,g=!1,b=!0,v=!1,y=function(t,e){var i="up"===t?c:u,n="w-rss__arrow_hovered-"+("up"===t?"up":"down")+"_yes";e&&!i.get(0).clickable?(i.get(0).clickable=!0,i.css({cursor:"pointer"}),i.bind("mouseenter",function(){i.addClass(n)}).bind("mouseleave",function(){clearTimeout(h),clearInterval(l),i.removeClass(n)}).bind("click",function(){$.browser.safari&&window.getSelection&&window.getSelection().empty();try{Lego.c("stred/pid=132/cid=71588/path="+S.widget.id+"."+t)}catch(e){}P.scroll(t)}).bind("mousedown",function(){return h=setTimeout(function(){l=setInterval(function(){P.scroll(t)},250)},400),$.browser.opera?!1:void 0}).bind("mouseup",function(){clearTimeout(h),clearInterval(l)})):!e&&i.get(0).clickable&&(i.get(0).clickable=!1,i.removeClass(n),i.css({cursor:"default"}),clearTimeout(h),clearInterval(l),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup"))},w=100,k=!1,M=[],E=[],x=function(t){return wg.isColumnWide?wg.isColumnWide(t):2==t||5==t},C=function(t){return wg.isColumnNarrow?wg.isColumnNarrow(t):4==t},T=function(t){return wg.isColumnNarrow?wg.isColumnNarrow(t):3==t},S=function(){var e=(t.closest(".b-widget-data").attr("id")+"").substr(3),i=Widget.Framework.get(e),n=i.params.position.split(":")[0];return{widget:i,col:n,layout:x(n)?{horiz:!0}:{vert:!0},mode:{compact:2==i._prefs.wht,large:3==i._prefs.wht},isHeightAuto:""===i._prefs.wht||0===i._prefs.wht,type:function(){return t.hasClass("w-rss_type_text-img")?{"text-img":!0}:t.hasClass("w-rss_type_magazine")?{magazine:!0}:{text:!0}}()}}(),B=S.widget.news.length,D=function(){if(S.layout.vert&&t.hasClass("w-rss_layout_horiz")?(t.removeClass("w-rss_layout_horiz"),t.addClass("w-rss_layout_vert")):S.layout.horiz&&t.hasClass("w-rss_layout_vert")&&(t.removeClass("w-rss_layout_vert"),t.addClass("w-rss_layout_horiz")),S.isHeightAuto&&(parseInt(S.widget._prefs.n,10)>8?(t.find(".w-rss__body").addClass("w-rss__body_height_large"),S.mode.large=!0):S.layout.horiz||T(S.col)||parseInt(S.widget._prefs.n,10)<=5||5>=B?(t.find(".w-rss__body").addClass("w-rss__body_height_compact"),S.mode.compact=!0):S.layout.vert&&!T(S.col)&&(t.find(".w-rss__body").removeClass("w-rss__body_height_compact"),S.mode.compact=!1)),S.type["text-img"]&&!C(S.col)){var e=S.layout.vert?"vert":"horiz",i=t.parent().find(".l-rss_type_"+e).clone();return i.appendTo(n),i.find("tbody").html("")}return n},I=D(),O=function(){return I.find(S.type["text-img"]&&!C(S.col)?"tr":"div.w-rss__item")},P=function(){var e=1,i=0,o=2,a=function(t,e){var i=O(),n=0;e||(e=i.length-1);for(var o=e;o>=t;o-=1)n+=i.eq(o).outerHeight(!0);return n};return S.type.text?(e=1,o=4):S.type.magazine&&(o=4),{scroll:function(c){var u=O();if(G(),S.type.magazine&&i>=0&&u.eq(i).removeClass("w-rss__item_position_first"),"down"===c){var l=a(u.length-1-o),h=a(i);if(h-l<=t.height()&&!k&&H(),i<u.length-1){i+=e,S.type.magazine&&!u.eq(i).hasClass("w-rss__item_previewable_no")&&u.eq(i).addClass("w-rss__item_position_first");var d=0-Math.floor(u.eq(i+e-1).position().top);d+=W(u,d),n.animate({top:d},w),y("up",!0);var f=n.height()-Math.abs(d),p=t.height()-s.height()/3;(i>=u.length-1||p>=f)&&y("down",!1)}else y("down",!1);v&&(s.addClass("i-hidden"),r.removeClass("i-hidden"))}else i>0?(i-=e,S.type.magazine&&!u.eq(i).hasClass("w-rss__item_previewable_no")&&u.eq(i).addClass("w-rss__item_position_first"),n.animate({top:0-u.eq(i).position().top},w),y("down",!0),0>=i&&y("up",!1)):y("up",!1),v&&(s.removeClass("i-hidden"),r.addClass("i-hidden"),i||s.addClass("i-hidden"))},reset:function(){i=0,n.animate({top:0},w)}}}(),j=function(){var e=t.parent().find(".w-rss__item").clone().remove();return function(t){var i=e.clone(),n=t.url;n=n.replace(/^http:/,"").replace(/^https:/,""),i.find(".w-rss__title").attr("href",n).html(t.title),i.find(".w-rss__date").html(t.date),t.descr?i.find(".w-rss__description").html(t.descr):i.find(".w-rss__description").remove();var o=i.find(".w-rss__preview");if(t.img){var s=S.type.magazine&&S.mode.compact&&t.imgCompact?t.imgCompact:t.img;s=s.replace(/^http:/,"").replace(/^https:/,""),o.attr("href",n),o.css({"background-image":"url("+s+")"})}else i.addClass("w-rss__item_previewable_no"),o.remove();return i.show(),i}}(),A=t.parent().find(".l-rss_type_vert").find("tr:first").clone().remove(),N=t.parent().find(".l-rss_type_horiz").find("tr:first").clone().remove(),L=function(t){var e=[];if(S.type["text-img"]&&!C(S.col)){var i,n=function(e,i){if(""===$(i).html()){var n=t.shift();n&&($(i).html('<div class="w-rss__item">'+j(n).html()+"</div>"),M.push(n))}},o=I.find("tr:last").eq(0);for(1==o.length&&o.find("td:not(.l-rss__gap)").each(n);t.length>0;)i=S.layout.vert?A.clone():N.clone(),i.find("td:not(.l-rss__gap)").each(n),$.merge(e,i)}else for(var s=0,r=t.length-1;r>=s;s+=1)t[s]&&(M.push(t[s]),$.merge(e,j(t[s])));I.append(e)},F=function(t,n){k=!0;var o={feed_id:e,num:12,start:M.length+1,type:S.widget._prefs.type,"no-text":S.widget._prefs["no-text"]};"object"==typeof t&&$.extend(o,t),$.ajax({url:S.widget.params.src,dataType:"json",data:o,success:function(t){t&&t.news&&t.news.length>0&&(t.tstamp&&(i=t.tstamp),n(t))},complete:function(){k=!1,K()}})},R=function(t){return t.length>M.length||t[0].title!==M[0].title||t[0].date!==M[0].date?!0:!1},H=function(){F({tstamp:i},function(t){L(t.news),y("down",!0)})},z=function(t){t=t||M,P.reset(),n.html(""),I=D(),M=[],L(t),y("down",!0),V()},U=function(e){for(var i,n=O(),o=0,r=0;e>o&&100>r;){if(i=$(n[r]).height(),o+i>e){e-o>i/2&&(o+=i);break}o+=i,r++}100>r&&r>0&&(v=!0,$(".w-rss__body",t).height(o),s.addClass("i-hidden"))},W=function(e,i){if(!v)return 0;for(var n,o=t.height(),s=0,r=0;o-i>s&&100>r;){if(r>e.length-1)return 0;n=$(e[r]).height(),s+=n,r++}return 100>r?o-i-s:0},q=function(){if(!t.get(0).isInited){t.get(0).isInited=!0;var e=t.height();if(n.height()>e){S.type.magazine||setTimeout(function(){U(e)},S.type["text-img"]?700:0);var i=!0;t.closest(".b-widget-fixed").mouseenter(function(){u.removeClass("w-rss__arrow_visibility_hidden"),c.removeClass("w-rss__arrow_visibility_hidden")}).mouseleave(function(){u.addClass("w-rss__arrow_visibility_hidden"),c.addClass("w-rss__arrow_visibility_hidden")}).mousemove(function(){i&&(i=!1,G(),setTimeout(function(){i=!0},250))}),y("down",!0),y("up",!0),y("up",!1)}else S.isHeightAuto&&(t.find(".w-rss__body").removeClass("w-rss__body_height_large"),t.find(".w-rss__body").addClass("w-rss__body_height_compact"),S.mode.compact=!0,S.mode.large=!1,S.isHeightAuto=!1,z(),t.get(0).isInited=!1,q())}},V=function(){if(setTimeout(q,450),$(window).load(function(){setTimeout(q,250)}),S.type.magazine){var t=I.find("div.w-rss__item").eq(0);t.hasClass("w-rss__item_previewable_no")||t.addClass("w-rss__item_position_first")}},J=function(){return Math.round(2e3*Math.random()+3e3)},G=function(){f=(new Date).getTime()},K=function(){d=(new Date).getTime()};S.widget._onDropcallback=function(t){var e=t.split(":")[0];e!=S.col&&(x(e)!=!!S.layout.horiz||S.type["text-img"]&&(C(e)||C(S.col))||T(e)||T(S.col))&&(S.col=e,S.layout=x(e)?{horiz:!0}:{vert:!0},z()),S.col=e},$(document).bind("mousemove keydown",function(){b&&!g&&(b=!1,setTimeout(function(){b=!0},_),(new Date).getTime()-d>p&&(a.hasClass("w-rss__informer_visibility_hidden")?(g=!0,setTimeout(function(){F({start:0},function(t){g=!1,t.news.length>0&&R(t.news)&&((new Date).getTime()-f>m?z(t.news):(a.removeClass("w-rss__informer_visibility_hidden"),E=t.news))})},J())):(new Date).getTime()-f>m&&E.length>0&&(K(),z(E),E=[],a.addClass("w-rss__informer_visibility_hidden"))))}),o.append(a),o.addClass("b-widget__title_type_rss"),L(S.widget.news),V(),$.browser.msie&&S.type["text-img"]&&setTimeout(function(){var e=t.find(".w-rss__preview"),i=t.find("table td").eq(0).width();e.each(function(t,e){var n=$(e);n.hide(),n.css({width:i+"px"}),n.css({heigth:"70px"}),n.show()}),t.hide(),t.css({zoom:1}),t.show()},600),setTimeout(function(){0===t.height()&&(t.parent().hide(),setTimeout(function(){t.parent().show()},200))},2e3),a.click(function(){E.length>0&&(z(E),E=[]),G(),a.addClass("w-rss__informer_visibility_hidden")})}}}),x.Component.extend({id:"check-https-cd",init:function(){var t=this.data("logger"),e=this.data("checker"),i=this.data("replace");if(e&&t&&i){var n=new Image,o=!1;n.src=e,window.setTimeout(function(){o||(n.src="")},1e3),$(n).on("error",function(){$("body").trigger("httpscheck",[!1]),o=!0}),$(n).on("load",function(){$("body").trigger("httpscheck",[!0]),o=!0}),$("body").on("httpscheck",function(e,o){o?$("form[action='"+i+"']").each(function(){this.action=this.action.replace(/(http)(\:\/\/)/,"$1s$2")}):n.src=t.replace(/%s/,((new Date).getTime()/1e3).toFixed())})}}}),function(){"use strict";x.amd.require("statlog",function(t){x.Component.extend({id:"statlogger",init:function(){var e=function(){t.logByDocument({type:"click",root:"undefined"!=typeof Lego&&Lego.params&&Lego.params.statRoot?Lego.params.statRoot:"/testMordaRoot"})};Lego.params["show-counters"]&&(e(),$(window).on("resize",function(){e()}))}})})}(home),$(document).ready(function(){var t=home&&home.getData&&home.getData("awapsbw.data");t&&window.performance&&window.performance.timing&&setTimeout(function(){var e=window.performance.timing.responseEnd-window.performance.timing.responseStart,i=e<=t.limit?101:99,n=!0;e&&("com.tr"===t.domain&&(n=window.plp&&window.plp.white&&window.plp.white[0]&&window.plp.white[0].dry),n&&((new Image).src="//awaps.yandex."+t.domain+"/0/"+t.counter+"/0.gif?setbw="+i+"&ms="+e))},2e3)}),MordaRT.prototype.siteInDomainList=function(t,e){for(var i,n=0,o=t.length;o>n;n++)if(i=t[n],this.listRE[i]||(this.listRE[i]=new RegExp("^"+i.replace(/\./g,"\\.").replace(/\*/g,"[^.]+")+"$")),e.match(this.listRE[i]))return!0;return!1},MordaRT.prototype.getHostname=function(t){var e=document.createElement("a");return e.href=t,e.hostname},MordaRT.prototype.getEntries=function(t,e){if(!window.performance||!window.performance.getEntries)return{resources:{},resourcesCount:0};var i,n,o=window.performance.getEntries("resources"),s={},r=0;if(o&&o.length)for(var a=0,c=o.length;c>a;a++)if(i=o[a].initiatorType||"unknown",n=this.getHostname(o[a].name),-1!==n.indexOf(".")&&!this.siteInDomainList(t,n)){s[i]||(s[i]={});var u=e?this.quote(o[a].name):n;s[i][u]?s[i][u]++:s[i][u]=1,r++}return{resources:s,resourcesCount:r}},MordaRT.prototype.quote=function(t){return t.replace(/"|%22/g,"&quot;")},$(document).ready(function(){var t=home&&home.getData&&home.getData("resources-count.data");if(t){var e=new MordaRT,i=["*.*.yandex.*","kiks.yandex.ru","clck.yandex.*","yabs.yandex.*","mc.yandex.ru","*.tns-counter.ru","*.hit.gemius.pl"];setTimeout(function(){var n=e.getEntries(i);
if(n.resourcesCount){var o={};o["resources-"+t.type]=n.resources,window.yaCounter722545&&window.yaCounter722545.params(o)}},11e3)}}),$(document).ready(function(){function t(s){var r={};r["time-"+e.content]={},r["time-"+e.content][e.type]={},r["time-"+e.content][e.type][s]=1,window.yaCounter722545&&window.yaCounter722545.params(r),i=o>=s?setTimeout(function(){t(s+n)},n):null}var e=home&&home.getData&&home.getData("time-count.data");if(e){var i=null,n=e.timeout,o=3e5;t(0),$(document).bind("visibilitychange",function(){var t=document.visibilityState||document.webkitVisibilityState||document.msVisibilityState;i&&"hidden"===t&&(clearTimeout(i),i=null)}),$.browser.msie?$(document).bind("focusout",function(){clearTimeout(i),i=null}):$(window).blur(function(){clearTimeout(i),i=null})}}),$(document).ready(function(){function t(){var t=null;"flash"===c.type?t=c.custom.flashV&&(new CAWBrowser).flash>=c.custom.flashV?e():i():"img"===c.type?t=i():"html"!==c.type&&(t=n());var r=o(),u=s();r&&t?$.extend(t,r):r&&(t=r),u&&t?$.extend(t,u):u&&(t=u),a(t)}function e(){var t=$("#banner > object:eq(0)").attr("classid"),e=$("#banner > #bc > noscript").length,i=$("#banner").children().length,n=$("#banner > #bc").children().length;return t&&"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"===t&&1===e&&2===i&&1===n?null:{horizontal:{flash:1}}}function i(){var t=$("#banner > #bc > noscript").length,e=$("#banner > #bc").children().length,i="",n="";return c.custom.gif?i=$("#banner > img").attr("src"):(n=$("#banner > a").attr("href"),i=$("#banner > a > img").attr("src")),i!==c.custom.img||!c.custom.gif&&n!==c.custom.href||1!==t||1!==e?c.custom.img?{horizontal:{img:1}}:{horizontal:{none:1}}:null}function n(){var t=$(".b-line_adv").children().length;return 0===t?null:{horizontal:{none:1}}}function o(){var t=$("img"),e=[],i=!1;if(t.each(function(){var t=$(this).parents("a");this.src&&t.length&&e.push(t.attr("href"))}),e.length)for(var n=0,o=e.length;o>n;n++)if(!r(e[n])){i=!0;break}return i?{image:1,ignore:1}:null}function s(){var t=$("html")[0].style.cssText;return t?{html:1}:null}function r(t){if(!t||"#"===t||0===$.trim(t).indexOf("javascript"))return!0;var e=u.getHostname(t);return u.siteInDomainList(l,e)}function a(t){if(t&&!t.ignore){var e=$('<iframe style="display:none"></iframe>');$("body").append(e),e.attr("src",c.url)}var i=null,n={check:1};if(t&&t.ignore&&delete t.ignore,t){c.all&&delete n.check,i={},i["consistency-"+c.content]=$.extend(t,n);var o=u.getEntries(l),s=u.getEntries(l,!0);o.resourcesCount&&(i["resources-consistency-"+c.content]=o.resources),s.resourcesCount&&o.resources.script&&(i["resources-src-consistency-"+c.content]=s.resources.script)}else c.all||(i={},i["consistency-"+c.content]=n);i&&window.yaCounter722545&&window.yaCounter722545.params(i)}var c=home&&home.getData&&home.getData("consistency.data"),u=new MordaRT;if(c){var l=["*.*.yandex.*","*.yandex.*","yandex.*","yastatic.net","*.tns-counter.ru","*.hit.gemius.pl"];setTimeout(function(){t()},c.timeout)}});var i18n=i18n||{};!function(t,e){function i(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?l+t.elem:"")+(t.modName?u+t.modName+u+t.modVal:"")}function n(t){var e={};return t.split(l).forEach(function(t,i){var n=[i?"elem":"block","mod","val"];t.split(u).forEach(function(t,i){e[n[i]]=t})}),e}function o(t){return t?c.push(t):!1}function s(){return c.length&&c.pop()}function r(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;var a={},c=[],u="_",l="__",h="ru";r.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&o(this._keyset),this._keyset=i(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=n(this._keyset),i="i-tanker"===e.block?"tanker":this._prj,o=e.elem||this._keyset,s=this._key;i=i18n[i]||(i18n[i]={}),o=i[o]||(i[o]={}),o[s]="function"==typeof t?t:function(){return t};var r=a[this._lang]||(a[this._lang]={}),c=r[this._keyset]||(r[this._keyset]={});c[s]=t},val:function(t,e){var i=a[this._lang]&&a[this._lang][this._keyset];if(!i)return console&&console.log&&console.log("[Error] keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")"),"";if(i=i[this._key],!i)return"";try{return"string"==typeof i?i:e?i.call(e,t):i.call(this,t)}catch(n){throw"[Error] keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")"}},_c:function(){return a}},e.I18N=function(t){var e=function(t,i,n){return e.keyset(t).key(i,n)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,i){var n,o,r=this._proto;return r.lang(this._lang).key(t),n=r.val.call(r,i,e),o=s(),o&&r.keyset(o,!1),n},e.decl=function(t,e,i){var n,o=this._proto;i||(i={}),i.lang&&o.lang(i.lang),o.keyset(t);for(n in e)e.hasOwnProperty(n)&&o.key(n).decl(e[n]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.lang(h),e}(new r),BEM=e}(this,"undefined"==typeof BEM?{}:BEM),BEM.I18N.decl("auth",{"fill-input":"  ",login:"",logon:"",password:"",register:"",remember:" ",temporary:" ","wrong-characters":" ","wrong-keyboard-layout":" ","wrong-password":"     "},{lang:"ru"}),BEM.I18N.decl("b-head-search",{"my-searches-off":"  (())","my-searches-on":"  (())"},{lang:"ru"}),BEM.I18N.decl("b-head-tabs",{more:"",or:""},{lang:"ru"}),BEM.I18N.decl("b-head-user",{"change-password":" ",passport:"",profiles:" "},{lang:"ru"}),BEM.I18N.decl("b-keyboard-loader",{keyboard:""},{lang:"ru"}),BEM.I18N.decl("b-keyboard-popup",{close:""},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"",advertising:"",afisha:"",all:"",api:"API",appsearch:"",auto:"",avia:"",aziada:"",ba:"",backapv:" .",balance:"",bar:"","bar-ie":"","bar-ie9":"9",bayan:" ",blogs:"",books:"",browser:"",calendar:"",captcha:"...",catalogwdgt:" ",chrome:"   ",city:"",cityday:" ",collection:"",company:"",contest:"Contest",desktop:" ",direct:"","direct.market":"",disk:"",ege:"",expert:"",feedback:" ",ff:"  ",fotki:"",fresh:"",games:"",geocontext:"",goroda:"",help:"",i:"",ie:"  ",images:"","images-com":"",interests:"",internet:"",keyboard:"",kraski:"",kuda:"",large:"  ",legal:" ",lenta:"",libra:"",literacy:"   ",local:"",lost:"",love:"13",mail:"",maps:"","maps-wiki":" ",market:"","market.advertising":"",metrika:"",metro:"",mobile:"",moikrug:"",money:"",museums:"",music:"","music-partner":": ",nahodki:"",nano:"",newhire:"",news:"",oauth:"",online:"",openid:"OpenID",opera:"Opera Software",opinion:"",partners:"",partnersearch:"  ",passport:"",pdd:"  ",peoplesearch:"",perevod:"",probki:"",pulse:": ",punto:"Puntoswitcher",pvo:"",rabota:"",ramazan:"",rasp:"",realty:"",referats:"",rk:"?",root:".  Unix ",school:"",search:"",server:"",site:"",slovari:"",so:"",social:"",soft:"",sport:"",sprav:"",start:" ",stat:"",subs:"",taxi:"",terms:"",tests:"  ",tickets:"",time:".",toster:"",translate:"",tune:"",tv:"",uslugi:"",video:"","video-com":"",wdgt:"",weather:"",webmaster:"",widgets:"",wordstat:"",wow:".",www:"",xmlsearch:"XML",yaca:"",yamb:" ",zakladki:""},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,i=e%10,n=e%100;return 1==i&&11!=n?t.one:i>1&&5>i&&(10>n||n>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"",group:" ",nah:" ",nav:"",text:"",traffic:"",weather:""},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":" "},{lang:"ru"}),BEM.I18N.decl("user",{enter:"",exit:"",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" ",some:" ",many:" ",none:"  "})},letter_compose:" ",passport:"",upload_files:" ",tune:""},{lang:"ru"}),BEM.I18N.lang("ru");var BEMHTML=function(){var t,e=function(e){function i(){function e(){if("no-follow"===this.ctx.link)return void 0;var t=this._links[this.ctx.link];return __r47=this.ctx,this.ctx=t,__r48=i.call(s),this.ctx=__r47,__r48}function n(t,e,i){if(0===e.length)return void 0;if(Array.isArray(i)){for(var n=t,o=0;o<i.length-1;o++)n=n[i[o]];i=n[i[o]]}for(var s,r=t,o=0;o<e.length-1;o++)r=r[e[o]];return s=r[e[o]],r[e[o]]=i,s}function o(t,e){return(t||"")+"__"+(e||"")}var s=this;if(!!this.elem==!1&&"b-link"===this.block&&"attrs"===this._mode){for(var r=this.ctx,a=["title","target"],c=typeof r.url,u={href:"undefined"===c||"string"===c?r.url:(c=[],__r86=this._buf,this._buf=c,__r87=this._mode,this._mode="",__r88=this.ctx,this.ctx=r.url,__r89=i.call(s),this._buf=__r86,this._mode=__r87,this.ctx=__r88,c.join(""))};c=a.pop();)r[c]&&(u[c]=r[c]);return u}if(!!this.elem==!1&&"b-link"===this.block&&"tag"===this._mode)return"a";if("popup"===this.block&&"tail"===this.elem&&"tag"===this._mode)return"i";if(!!this.elem==!1&&"popup"===this.block&&!(257985948!==this.__$anflg)==!1&&"default"===this._mode){var l=this.ctx.mods||{};if(l.theme||(l.theme="ffffff"),l.autoclosable||(l.autoclosable="yes"),l.adaptive||(l.adaptive="yes"),l.animate||(l.animate="yes"),this.ctx.mods=l,this.ctx.zIndex){var h=this.ctx.attrs||(this.ctx.attrs={});h.style||(h.style=""),h.style+="z-index:"+this.ctx.zIndex}this.ctx.content=[{elem:"under",mods:this.ctx.underMods},this.ctx.content];var d=this.__$anflg;this.__$anflg=257985948;var f=this.ctx;this.ctx=this.ctx;var p=this._mode;return this._mode="",i.call(s),this.ctx=f,this._mode=p,void(this.__$anflg=d)}if("dropdown"===this.block&&"popup"===this.elem&&!(58131469!==this.__$anflg)==!1&&"default"===this._mode){var m=[{block:"dropdown",elem:"popup"}],_=this.ctx;_.mix&&(m=m.concat(_.mix));var g=this.__$anflg;this.__$anflg=58131469;var b=this.ctx;this.ctx={block:"popup",mix:m,mods:_.mods,attrs:_.attrs,js:_.js,content:[{elem:"tail"},{elem:"content",content:_.content}]};var v=this._mode;return this._mode="",i.call(s),this.ctx=b,this._mode=v,void(this.__$anflg=g)}if(!!this.elem==!1&&"dropdown"===this.block&&"mix"===this._mode)return[{mods:{action:"closed"}}];if(!!this.elem==!1&&"dropdown"===this.block&&"js"===this._mode)return!0;if("suggest2-item"===this.block&&!(this.mods&&"link"===this.mods.interact)==!1&&!("nav"===this.mods.type||"icon"===this.mods.type)==!1&&"text"===this.elem&&"mix"===this._mode)return{mods:{type:"url"}};if(!!this.elem==!1&&"suggest2-item"===this.block&&!(this.mods&&"link"===this.mods.interact)==!1&&"content"===this._mode)return{elem:"link",url:this.ctx.url,target:this.ctx.target||"_blank",content:this.ctx.content};if("suggest2-item"===this.block&&"bullet"===this.elem&&"attrs"===this._mode)return{"aria-hidden":!0};if("suggest2-item"===this.block&&"bullet"===this.elem&&"tag"===this._mode)return"span";if("suggest2"===this.block&&"a11y"===this.elem&&"tag"===this._mode)return"span";if("suggest2-item"===this.block&&"fact"===this.elem&&"content"===this._mode)return[{block:"suggest2",elem:"a11y",content:BEM.I18N("suggest2-item","quick-answer")+": "},this.xmlEscape(this.ctx.content)];if("suggest2-item"===this.block&&"link"===this.elem&&"attrs"===this._mode)return{href:this.ctx.url,target:this.ctx.target};if("suggest2-item"===this.block&&"link"===this.elem&&"tag"===this._mode)return"a";if("suggest2-item"===this.block&&"icon"===this.elem&&!this.ctx.png==!1&&!this.ctx.svg==!1&&"attrs"===this._mode)return{style:'background-image:url("'+this.ctx[BEM.blocks["i-ua"]&&BEM.blocks["i-ua"].svg?"svg":"png"]+'")'};if("suggest2-item"===this.block&&"icon"===this.elem&&!this.ctx.svg==!1&&"attrs"===this._mode)return{style:'background-image:url("'+this.ctx.svg+'")'};if("suggest2-item"===this.block&&"icon"===this.elem&&!this.ctx.png==!1&&"attrs"===this._mode)return{style:'background-image:url("'+this.ctx.png+'")'};if("suggest2-item"===this.block&&"icon"===this.elem&&"tag"===this._mode)return"span";if("suggest2"===this.block&&!(this.mods&&"normal"===this.mods.theme)==!1&&"content"===this.elem&&"tag"===this._mode)return"ul";if("suggest2-item"===this.block&&"highlight"===this.elem&&"content"===this._mode)return this.xmlEscape(this.ctx.content);if("suggest2-item"===this.block&&"highlight"===this.elem&&"bem"===this._mode)return!1;if("suggest2-item"===this.block&&"highlight"===this.elem&&"tag"===this._mode)return"b";if("suggest2-item"===this.block&&"fact"===this.elem&&"tag"===this._mode)return"span";if("suggest2-item"===this.block&&"text"===this.elem&&"content"===this._mode)return Array.isArray(this.ctx.content)?this.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},this):this.xmlEscape(this.ctx.content);if("suggest2-item"===this.block&&"text"===this.elem&&"tag"===this._mode)return"span";if(!!this.elem==!1&&"suggest2-item"===this.block&&"js"===this._mode)return!0;if(!!this.elem==!1&&"suggest2-item"===this.block&&"tag"===this._mode)return"li";if(!!this.elem==!1&&"suggest2"===this.block&&"mix"===this._mode)return[{block:"suggest2-detect",js:!0}];if("suggest2"===this.block&&"items"===this.elem&&"tag"===this._mode)return"ul";if(!!this.elem==!1&&"suggest2"===this.block&&"js"===this._mode)return!0;if("i-bem"===this.block&&"i18n"===this.elem&&"default"===this._mode){if(!this.ctx)return"";var y=this.ctx,w=y.keyset,k=y.key,M=y.params||{};if(!w&&!k)return"";if(y.content){var E;M.content=(E=[],__r76=this._buf,this._buf=E,__r77=this._mode,this._mode="",__r78=this.ctx,this.ctx=y.content,__r79=i.call(s),this._buf=__r76,this._mode=__r77,this.ctx=__r78,E.join(""))}return void this._buf.push(BEM.I18N(w,k,M))}if("input"===this.block&&"clear"===this.elem&&"content"===this._mode&&!!this.ctx.content==!1)return"";if("input"===this.block&&"clear"===this.elem&&"tag"===this._mode)return"span";if("input"===this.block&&"control"===this.elem&&!!this.mods.clear==!1&&!(945086060!==this.__$anflg)==!1&&"default"===this._mode){var x=this.__$anflg;this.__$anflg=945086060;var C=this.ctx;this.ctx={elem:"box",tag:"span",content:[this.ctx,{elem:"clear"}]};var T=this._mode;return this._mode="",i.call(s),this.ctx=C,this._mode=T,void(this.__$anflg=x)}if("input"===this.block&&"control"===this.elem&&"attrs"===this._mode){var S={id:this._inputId,name:this._name};return(this._value||0===this._value)&&(S.value=this._value),this.mods.disabled&&(S.disabled="disabled"),S}if("input"===this.block&&"control"===this.elem&&"tag"===this._mode)return"input";if("input"===this.block&&"ahead-hint"===this.elem&&"attrs"===this._mode)return{readonly:"readonly",tabindex:"-1"};if("input"===this.block&&"ahead-hint"===this.elem&&"tag"===this._mode)return"input";if("input"===this.block&&"ahead-hint"===this.elem&&"mix"===this._mode)return[{block:"input",elem:"control"}];if("input"===this.block&&"ahead-filler"===this.elem&&"tag"===this._mode)return"span";if("input"===this.block&&"ahead"===this.elem&&"content"===this._mode)return[{elem:"ahead-filler"},{elem:"ahead-hint"},{elem:"ahead-hintholder"}];if("input"===this.block&&!!this.elem==!1&&"default"===this._mode&&!!(this.ctx.mods||{}).theme==!1)return __r68=this.ctx,__r69=__r68.mods,__r68.mods=this.ctx.mods||{},__r70=this.ctx.mods,__r71=__r70.theme,__r70.theme="normal",__r72=i.call(s),__r68.mods=__r69,__r70.theme=__r71,__r72;if("input"===this.block&&!!this.elem==!1&&"js"===this._mode)return"gradient"==this.mods.popup?{popupMods:{gradient:"yes"}}:!0;if("input"===this.block&&!!this.elem==!1&&"default"===this._mode&&!(971979567!==this.__$anflg)==!1&&!!this._inputId==!1){var B=this.__$anflg;this.__$anflg=971979567;var D=this._inputId;this._inputId=this.ctx.id||this.generateId();var I=this._name;this._name=this.ctx.name||"";var O=this._value;this._value="undefined"!=typeof this.ctx.value&&null!==this.ctx.value?this.ctx.value:"";var $=this._inputLink;this._inputLink=!0;var P=this._disabled;return this._disabled=this.mods.disabled,i.call(s),this._inputId=D,this._name=I,this._value=O,this._inputLink=$,this._disabled=P,void(this.__$anflg=B)}if("input"===this.block&&!!this.elem==!1&&"js"===this._mode)return!0;if("input"===this.block&&!!this.elem==!1&&"tag"===this._mode)return"span";if(""===this._mode&&!this._==!1&&!!this._.cleverSubstring==!1)return this._.cleverSubstring=function(t,e,i){return t.length>e+i?t.substring(0,e-1)+"":t},void i.call(s);if(!!this.elem==!1&&"b-page"===this.block&&"js-params"===this._mode){var j,A=this["i-global"],N={},L={block:"i-global",js:N};for(j in A)A.hasOwnProperty(j)&&(__r58=this._mode,this._mode="public-params",__r59=this.block,this.block="i-global",__r60=this.elem,this.elem=j,__r61=i.call(s),this._mode=__r58,this.block=__r59,this.elem=__r60,__r61)&&(N[j]=A[j]);return L}if("i-global"===this.block&&"public-params"===this._mode&&!this.elem==!1)return{id:1,lang:1,tld:1,"content-region":1,"user-region":1,login:1,displayName:1,index:1,yandexuid:1,"passport-host":1,"pass-host":1,"passport-msg":1,"static-host":1,"lego-static-host":1,"social-host":1,clck:1,"click-host":1,"export-host":1,"i-host":1,"social-retpath":1,"lego-path":1,sid:1,retpath:1,uid:1}[this.elem]||!1;if("i-global"===this.block&&"default"===this._mode&&"lego-static-host"===this.elem)return"//yandex.st/lego/2.10-126";if("i-global"===this.block&&"default"===this._mode&&"export-host"===this.elem)return"//export.yandex.ru";if("i-global"===this.block&&"default"===this._mode&&"social-host"===this.elem)return"//social.yandex.ru";if("i-global"===this.block&&"default"===this._mode&&"pass-host"===this.elem)return"//pass.yandex.ru";if("i-global"===this.block&&"default"===this._mode&&"passport-host"===this.elem)return"https://passport.yandex.ru";if("i-global"===this.block&&"default"===this._mode&&"click-host"===this.elem)return"//clck.yandex.ru";if("i-global"===this.block&&"default"===this._mode&&"content-region"===this.elem)return"ru";if("i-global"===this.block&&"default"===this._mode&&"tld"===this.elem)return"ru";if("i-global"===this.block&&"default"===this._mode&&"lang"===this.elem)return"ru";if("i-global"===this.block&&"default"===this._mode&&!this.elem==!1)return"";if(!!this.elem!=!1||"i-global"!==this.block||"default"!==this._mode){if(!!this.elem==!1&&"i-global"===this.block&&"env"===this._mode)return{};if(""===this._mode&&!!this["i-global"]==!1){for(var F,R={},H=["lang","tld","content-region","click-host","passport-host","pass-host","social-host","export-host","login","lego-static-host"];F=H.shift();)R[F]=(__r51=this._mode,this._mode="default",__r52=this.block,this.block="i-global",__r53=this.elem,this.elem=F,__r54=i.call(s),this._mode=__r51,this.block=__r52,this.elem=__r53,__r54);return this["i-global"]=this._.extend(R,(__r55=this._mode,this._mode="env",__r56=this.block,this.block="i-global",__r57=i.call(s),this._mode=__r55,this.block=__r56,__r57)),void i.call(s)}if(!!this.elem==!1&&"i-ua"===this.block&&!(871511386!==this.__$anflg)==!1&&"content"===this._mode){var z=(__r49=this.__$anflg,this.__$anflg=871511386,__r50=i.call(s),this.__$anflg=__r49,__r50);return z+=[";(function(d,e,c,r,n,w,v,f){","e=d.documentElement;",'c="className";','r="replace";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}if(!!this.elem==!1&&"i-ua"===this.block&&"content"===this._mode)return[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("");if(!!this.elem==!1&&"i-ua"===this.block&&"bem"===this._mode)return!1;if(!!this.elem==!1&&"i-ua"===this.block&&"tag"===this._mode)return"script";if("content"===this._mode)return this.ctx.content;if("mix"===this._mode)return void 0;if("bem"===this._mode)return void 0;if("jsAttr"===this._mode)return void 0;if("js"===this._mode)return void 0;if("cls"===this._mode)return void 0;if("attrs"===this._mode)return void 0;if("tag"===this._mode)return void 0;if(!this.ctx==!1&&!!this._.isSimple(this.ctx)==!1&&!this.ctx.link==!1){if(!t||!this._cacheLog)return e.call(this);var U=this._buf.slice(this._cachePos).join("");this._cachePos=this._buf.length,this._cacheLog.push(U,{log:this._localLog.slice(),link:this.ctx.link});var W=e.call(this);return this._cachePos=this._buf.length,W}if(!t==!1&&!this.ctx==!1&&!this.ctx.cache==!1){var q;if(q=t.get(this.ctx.cache)){var V=this._links;this.ctx.links&&(this._links=this.ctx.links);for(var J=0;J<q.log.length;J++)if("string"!=typeof q.log[J]){var G,K=q.log[J];G=K.log.map(function(t){return{key:t[0],value:n(this,t[0],t[1])}},this).reverse();var Q=this.ctx,X=Q.cache;Q.cache=null;var Y=this._cacheLog;this._cacheLog=null;var Z=this.ctx,te=Z.link;Z.link=K.link,i.call(s),Q.cache=X,this._cacheLog=Y,Z.link=te,G.forEach(function(t){n(this,t.key,t.value)},this)}else this._buf.push(q.log[J]);return this._links=V,q.res}var ee,ie=[],ne=this.ctx,oe=ne.cache;ne.cache=null;var se=this._cachePos;this._cachePos=this._buf.length;var re=this._cacheLog;this._cacheLog=ie;var ae=this._localLog;this._localLog=[],ee=i.call(s);var ce=this._buf.slice(this._cachePos).join("");return ce&&ie.push(ce),ne.cache=oe,this._cachePos=se,this._cacheLog=re,this._localLog=ae,t.set(this.ctx.cache,{log:ie,res:ee}),ee}if("default"!==this._mode){if(""===this._mode&&!this._.isSimple(this.ctx)==!1){this._listLength--;var ue=this.ctx;return void((ue&&ue!==!0||0===ue)&&this._buf.push(ue))}if(""===this._mode&&!!this.ctx==!1)return void this._listLength--;if(""===this._mode&&!this._.isArray(this.ctx)==!1){var le=this.ctx,he=le.length,de=0,fe=this.position,pe=this._notNewList;for(pe?this._listLength+=he-1:(this.position=0,this._listLength=he),this._notNewList=!0;he>de;){var me=le[de++],_e=this.ctx;this.ctx=null===me?"":me,i.call(s),this.ctx=_e}return void(pe||(this.position=fe))}if(""===this._mode){var ge=this.ctx.block,be=this.ctx.elem,ve=this._currBlock||this.block;this.ctx||(this.ctx={});var ye=this._mode;this._mode="default";var we=this._links;this._links=this.ctx.links||this._links;var ke=this.block;this.block=ge||(be?ve:void 0);var Me=this._currBlock;this._currBlock=ge||be?void 0:ve;var Ee=this.elem;this.elem=this.ctx.elem;var xe=this.mods;this.mods=(ge?this.ctx.mods:this.mods)||{};var Ce=this.elemMods;return this.elemMods=this.ctx.elemMods||{},this.block||this.elem?this.position=(this.position||0)+1:this._listLength--,i.call(s),this._mode=ye,this._links=we,this.block=ke,this._currBlock=Me,this.elem=Ee,this.mods=xe,void(this.elemMods=Ce)}}else{var Te,Se=this,Be=Se.BEM,De=this.ctx,Ie=this._buf;if(__r8=this._mode,this._mode="tag",__r9=i.call(s),this._mode=__r8,Te=__r9,"undefined"!=typeof Te||(Te=De.tag),"undefined"!=typeof Te||(Te="div"),Te){var Oe,$e;this.block&&De.js!==!1&&(__r12=this._mode,this._mode="js",__r13=i.call(s),this._mode=__r12,$e=__r13,$e=$e?this._.extend(De.js,$e===!0?{}:$e):De.js===!0?{}:De.js,$e&&((Oe={})[Be.INTERNAL.buildClass(this.block,De.elem)]=$e)),Ie.push("<",Te);var Pe=(__r14=this._mode,this._mode="bem",__r15=i.call(s),this._mode=__r14,__r15);"undefined"!=typeof Pe||(Pe="undefined"!=typeof De.bem?De.bem:De.block||De.elem);var je=(__r16=this._mode,this._mode="cls",__r17=i.call(s),this._mode=__r16,__r17);je||(je=De.cls);var Ae=De.block&&Oe;if(Pe||je){if(Ie.push(' class="'),Pe){Be.INTERNAL.buildClasses(this.block,De.elem,De.elemMods||De.mods,Ie);var Ne=(__r18=this._mode,this._mode="mix",__r19=i.call(s),this._mode=__r18,__r19);if(De.mix&&(Ne=Ne?Ne.concat(De.mix):De.mix),Ne){var Le={};Le[o(this.block,this.elem)]=!0,this._.isArray(Ne)||(Ne=[Ne]);for(var Fe=0;Fe<Ne.length;Fe++){var Re=Ne[Fe],He=Re.block||Re.elem,ze=Re.block||Re._block||Se.block,Ue=Re.elem||Re._elem||Se.elem;if(He&&Ie.push(" "),Be.INTERNAL[He?"buildClasses":"buildModsClasses"](ze,Re.elem||Re._elem||(Re.block?void 0:Se.elem),Re.elemMods||Re.mods,Ie),Re.js&&((Oe||(Oe={}))[Be.INTERNAL.buildClass(ze,Re.elem)]=Re.js===!0?{}:Re.js,Ae||(Ae=ze&&!Re.elem)),He&&!Le[o(ze,Ue)]){Le[o(ze,Ue)]=!0;var We=(__r20=this.block,this.block=ze,__r21=this.elem,this.elem=Ue,__r22=this._mode,this._mode="mix",__r23=i.call(s),this.block=__r20,this.elem=__r21,this._mode=__r22,__r23);if(We)for(var qe=0;qe<We.length;qe++){var Ve=We[qe];(Ve.block||Ve.elem)&&Le[o(Ve.block,Ve.elem)]||(Ve._block=ze,Ve._elem=Ue,Ne.splice(Fe+1,0,Ve))}}}}}je&&Ie.push(Pe?" ":"",je),Ae&&Ie.push(" i-bem"),Ie.push('"')}if(Oe){var Je=(__r26=this._mode,this._mode="jsAttr",__r27=i.call(s),this._mode=__r26,__r27);Ie.push(" ",Je||"onclick",'="return ',this._.attrEscape(JSON.stringify(Oe)),'"')}var Ge=(__r28=this._mode,this._mode="attrs",__r29=i.call(s),this._mode=__r28,__r29);if(Ge=this._.extend(Ge,De.attrs)){var Ke;for(Ke in Ge)void 0!==Ge[Ke]&&Ie.push(" ",Ke,'="',this._.attrEscape(Ge[Ke]),'"')}}if(this._.isShortTag(Te))Ie.push("/>");else{Te&&Ie.push(">");var Qe=(__r30=this._mode,this._mode="content",__r31=i.call(s),this._mode=__r30,__r31);if(Qe||0===Qe){var Pe=this.block||this.elem,Xe=this._notNewList;this._notNewList=!1;var Ye=this.position;this.position=Pe?1:this.position;var Ze=this._listLength;this._listLength=Pe?1:this._listLength;var ti=this.ctx;this.ctx=Qe;var ei=this._mode;this._mode="",i.call(s),this._notNewList=Xe,this.position=Ye,this._listLength=Ze,this.ctx=ti,this._mode=ei}Te&&Ie.push("</",Te,">")}}}else{var ii,ni,oi,si=this.ctx.params||{},ri=this["i-global"],ai=si.tld&&si.tld!==ri.tld;ai&&(ii=si.tld,ni="tr"===ii?"yandex.com.tr":"yandex."+ii,oi=-1!=["ua","by","kz"].indexOf(ii)?"yandex.ru":ni,ri["content-region"]=ii,ri["click-host"]="//clck."+oi,ri["passport-host"]="https://passport."+oi,ri["pass-host"]="//pass."+ni,ri["social-host"]="//social."+ni,ri["export-host"]="//export."+ni);for(var ci in si)ri[ci]=si[ci]}}return!function(t,e){if(e.I18N)return void 0;t.BEM=e;var i=e.I18N=function(t,e){return e};i.keyset=function(){return i},i.key=function(t){return t},i.lang=function(){return void 0}}(this,"undefined"==typeof BEM?{}:BEM),!function(){function t(t,e){this.ctx=null===typeof t?"":t,this.apply=e,this._buf=[],this._=this,this._start=!0,this._mode="",this._listLength=0,this._notNewList=!1,this.position=0,this.block=void 0,this.elem=void 0,this.mods=void 0,this.elemMods=void 0}var n={},o=Object.prototype.toString,s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};!function(t,e){function i(t,e,i){i.push(s,t,s,e)}function n(t,e,n,o){o.push(t),n&&i(e,n,o)}function o(t,o,s,a,c){n(t,e,e,c),c.push(r,o),a&&i(s,a,c)}var s="_",r="__",a="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:a,MOD_DELIM:s,ELEM_DELIM:r,buildModPostfix:function(t,e,n){var o=n||[];return i(t,e,o),n?o:o.join("")},buildClass:function(t,i,s,r,a){var c=typeof s;if("string"==c?"string"!=typeof r&&(a=r,r=s,s=i,i=e):"undefined"!=c?(a=s,s=e):i&&"string"!=typeof i&&(a=i,i=e),!(i||s||a))return t;var u=a||[];return i?o(t,i,s,r,u):n(t,s,r,u),a?u:u.join("")},buildModsClasses:function(t,e,i,s){var r=s||[];if(i){var a;for(a in i)if(i.hasOwnProperty(a)){var c=i[a];null!=c&&(c=i[a]+"",c&&(r.push(" "),e?o(t,e,a,c,r):n(t,a,c,r)))}}return s?r:r.join("")},buildClasses:function(t,i,s,r){var a=r||[];return i?o(t,i,e,e,a):n(t,e,e,a),this.buildModsClasses(t,i,s,r),r?a:a.join("")}}}(n);var r=function(){var t={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},e=function(e){return t[e]||e};return function(t){return t=new RegExp(t,"g"),function(i){return(""+i).replace(t,e)}}}();t.prototype.isArray=function(t){return"[object Array]"===o.call(t)},t.prototype.isSimple=function(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e},t.prototype.isShortTag=function(t){return s.hasOwnProperty(t)},t.prototype.extend=function(t,e){if(!t||!e)return t||e;var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},t.prototype.identify=function(){var t=0,e=n.__id=+new Date,i="__"+e,o=function(){return"uniq"+e+ ++t};return function(t,e){return t?e||t[i]?t[i]:t[i]=o():o()}}(),t.prototype.xmlEscape=r("[&<>]"),t.prototype.attrEscape=r('["&<>]'),t.prototype.BEM=n,t.prototype.isFirst=function(){return 1===this.position},t.prototype.isLast=function(){return this.position===this._listLength},t.prototype.generateId=function(){return this.identify(this.ctx)},e.apply=t.apply=function(){var e=new t(this,i);return e.apply(),e._buf.join("")}}(),e}("undefined"==typeof exports?{}:exports);return function(i){return i||(i={}),t=i.cache,e.apply.call([this])}}();"undefined"==typeof exports||(exports.BEMHTML=BEMHTML);